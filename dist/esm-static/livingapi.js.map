{"version":3,"file":"livingapi.js","sources":["../../src/livingapi.js"],"sourcesContent":["/*!\n * LivingAPI JavaScript Library\n * https://my.living-apps.de/docs/LivingAPI.html\n *\n * Copyright 2017-2022 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2017-2022 by Walter Dörwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\nimport * as ul4 from '@livinglogic/ul4';\n\n\nfunction el(name, ...args)\n{\n\tlet dom_node = document.createElement(name);\n\tfor (let arg of args)\n\t{\n\t\tif (typeof(arg) === \"string\")\n\t\t\tdom_node.appendChild(document.createTextNode(arg));\n\t\tlet ismap = arg instanceof Map;\n\t\tlet isobject = ul4._isobject(arg);\n\t\tif (ismap || isobject)\n\t\t{\n\t\t\tif (isobject)\n\t\t\t\targ = Object.entries(arg);\n\t\t\tfor (let [name, value] of arg)\n\t\t\t{\n\t\t\t\tif (value !== null)\n\t\t\t\t\tdom_node.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t}\n\treturn dom_node;\n}\n\n\nexport class Base extends ul4.Proto\n{\n\tconstructor(id)\n\t{\n\t\tsuper();\n\t\tthis.id = id;\n\t}\n\n\tget ul4onid()\n\t{\n\t\treturn this.id;\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let i = 0; i < this._ul4onattrs.length; ++i)\n\t\t\tencoder.dump(this._dumpUL4ONAttr(this._ul4onattrs[i]));\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\treturn this[name];\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet i = 0;\n\t\tfor (let iter = decoder.loadcontent(); ; ++i)\n\t\t{\n\t\t\tlet iteritem = iter.next();\n\t\t\tif (iteritem.done)\n\t\t\t\tbreak;\n\t\t\tif (i < this._ul4onattrs.length)\n\t\t\t\tthis._loadUL4ONAttr(this._ul4onattrs[i], iteritem.value);\n\t\t}\n\t\tfor (; i < this._ul4onattrs.length; ++i)\n\t\t\tthis._setDefaultUL4ONAttr(this._ul4onattrs[i]);\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tthis[name] = value;\n\t}\n\n\t_setDefaultUL4ONAttr(name)\n\t{\n\t\tthis[name] = null;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (this._ul4attrs.has(name))\n\t\t{\n\t\t\tlet value = this[name];\n\t\t\tif (typeof(value) === \"function\")\n\t\t\t{\n\t\t\t\tlet realvalue = value.bind(this);\n\t\t\t\trealvalue._ul4_name = value._ul4_name || value.name;\n\t\t\t\trealvalue._ul4_signature = value._ul4_signature;\n\t\t\t\trealvalue._ul4_needsobject = value._ul4_needsobject;\n\t\t\t\trealvalue._ul4_needscontext = value._ul4_needscontext;\n\t\t\t\treturn realvalue;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t\telse if (name.startsWith(\"x_\"))\n\t\t{\n\t\t\treturn this.hasOwnProperty(name) ? this[name] : null;\n\t\t}\n\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name.startsWith(\"x_\"))\n\t\t{\n\t\t\tthis[name] = value;\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n};\n\n\nexport class Handler\n{\n\tsave(record)\n\t{\n\t}\n\n\tdelete(record)\n\t{\n\t}\n};\n\n\nclass GlobalsType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Globals;\n\t}\n};\n\nlet globalstype = new GlobalsType(\"la\", \"Globals\", \"Global information\");\n\n\nexport class Globals extends Base\n{\n\tconstructor(id)\n\t{\n\t\tsuper(id);\n\t\tthis.version = null;\n\t\tthis.hostname = null;\n\t\tthis.platform = null;\n\t\tthis.user = null;\n\t\tthis.lang = null;\n\t\tthis.datasources = null;\n\t\tthis.app = null;\n\t\tthis.record = null;\n\t\tthis.mode = null;\n\t\tthis.maxdbactions = null;\n\t\tthis.maxtemplateruntime = null;\n\t\tthis.flashmessages = null;\n\t\tthis.view_template_id = null;\n\t\tthis.email_template_id = null;\n\t\tthis.handler = new Handler();\n\t\tthis._log_stack = [];\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn globalstype;\n\t}\n\n\t// distance between two geo coordinates (see https://de.wikipedia.org/wiki/Orthodrome#Genauere_Formel_zur_Abstandsberechnung_auf_der_Erde)\n\tstatic geodist(geo1, geo2)\n\t{\n\t\tlet sqsin = function sqsin(x) {x = Math.sin(x); return x*x};\n\t\tlet sqcos = function sqsos(x) {x = Math.cos(x); return x*x};\n\t\tconst deg2rad = Math.PI/180; // Conversion factor degree -> radians\n\t\tconst radius = 6378.137; // Equatorial radius of earth in km\n\t\tconst flat = 1/298.257223563; // Earth flattening\n\n\t\tconst lat1 = geo1.lat * deg2rad;\n\t\tconst long1 = geo1.long * deg2rad;\n\t\tconst lat2 = geo2.lat * deg2rad;\n\t\tconst long2 = geo2.long * deg2rad;\n\t\tconst F = (lat1 + lat2)/2;\n\t\tconst G = (lat1 - lat2)/2;\n\t\tconst l = (long1 - long2)/2;\n\t\tconst S = sqsin(G) * sqcos(l) + sqcos(F) * sqsin(l);\n\t\tconst C = sqcos(G) * sqcos(l) + sqsin(F) * sqsin(l);\n\t\tconst w = Math.atan(Math.sqrt(S/C));\n\t\tconst D = 2 * w * radius;\n\t\tconst T = Math.sqrt(S*C)/w;\n\t\tconst H1 = (3*T-1)/(2*C);\n\t\tconst H2 = (3*T+1)/(2*S);\n\t\tconst s = D * (1 + flat * H1 * sqsin(F) * sqcos(G) - flat * H2 * sqcos(F) * sqsin(G));\n\t\treturn s;\n\t}\n\n\tscaled_url(image, width, height, type=\"fill\", enlarge=true, gravity=\"sm\", quality=null, rotate=null, blur=null, sharpen=null, format=null, cache=true)\n\t{\n\t\tlet filename = null;\n\n\t\tif (image instanceof File)\n\t\t{\n\t\t\timage = \"https://\" + this.hostname + image.archive_url;\n\t\t\tfilename = encodeURIComponent(image.filename);\n\t\t\tif (filename != image.filename)\n\t\t\t\tfilename = null;\n\t\t}\n\n\t\tlet result = \"\";\n\n\t\tif (cache)\n\t\t\tresult += \"/imgproxycache/insecure\";\n\t\telse\n\t\t\tresult += \"/imgproxy/insecure\";\n\n\t\tif (type !== \"fit\")\n\t\t\tresult += \"/rt:\" + type;\n\n\t\tif (width !== null && width !== undefined)\n\t\t\tresult += \"/w:\" + width;\n\n\t\tif (height !== null && height !== undefined)\n\t\t\tresult += \"/h:\" + height;\n\n\t\tif (enlarge)\n\t\t\tresult += \"/el:1\";\n\n\t\tif (gravity !== null && gravity !== undefined)\n\t\t\tresult += \"/g:\" + gravity;\n\n\t\tif (quality !== null && quality !== undefined)\n\t\t\tresult += \"/q:\" + quality;\n\n\t\tif (rotate !== null && rotate % 360 != 0)\n\t\t\tresult += \"/rot:\" + rotatet;\n\n\t\tif (blur !== null && blur !== undefined)\n\t\t\tresult += \"/bl:\" + blur;\n\n\t\tif (sharpen !== null && sharpen !== undefined)\n\t\t\tresult += \"/sh:\" + sharpen;\n\n\t\tif (format !== null && format !== undefined)\n\t\t\tresult += \"/f:\" + format;\n\n\t\tif (filename !== null && filename !== undefined)\n\t\t\tresult += \"/fn:\" + filename;\n\n\t\tresult += \"/plain/\" + encodeURIComponent(image);\n\n\t\treturn result;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Globals version=\" + ul4._repr(this.version) + \" mode=\" + ul4._repr(this.mode) + \">\";\n\t}\n\n\n\t_in_form()\n\t{\n\t\treturn this.mode !== null && this.mode.startsWith(\"form/\");\n\t}\n\n\tmsg_bool(value)\n\t{\n\t\tswitch (value)\n\t\t{\n\t\t\tcase true:\n\t\t\t\treturn this.msg_bool_true();\n\t\t\tcase false:\n\t\t\t\treturn this.msg_bool_false();\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tmsg_bool_true(value)\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"Ja\";\n\t\t\tdefault:\n\t\t\t\treturn \"Yes\";\n\t\t}\n\t}\n\n\tmsg_bool_false(value)\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"Nein\";\n\t\t\tdefault:\n\t\t\t\treturn \"No\";\n\t\t}\n\t}\n\n\tmsg_no_fields()\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"(Keine Felder gefunden)\";\n\t\t\tdefault:\n\t\t\t\treturn \"(No fields found)\";\n\t\t}\n\t}\n\n\tmsg_nothing_selected()\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"(Nichts ausgewählt)\";\n\t\t\tdefault:\n\t\t\t\treturn \"(Nothing selected)\";\n\t\t}\n\t}\n\n\t_make_log_message(messages)\n\t{\n\t\tlet output = [];\n\t\tfor (let message of messages)\n\t\t{\n\t\t\tif (typeof(message) !== \"string\")\n\t\t\t\tmessage = ul4._repr(message);\n\t\t\toutput.push(message);\n\t\t}\n\t\treturn output.join(\" \");\n\t}\n\n\tbegin_logging(header)\n\t{\n\t\tthis._log_stack.push({header: header, output: false});\n\t}\n\n\tend_logging()\n\t{\n\t\tif (this._log_stack)\n\t\t{\n\t\t\tif (this._log_stack[this._log_stack.length-1].output && console && console.groupEnd)\n\t\t\t\tconsole.groupEnd();\n\t\t\tthis._log_stack.pop();\n\t\t}\n\t}\n\n\tgroup_logging(header, callback)\n\t{\n\t\tthis.begin_logging(header);\n\t\ttry\n\t\t{\n\t\t\tcallback();\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.end_logging();\n\t\t}\n\t}\n\n\t_start_log_message()\n\t{\n\t\tfor (let level of this._log_stack)\n\t\t{\n\t\t\tif (!level.output)\n\t\t\t{\n\t\t\t\tif (console && console.group)\n\t\t\t\t\tconsole.group(level.header)\n\t\t\t\tlevel.output = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tlog_debug(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.debug)\n\t\t\tconsole.debug(this._make_log_message(message))\n\t}\n\n\tlog_info(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.info)\n\t\t\tconsole.info(this._make_log_message(message))\n\t}\n\n\tlog_warning(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.warn)\n\t\t\tconsole.warn(this._make_log_message(message))\n\t}\n\n\tlog_error(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.error)\n\t\t\tconsole.error(this._make_log_message(message))\n\t}\n};\n\nGlobals.prototype._ul4onattrs = [\"version\", \"platform\", \"user\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"lang\", \"datasources\", \"hostname\", \"app\", \"record\", \"mode\", \"view_template_id\", \"email_template_id\", \"view_id\"];\nGlobals.prototype._ul4attrs = new Set([\"version\", \"hostname\", \"platform\", \"user\", \"lang\", \"datasources\", \"app\", \"record\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"mode\", \"scaled_url\", \"log_debug\", \"log_info\", \"log_warning\", \"log_error\"]);\nul4.expose(Globals.prototype.log_debug, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_info, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_warning, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_error, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.scaled_url, [\n\t\"image\", \"p\",\n\t\"width\", \"p\",\n\t\"height\", \"p\",\n\t\"type\", \"k=\", \"fill\",\n\t\"enlarge\", \"k=\", true,\n\t\"gravity\", \"k=\", \"sm\",\n\t\"quality\", \"k=\", null,\n\t\"rotate\", \"k=\", null,\n\t\"blur\", \"k=\", null,\n\t\"sharpen\", \"k=\", null,\n\t\"format\", \"k=\", null,\n\t\"cache\", \"k==\", true\n]);\n\n\nclass FlashMessageType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FlashMessage;\n\t}\n};\n\nlet flashmessagetype = new FlashMessageType(\"la\", \"FlashMessage\", \"A flash message in a web page\");\n\n\nexport class FlashMessage extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn flashmessagetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<FlashMessage type=\" + ul4._repr(this.type) + \" title=\" + ul4._repr(this.title) + \">\";\n\t}\n};\n\nFlashMessage.prototype._ul4onattrs = [\"timestamp\", \"type\", \"title\", \"message\"];\nFlashMessage.prototype._ul4attrs = new Set([\"timestamp\", \"type\", \"title\", \"message\"]);\n\n\nclass AppType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof App;\n\t}\n};\n\nlet apptype = new AppType(\"la\", \"App\", \"A LivingApps application\");\n\n\nexport class App extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn apptype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<App id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n\n\tinsert(values={})\n\t{\n\t\tlet record = this[ul4.symbols.call](values);\n\t\tthis.globals.handler.save(this);\n\t\treturn record;\n\t}\n\n\tget layout_controls()\n\t{\n\t\tif (this.active_view === null)\n\t\t\treturn new Map();\n\t\treturn this.active_view.layout_controls;\n\t}\n\n\t[ul4.symbols.call](values={})\n\t{\n\t\tlet record = new Record(null, this);\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let identifier of values.keys())\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, values, null, null);\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let identifier in values)\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, new Map(ul4._list(ul4.dicttype.items(values))), null, null);\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\t\treturn record;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t{\n\t\t\tif (!this.controls.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.controls.get(name.substr(2));\n\t\t}\n\t\telse if (name.startsWith(\"lc_\"))\n\t\t{\n\t\t\tif (this.layout_controls === null || !this.layout_controls.has(name.substr(3)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.layout_controls.get(name.substr(3));\n\t\t}\n\t\telse if (name.startsWith(\"p_\") && this.params !== null)\n\t\t{\n\t\t\tif (!this.params.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.params.get(name.substr(2));\n\t\t}\n\t\telse if (name.startsWith(\"pv_\") && this.params !== null)\n\t\t{\n\t\t\tif (!this.params.has(name.substr(3)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.params.get(name.substr(3)).value;\n\t\t}\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n\n\tget active_view()\n\t{\n\t\treturn this._active_view;\n\t}\n\n\tset active_view(view)\n\t{\n\t\tif (view === null)\n\t\t\t;\n\t\telse if (typeof(view) === \"string\")\n\t\t{\n\t\t\tif (this.views !== null && this.views.has(view))\n\t\t\t\tview = this.views.get(view);\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" not found!\");\n\t\t}\n\t\telse if (view instanceof View)\n\t\t{\n\t\t\tif (view.app === this)\n\t\t\t\t;\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" belongs to the wrong app!\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new ul4.TypeError(ul4._repr(view) + \" is not a view!\");\n\t\t}\n\n\t\tthis._active_view = view;\n\t}\n};\n\n\nApp.prototype._ul4onattrs = [\"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"basetable\", \"primarykey\", \"insertprocedure\", \"updateprocedure\", \"deleteprocedure\", \"templates\", \"createdat\", \"updatedat\", \"updatedby\", \"superid\", \"favorite\", \"_active_view\"];\nApp.prototype._ul4attrs = new Set([\"id\", \"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"insert\", \"favorite\", \"_active_view\"]);\nul4.expose(App.prototype[ul4.symbols.call], [\"values\", \"**\"], {\"needsobject\": true});\nul4.expose(App.prototype.insert, [\"values\", \"**\"], {\"needsobject\": true});\n\n\nclass ViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof View;\n\t}\n};\n\nlet viewtype = new ViewType(\"la\", \"View\", \"An input form for a LivingViews application\");\n\n\nexport class View extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<View id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nView.prototype._ul4onattrs = [\"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\"];\nView.prototype._ul4attrs = new Set([\"id\", \"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\"]);\n\n\nclass DataSourceType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DataSource;\n\t}\n};\n\nlet datasourcetype = new DataSourceType(\"la\", \"DataSource\", \"The data resulting from a data source configuration\");\n\n\nexport class DataSource extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datasourcetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<DataSource id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nDataSource.prototype._ul4onattrs = [\"identifier\", \"app\", \"apps\"];\nDataSource.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"app\", \"apps\"]);\n\n\nclass RecordType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Record;\n\t}\n};\n\nlet recordtype = new RecordType(\"la\", \"Record\", \"A record of a LivingApp application\");\n\n\nexport class Record extends Base\n{\n\tconstructor(id, app)\n\t{\n\t\tsuper(id);\n\t\tthis.app = app;\n\t\tthis.createdat = null;\n\t\tthis.createdby = null;\n\t\tthis.updatedat = null;\n\t\tthis.updatedby = null;\n\t\tthis.updatecount = 0;\n\t\tthis._sparsevalues = new Map();\n\t\tthis._values = null;\n\t\tthis._fields = null;\n\t\tthis.children = new Map();\n\t\tthis.attachments = null;\n\t\tthis.errors = [];\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparsefieldlookupdata = null;\n\t\tthis._is_deleted = false;\n\t\tthis._is_new = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn recordtype;\n\t}\n\n\tdisplay_text(maxlevel=3, controls=null)\n\t{\n\t\tif (maxlevel == 0)\n\t\t\treturn \"...\";\n\t\tlet fields = [];\n\t\tfor (let [identifier, control] of (controls || this.app.controls))\n\t\t{\n\t\t\tif (controls !== null || control.priority)\n\t\t\t{\n\t\t\t\tlet fieldvalue = this.fields.get(identifier).display_value(maxlevel-1);\n\t\t\t\tif (fieldvalue !== null)\n\t\t\t\t\tfields.push([control.label, fieldvalue]);\n\t\t\t}\n\t\t}\n\t\tif (fields.length === 0)\n\t\t\treturn this.globals.msg_no_fields();\n\t\telse if (fields.length === 1)\n\t\t\treturn fields[0][1];\n\t\tlet result = [];\n\t\tfor (let [label, fieldvalue] of fields)\n\t\t\tresult.push(label + \": \" + fieldvalue);\n\t\treturn result.join(\", \");\n\t}\n\n\t_make_fields(defaults, values, errors, lookupdata)\n\t{\n\t\tlet fields = new Map();\n\n\t\tfor (let control of this.app.controls.values())\n\t\t{\n\t\t\tlet identifier = control.identifier;\n\t\t\tlet value = null;\n\t\t\tif (values !== null)\n\t\t\t{\n\t\t\t\tif (defaults && !values.has(identifier))\n\t\t\t\t\tvalue = control.default;\n\t\t\t\telse if (values.has(identifier))\n\t\t\t\t\tvalue = values.get(identifier);\n\t\t\t}\n\t\t\tlet field = new control.fieldtype(control, this, value);\n\t\t\tfields.set(identifier, field);\n\t\t\tif (errors !== null && errors.has(identifier))\n\t\t\t\tfield.errors = errors.get(identifier);\n\t\t\tif (lookupdata !== null && lookupdata.has(identifier))\n\t\t\t\tfield.lookupdata = lookupdata.get(identifier);\n\t\t}\n\n\t\tthis._fields = fields;\n\t\tthis._sparsevalues = null;\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparselookupdata = null;\n\t}\n\n\t_in_form()\n\t{\n\t\tlet globals = this.app.globals;\n\n\t\treturn globals._in_form() && this === globals.record;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [\"<Record id=\", ul4._repr(this.id)];\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.control.priority && !field.is_empty())\n\t\t\t{\n\t\t\t\tv.push(\" v_\");\n\t\t\t\tv.push(field.control.identifier);\n\t\t\t\tv.push(\"=\");\n\t\t\t\tv.push(ul4._repr(field.value)); // FIXME: This might lead to infinite recursions\n\t\t\t}\n\t\t}\n\t\tv.push(\" state=\");\n\t\tv.push(ul4._repr(this.state));\n\t\tv.push(\">\");\n\t\treturn v.join(\"\");\n\t}\n\n\tget state()\n\t{\n\t\tif (this._is_deleted)\n\t\t\treturn \"deleted\";\n\t\telse if (this._is_new)\n\t\t\treturn \"new\";\n\t\telse if (this.is_dirty())\n\t\t\treturn \"dirty\";\n\t\telse\n\t\t\treturn \"saved\";\n\t}\n\n\tget values()\n\t{\n\t\tif (this._values === null)\n\t\t{\n\t\t\tthis._values = new Map();\n\t\t\tfor (let field of this.fields.values())\n\t\t\t{\n\t\t\t\tthis._values.set(field.control.identifier, field.value);\n\t\t\t}\n\t\t}\n\t\treturn this._values;\n\t}\n\n\tget fields()\n\t{\n\t\tif (this._fields === null)\n\t\t\tthis._make_fields(false, this._sparsevalues, this._sparsefielderrors, this._sparsefieldlookupdata)\n\t\treturn this._fields;\n\t}\n\n\tis_dirty()\n\t{\n\t\tif (this.id === null)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.is_dirty())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\thas_errors()\n\t{\n\t\tif (this.errors.length !== 0)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.has_errors())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\tlet result = this.app.globals.handler.delete(this);\n\t\tthis._is_deleted = true;\n\t\treturn result;\n\t}\n\n\tsave()\n\t{\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tupdate(values={})\n\t{\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let [key, value] of values.entries())\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\tfields.get(key).value = value;\n\t\t\t}\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let key in values)\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = values[key];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tsearch(search)\n\t{\n\t\tfor (let identifier in search)\n\t\t{\n\t\t\tlet fieldsearch = search[identifier];\n\t\t\tif (ul4._bool(fieldsearch))\n\t\t\t{\n\t\t\t\tif (!this.fields.get(identifier).search(fieldsearch))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._is_new = false;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"values\")\n\t\t\treturn this._sparsevalues;\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"values\")\n\t\t{\n\t\t\tthis._sparsevalues = value;\n\t\t\tthis._values = null;\n\t\t\tthis._fields = null;\n\t\t}\n\t\telse\n\t\t\tthis[name] = value;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\treturn this.children.get(name.substr(2))\n\t\telse if (name.startsWith(\"f_\"))\n\t\t\treturn this.fields.get(name.substr(2))\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\treturn this.fields.get(name.substr(2)).value\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\tthis.children[name.substr(2)] = value;\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\tthis.fields.get(name.substr(2)).value = value;\n\t\telse\n\t\t\treturn super[ul4.symbols.setattr](name, value);\n\t}\n};\n\nRecord.prototype._ul4onattrs = [\"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"_sparsevalues\", \"attachments\", \"children\", \"errors\", \"_sparsefielderrors\", \"_sparsefieldlookupdata\"];\nRecord.prototype._ul4attrs = new Set([\"id\", \"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"values\", \"fields\", \"attachments\", \"children\", \"errors\"]);\nul4.expose(Record.prototype.is_dirty, []);\nul4.expose(Record.prototype.has_errors, []);\nul4.expose(Record.prototype.delete, []);\nul4.expose(Record.prototype.save, []);\nul4.expose(Record.prototype.update, [\"values\", \"**\"], {\"needsobject\": true});\n\n\nclass FieldType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Field;\n\t}\n};\n\nlet fieldtype = new FieldType(\"la\", \"Field\", \"Holds the value of a field of a record (and related information)\");\n\n\nexport class Field extends Base\n{\n\tconstructor(control, record, value)\n\t{\n\t\tsuper(null);\n\t\tthis.control = control;\n\t\tthis.record = record;\n\t\tthis._label = null;\n\t\tthis._lookupdata = null;\n\t\tthis.errors = [];\n\t\tthis._value = null;\n\t\tif (!this._in_form())\n\t\t\tthis.value = value;\n\t\tthis._dirty = false;\n\t\tthis._enabled = true;\n\t\tthis._writable = true;\n\t\tthis._visible = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fieldtype;\n\t}\n\n\tget value()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn this._get_dom_value();\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tlet oldvalue = this._value;\n\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\n\t\tif (ul4._ne(oldvalue, change.value))\n\t\t{\n\t\t\tthis.record.values.set(this.control.identifier, change.value);\n\t\t\tthis._value = change.value;\n\t\t\tthis._dirty = true;\n\t\t}\n\t\tthis.errors = change.errors;\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_value(this._value);\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\treturn null;\n\t}\n\n\t_validate(change)\n\t{\n\t\t// Do nothing, i.e. accept the value unchanged and without errors\n\t}\n\n\t_set_dom_label()\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._dom_label.textContent = this.label;\n\t}\n\n\tget label()\n\t{\n\t\treturn this._label ?? this.control.label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t\tthis._set_dom_label();\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.control.globals;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value === null;\n\t}\n\n\tis_dirty()\n\t{\n\t\treturn this._dirty;\n\t}\n\n\thas_errors()\n\t{\n\t\treturn this.errors.length !== 0;\n\t}\n\n\tsearch(searchvalue)\n\t{\n\t\treturn this.control.search(this.value, searchvalue);\n\t}\n\n\tmsg_field_required(value)\n\t{\n\t\tswitch (this.globals.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn `\"${this.label}\" wird benötigt!`;\n\t\t\tdefault:\n\t\t\t\treturn `\"${this.label}\" is required!`;\n\t\t}\n\t}\n\n\tmsg_field_wrong_type(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support the type ${ul4._type(value).name}!`;\n\t}\n\n\tmsg_bool_truerequired(value)\n\t{\n\t\treturn `\"${this.label}\" only accepts \"Yes\"!`;\n\t}\n\n\tmsg_string_tooshort(value)\n\t{\n\t\treturn `\"${this.label}\" is too short. You must use at least ${this.control.minlength} characters!`;\n\t}\n\n\tmsg_string_toolong(value)\n\t{\n\t\treturn `\"${this.label}\" is too long. You may use at most ${this.control.maxlength} characters!`;\n\t}\n\n\tmsg_email_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid email address!`;\n\t}\n\n\tmsg_url_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid URL!`;\n\t}\n\n\tmsg_tel_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid phone number!`;\n\t}\n\n\tmsg_date_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this date format!`;\n\t}\n\n\tmsg_number_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this number format!`;\n\t}\n\n\tmsg_lookup_wrongitem(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" doesn't belong to this lookup!`;\n\t}\n\n\tmsg_lookup_unknownkey(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" is unknown!`;\n\t}\n\n\tmsg_applookup_wrongrecord(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" doesn't belong to the correct app!`;\n\t}\n\n\tmsg_applookup_unknownkey(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" can't be found!`;\n\t}\n\n\t/*\n\tThe following methods are used in the input form.\n\n\tI.e. they are expected to be executed inside a browser.\n\t**/\n\t_in_form()\n\t{\n\t\treturn this.record._in_form();\n\t}\n\n\tget _sel_root()\n\t{\n\t\treturn \"#livingapps-form .\" + this.control._cssclass_root + \".llft-id-\" + this.control.identifier;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label span\";\n\t}\n\n\tget _sel_control()\n\t{\n\t\treturn this._sel_root + \" \" + this.control._cssclass_control;\n\t}\n\n\tget _dom_root()\n\t{\n\t\treturn document.querySelector(this._sel_root);\n\t}\n\n\tget _dom_label()\n\t{\n\t\treturn document.querySelector(this._sel_label);\n\t}\n\n\tget _dom_control()\n\t{\n\t\treturn document.querySelector(this._sel_control);\n\t}\n\n\tget _dom_controls()\n\t{\n\t\treturn document.querySelectorAll(this._sel_control);\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.value = value;\n\t}\n\n\tget visible()\n\t{\n\t\treturn this._visible;\n\t}\n\n\tset visible(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._dom_root.hidden = !value;\n\t\tthis._visible = value;\n\t}\n\n\tget enabled()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn !this._dom_root.classList.contains(\"llft-control-readonly\");\n\t\telse\n\t\t\treturn this._enabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet disabled = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.disabled = disabled;\n\t\t\tthis._dom_root.classList.toggle(\"llft-control-readonly\", disabled);\n\t\t}\n\t\tthis._enabled = value;\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tthis._writable = value;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet s = \"<\" + this.constructor.name + \" identifier=\";\n\t\ts += ul4._repr(this.control.identifier)\n\t\tif (this._dirty)\n\t\t\ts += \" is_dirty()=True\";\n\t\tif (this.errors.length > 0)\n\t\t\ts += \" has_errors()=True\";\n\t\ts += \">\"\n\t\treturn s;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = value;\n\t\telse if (name === \"visible\")\n\t\t\tthis.visible = ul4._bool(value);\n\t\telse if (name === \"enabled\")\n\t\t\tthis.enabled = ul4._bool(value);\n\t\telse if (name === \"writable\")\n\t\t\tthis.writable = ul4._bool(value);\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n};\n\nField.prototype._ul4onattrs = [\"control\", \"record\", \"label\", \"value\", \"errors\", \"_visible\", \"_enabled\", \"_writable\"];\nField.prototype._ul4attrs = new Set([\"control\", \"record\", \"label\", \"value\", \"errors\", \"visible\", \"enabled\", \"writable\"]);\n\n\nclass BoolFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolField;\n\t}\n};\n\nlet boolfieldtype = new BoolFieldType(\"la\", \"BoolField\", \"Holds the value of a bool field of a record (and related information)\");\n\n\nexport class BoolField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"boolean\")\n\t\t{\n\t\t\tif (this.control.required && !change.value)\n\t\t\t\tchange.errors.push(this.msg_bool_truerequired(change.value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.checked;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.checked = value;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\treturn this.globals.msg_bool(this.value);\n\t}\n};\n\n\nclass IntFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntField;\n\t}\n};\n\nlet intfieldtype = new IntFieldType(\"la\", \"IntField\", \"Holds the value of an int field of a record (and related information)\");\n\n\nexport class IntField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (/^\\s*[-+]?\\d+\\s*$/.test(value))\n\t\t\treturn parseInt(value);\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = value;\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tif (Math.round(change.value) !== change.value)\n\t\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\t\t// Keep original floating point number\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tlet testvalue = this._parse(value);\n\t\t\tif (testvalue !== null)\n\t\t\t\tvalue = testvalue;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tsuper._set_dom_value(value + \"\");\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\treturn value != null ? value + \"\" : null;\n\t}\n};\n\n\nclass NumberFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberField;\n\t}\n};\n\nlet numberfieldtype = new NumberFieldType(\"la\", \"NumberField\", \"Holds the value of a number field of a record (and related information)\");\n\n\nexport class NumberField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numberfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (value === null)\n\t\t\treturn null;\n\n\t\t// Try to ignore thousands separators and return the value as a number\n\t\tlet testvalue = value;\n\t\t// Count decimal delimiters\n\t\tlet seps = \"\";\n\t\tlet commas = 0;\n\t\tlet dots = 0\n\t\tfor (let i = 0; i < value.length; ++i)\n\t\t{\n\t\t\tlet c = value[i];\n\t\t\tif (c == \",\")\n\t\t\t{\n\t\t\t\tcommas++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t\telse if (c == \".\")\n\t\t\t{\n\t\t\t\tdots++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t}\n\t\tlet convert = null;\n\t\tif (commas == 0)\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\t; // nothing to do\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse if (commas == 1)\n\t\t{\n\t\t\tif (dots == 1)\n\t\t\t\tconvert = (seps == \".,\") ? \"de\" : \"en\";\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse // commas > 1\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\tconvert = \"en\";\n\t\t\telse\n\t\t\t\treturn null; // We can't guess what the user meant\n\t\t}\n\n\t\tif (convert === \"de\")\n\t\t\ttestvalue = testvalue.replace(/\\./g, \"\").replace(/,/g, \".\");\n\t\telse if (convert === \"en\")\n\t\t\ttestvalue = testvalue.replace(/,/g, \"\");\n\t\tlet floatvalue = parseFloat(testvalue);\n\t\tif (isNaN(floatvalue))\n\t\t\treturn value;\n\t\treturn floatvalue;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tchange.value = value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tlet value = this._bound_value(change.value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\tchange.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_bound_value(value)\n\t{\n\t\tif (this.control.minimum !== null)\n\t\t{\n\t\t\tif (value < this.control.minimum)\n\t\t\t\tvalue = this.control.minimum;\n\t\t}\n\t\tif (this.control.maximum !== null)\n\t\t{\n\t\t\tif (value > this.control.maximum)\n\t\t\t\tvalue = this.control.maximum;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (typeof(value) == \"string\")\n\t\t\t{\n\t\t\t\tlet testvalue = this._parse(value);\n\t\t\t\tif (testvalue !== null)\n\t\t\t\t\tvalue = testvalue;\n\t\t\t}\n\t\t\tif (typeof(value) === \"number\")\n\t\t\t{\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (typeof(value) === \"number\")\n\t\t{\n\t\t\tvalue = this._bound_value(value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = value.toFixed(this.control.precision);\n\t\t}\n\t\tvalue += \"\";\n\t\tif (this.globals.lang == \"de\" && this.control.precision === null)\n\t\t\tvalue = value.replace(\".\", \",\");\n\t\tsuper._set_dom_value(value);\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\tif (this.control.precision !== null)\n\t\t\treturn value.toFixed(this.control.precision);\n\t\treturn value.toString();\n\t}\n};\n\n\nclass StringFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringField;\n\t}\n};\n\nlet stringfieldtype = new StringFieldType(\"la\", \"StringField\", \"Holds the value of a string field of a record (and related information)\");\n\n\nexport class StringField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet minlength = this.control.minlength;\n\t\t\tlet maxlength = this.control.maxlength;\n\t\t\tif (minlength !== null && change.value.length < minlength)\n\t\t\t\tchange.errors.push(this.msg_string_tooshort(change.value))\n\t\t\tif (maxlength !== null && change.value.length > maxlength)\n\t\t\t\tchange.errors.push(this.msg_string_toolong(change.value))\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet readonly = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.readOnly = readonly;\n\t\t}\n\t\tsuper.writable = value;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\treturn this.value;\n\t}\n};\n\n\nclass EmailFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailField;\n\t}\n};\n\nlet emailfieldtype = new EmailFieldType(\"la\", \"EmailField\", \"Holds the value of a string/email field of a record (and related information)\");\n\n\nexport class EmailField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_email_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass URLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLField;\n\t}\n};\n\nlet urlfieldtype = new URLFieldType(\"la\", \"URLField\", \"Holds the value of a string/url field of a record (and related information)\");\n\n\nexport class URLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tlet url = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\turl = new URL(change.value);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t\tif (url !== null && url.protocol !== \"http:\" && url.protocol !== \"https:\")\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TelFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelField;\n\t}\n};\n\nlet telfieldtype = new TelFieldType(\"la\", \"TelField\", \"Holds the value of a string/tel field of a record (and related information)\");\n\n\nexport class TelField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^\\\\+?[0-9 /()-]+$/;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_tel_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TextAreaFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaField;\n\t}\n};\n\nlet textareafieldtype = new TextAreaFieldType(\"la\", \"TextAreaField\", \"Holds the value of a string/textarea field of a record (and related information)\");\n\n\nexport class TextAreaField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareafieldtype;\n\t}\n};\n\n\nclass HTMLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLField;\n\t}\n};\n\nlet htmlfieldtype = new HTMLFieldType(\"la\", \"HTMLField\", \"Holds the value of a string/html field of a record (and related information)\");\n\n\nexport class HTMLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlfieldtype;\n\t}\n};\n\n\nclass GeoFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoField;\n\t}\n};\n\nlet geofieldtype = new GeoFieldType(\"la\", \"GeoField\", \"Holds the value of a geo field of a record (and related information)\");\n\n\nexport class GeoField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geofieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tfor (let dom_node of this._dom_controls)\n\t\t{\n\t\t\tif (dom_node.id.endsWith(\"_geoinfo\"))\n\t\t\t{\n\t\t\t\tlet value = dom_node.value;\n\t\t\t\tif (value)\n\t\t\t\t{\n\t\t\t\t\tvalue = JSON.parse(value);\n\t\t\t\t\treturn new Geo(\n\t\t\t\t\t\tvalue.geometry.coordinates[0],\n\t\t\t\t\t\tvalue.geometry.coordinates[1],\n\t\t\t\t\t\tvalue.properties.formatted_address\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\tfor (let dom_node of this._dom_controls)\n\t\t\t{\n\t\t\t\tdom_node.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let dom_node of this._dom_controls)\n\t\t\t{\n\t\t\t\tif (dom_node.id.endsWith(\"_geoinfo\"))\n\t\t\t\t{\n\t\t\t\t\tlet dom_value = {\n\t\t\t\t\t\t\"type\": \"Feature\",\n\t\t\t\t\t\t\"geometry\": {\n\t\t\t\t\t\t\t\"coordinates\": [\n\t\t\t\t\t\t\t\tvalue.lat,\n\t\t\t\t\t\t\t\tvalue.long\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\"formatted_address\": value.info\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tdom_node.value = ul4._asjson(dom_value);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tdom_node.value = value.info;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (this.value === null)\n\t\t\treturn null;\n\t\t// FIXME: Show N/S and W/E? Show arc minutes/seconds?\n\t\tlet result = value.lat.toFixed(5) + \", \" + value.long.toFixed(5);\n\t\tif (value.info !== null)\n\t\t\tresult += \" (\" + value.info + \")\";\n\t\treturn result;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof Geo))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass FileFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileField;\n\t}\n};\n\nlet filefieldtype = new FileFieldType(\"la\", \"FileField\", \"Holds the value of a file field of a record (and related information)\");\n\n\nexport class FileField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof File))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\t// Always return `null``\n\t\treturn null;\n\t}\n\n\t_set_dom_value()\n\t{\n\t\t// Do nothing\n\t}\n};\n\n\nclass FileSignatureFieldType extends FileFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureField;\n\t}\n};\n\nlet filesignaturefieldtype = new FileSignatureFieldType(\"la\", \"FileSignatureField\", \"Holds the value of a file/signature field of a record (and related information)\");\n\n\nexport class FileSignatureField extends FileField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\t// FIXME: Implement handling of data URLs.\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass DateFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateFieldBase;\n\t}\n};\n\nlet datefieldbasetype = new DateFieldBaseType(\"la\", \"DateFieldBase\", \"Holds the value of a date field of a record (and related information)\");\n\n\nexport class DateFieldBase extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldbasetype;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\treturn ul4._format(value, this.control.formatstring())\n\t}\n\n\t_parse(value, format)\n\t{\n\t\tlet year = null, month = null, day = null, hour = 0, minute = 0, second = 0, ispm = null;\n\n\t\tfunction _int(v, len, min, max)\n\t\t{\n\t\t\tv = v.substring(0, len);\n\t\t\tif (v.length != len)\n\t\t\t\treturn null;\n\t\t\tv = parseInt(v, 10);\n\t\t\tif (isNaN(v) || v < min || v > max)\n\t\t\t\treturn null;\n\t\t\treturn v;\n\t\t}\n\n\t\twhile (value)\n\t\t{\n\t\t\t// Are both `value` and `format` not `null`,\n\t\t\t// i.e. neither `value` nor `format` is exhaused?\n\t\t\tif (!format)\n\t\t\t\treturn null;\n\t\t\tif (format.startsWith(\"%Y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 4);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(4);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 2);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%m\"))\n\t\t\t{\n\t\t\t\tmonth = _int(value, 2);\n\t\t\t\tif (month === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%d\"))\n\t\t\t{\n\t\t\t\tday = _int(value, 2);\n\t\t\t\tif (day === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%H\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%I\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%M\"))\n\t\t\t{\n\t\t\t\tminute = _int(value, 2);\n\t\t\t\tif (minute === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%S\"))\n\t\t\t{\n\t\t\t\tsecond = _int(value, 2);\n\t\t\t\tif (second === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%p\"))\n\t\t\t{\n\t\t\t\tif (value.toLowerCase().startsWith(\"pm\"))\n\t\t\t\t\tispm = true;\n\t\t\t\telse if (value.toLowerCase().startsWith(\"am\"))\n\t\t\t\t\tispm = false;\n\t\t\t\telse\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%%\"))\n\t\t\t{\n\t\t\t\tif (!value.startsWith(\"%\"))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!value.startsWith(format.substring(0, 1)))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(1);\n\t\t\t}\n\t\t}\n\t\t// Are both `value` and `format` `null`?\n\t\t// I.e. both `value` and `format` must be exhausted, otherwise ...\n\t\tif (format)\n\t\t\t// ... `format` has remaining content that the value didn't provide\n\t\t\treturn null;\n\n\t\t// Check existance of values and their range\n\t\tif (year === null)\n\t\t\treturn null;\n\t\tif (month === null || month < 1 || month > 12)\n\t\t\treturn null;\n\t\tif (day === null || day < 1 || day > 31) // FIXME: Use the actuall number of days\n\t\t\treturn null;\n\t\tif (ispm === null)\n\t\t{\n\t\t\tif (hour < 0 || hour > 23)\n\t\t\t\treturn null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (hour < 0 || hour > 11)\n\t\t\t\treturn null;\n\t\t\tif (ispm)\n\t\t\t\thour += 12;\n\t\t}\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (second < 0 || second > 60)\n\t\t\treturn null;\n\t\treturn new Date(year, month-1, day, hour, minute, second);\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (change.value instanceof Date)\n\t\t{\n\t\t\tchange.value = this._convert(change.value);\n\t\t}\n\t\telse if (change.value instanceof ul4.Date_)\n\t\t{\n\t\t\tchange.value = this._convert(change.value._date);\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = null;\n\t\t\tfor (let format of this.control.formatstrings_parse())\n\t\t\t{\n\t\t\t\tvalue = this._parse(change.value, format);\n\t\t\t\tif (value !== null)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = this._convert(value);\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_date_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (!value)\n\t\t\treturn null;\n\n\t\tfor (let format of this.control.formatstrings_parse())\n\t\t{\n\t\t\tlet date = this._parse(value, format);\n\t\t\tif (date !== null)\n\t\t\t\treturn this._convert(date);\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.control.formatstring(), this.globals.lang);\n\t\tsuper._set_dom_value(value);\n\t}\n};\n\n\nclass DateFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateField;\n\t}\n};\n\nlet datefieldtype = new DateFieldType(\"la\", \"DateField\", \"Holds the value of a date/date field of a record (and related information)\");\n\n\nexport class DateField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\treturn new ul4.Date_(date.getFullYear(), date.getMonth()+1, date.getDate());\n\t}\n};\n\n\nclass DatetimeMinuteFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteField;\n\t}\n};\n\nlet datetimeminutefieldtype = new DatetimeMinuteFieldType(\"la\", \"DatetimeMinuteField\", \"Holds the value of a date/datetimeminute field of a record (and related information)\");\n\n\nexport class DatetimeMinuteField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of seconds and milliseconds\n\t\tdate.setSeconds(0);\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n\nclass DatetimeSecondFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondField;\n\t}\n};\n\nlet datetimesecondfieldtype = new DatetimeSecondFieldType(\"la\", \"DatetimeSecondField\", \"Holds the value of a date/datetimesecond field of a record (and related information)\");\n\n\nexport class DatetimeSecondField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondfieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of milliseconds, this modifies the object passed in.\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n/*\n`ChoiceFieldBase` is used as the base class for all `lookup`, `multiplelookup`,\n`applookup` and `multipleapplookup` fields\n*/\nexport class ChoiceFieldBase extends Field\n{\n\t_make_option(selected, value, label)\n\t{\n\t\tlet option = el(\n\t\t\t\"option\",\n\t\t\tlabel,\n\t\t\t{\n\t\t\t\t\"value\": value,\n\t\t\t\t\"class\": value === this.control.nonekey ? \"la-none-option\" : null,\n\t\t\t\t\"selected\": selected ? \"selected\" : null,\n\t\t\t}\n\t\t);\n\t\treturn option;\n\t}\n\n\t_set_dom_lookupdata_select(lookupdata)\n\t{\n\t\tif (lookupdata === null)\n\t\t\tlookupdata = this.control.lookup_data;\n\t\tif (ul4._isobject(lookupdata))\n\t\t\tlookupdata = new Map(Object.entries(lookupdata));\n\n\t\tlet none_selected = false;\n\t\tlet selected = new Set();\n\t\tfor (let dom_option of this._dom_control.querySelectorAll(\"option:checked\"))\n\t\t{\n\t\t\tlet value = dom_option.getAttribute(\"value\");\n\t\t\tif (lookupdata.has(value))\n\t\t\t\tselected.add(value);\n\t\t\telse if (value === this.control.nonekey)\n\t\t\t\tnone_selected = true;\n\t\t}\n\n\t\tlet new_children = [];\n\t\tif (this.control.nonekey !== null)\n\t\t{\n\t\t\tnew_children.push(\n\t\t\t\tthis._make_option(\n\t\t\t\t\tnone_selected,\n\t\t\t\t\tthis.control.nonekey,\n\t\t\t\t\tthis.control.nonelabel !== null ? this.control.nonelabel : this.globals.msg_nothing_selected()\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tfor (let [key, value] of lookupdata)\n\t\t{\n\t\t\tnew_children.push(\n\t\t\t\tthis._make_option(\n\t\t\t\t\tselected.has(key),\n\t\t\t\t\tkey,\n\t\t\t\t\tthis._make_label(value)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tthis._dom_control.replaceChildren(...new_children);\n\t}\n\n\t_set_dom_lookupdata_input(lookupdata)\n\t{\n\t\tif (lookupdata === null)\n\t\t\tlookupdata = this.control.lookup_data;\n\t\telse if (ul4._isobject(lookupdata))\n\t\t\tlookupdata = new Map(Object.entries(lookupdata));\n\n\t\tlet none_selected = false;\n\t\tlet selected = new Set();\n\t\tfor (let dom_input of this._dom_controls)\n\t\t{\n\t\t\tlet value = dom_input.getAttribute(\"value\");\n\t\t\tif (dom_input.checked)\n\t\t\t{\n\t\t\t\tif (lookupdata.has(value))\n\t\t\t\t\tselected.add(value);\n\t\t\t\telse if (value === this.control.nonekey)\n\t\t\t\t\tnone_selected = true;\n\n\t\t\t}\n\t\t}\n\n\t\tlet dom_none_input = this._dom_root.querySelector(\"input[value=\" + this.control.nonekey + \"]\");\n\t\tif (dom_none_input !== null)\n\t\t\tdom_none_input.checked = none_selected;\n\n\t\tfor (let [key, item] of this.control.lookupdata)\n\t\t{\n\t\t\tlet dom_input = this._dom_root.querySelector(\"input[value=\" + key + \"]\");\n\t\t\tlet dom_label = this._dom_root.querySelector(\"label[for=\" + dom_input.id + \"]\")\n\n\t\t\tif (lookupdata.has(key))\n\t\t\t{\n\t\t\t\tdom_input.style.display = \"inline\";\n\t\t\t\tdom_label.style.display = \"inline\";\n\t\t\t\tdom_label.innerText = this._make_label(lookupdata.get(key));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdom_input.style.display = \"none\";\n\t\t\t\tdom_label.style.display = \"none\";\n\t\t\t\tdom_label.checked = false;\n\t\t\t}\n\t\t}\n\t}\n};\n\n\nclass LookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupFieldBase;\n\t}\n};\n\nlet lookupfieldbasetype = new LookupFieldBaseType(\"la\", \"LookupFieldBase\", \"Base type of LookupField and MultipleLookupField\");\n\n\nexport class LookupFieldBase extends ChoiceFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdata !== null)\n\t\t\treturn this._lookupdata;\n\t\telse\n\t\t\treturn this.control.lookupdata;\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_lookupdata(value);\n\t\tthis._lookupdata = value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t}\n\n\t_make_label(value)\n\t{\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\telse if (value instanceof LookupItem)\n\t\t\treturn value.label;\n\t\telse\n\t\t\treturn ul4._str(value);\n\t}\n\n\t_find_lookupitem(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\t// If `lookupdata` is `null`, this probably an interface,\n\t\t\t// so we can't validate anything (note that interfaces will however go\n\t\t\t// away in the future)\n\t\t\tif (this.lookupdata === null)\n\t\t\t\treturn;\n\t\t\tlet lookupitem = this.control.lookupdata.get(v);\n\t\t\tif (lookupitem === undefined)\n\t\t\t{\n\t\t\t\t// If the lookup control is auto expandable,\n\t\t\t\t// the user may have given us a label\n\t\t\t\tif (this.control.autoexpandable)\n\t\t\t\t{\n\t\t\t\t\t// Search for the LookupItem with that label\n\t\t\t\t\tfor (let search_lookupitem of this.lookupdata.values())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (v === search_lookupitem.label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchange.value = search_lookupitem;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If we couldn't find the label, keep the label as it is.\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchange.errors.push(this.msg_lookup_unknownkey(v))\n\t\t\t\t\tchange.value = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = lookupitem;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof LookupItem)\n\t\t{\n\t\t\tlet value = this.control.lookupdata.get(v.key);\n\t\t\tif (value !== v)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_lookup_wrongitem(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass LookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupField;\n\t}\n};\n\nlet lookupfieldtype = new LookupFieldType(\"la\", \"LookupField\", \"Holds the value of a lookup field of a record (and related information)\");\n\n\nexport class LookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldtype;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\treturn value.label;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (v === null || v === \"\" || this.control.nonekey === v)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t}\n\t}\n};\n\n\nclass LookupRadioFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioField;\n\t}\n};\n\nlet lookupradiofieldtype = new LookupRadioFieldType(\"la\", \"LookupRadioField\", \"Holds the value of a lookup/radio field of a record (and related information)\");\n\n\nexport class LookupRadioField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiofieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\treturn this.control.lookupdata.get(key);\n\t\t\t}\n\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value instanceof LookupItem)\n\t\t\tvalue = value.key;\n\t\tif (value === null)\n\t\t\tvalue = this.control.nonekey;\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = node.getAttribute(\"value\") === value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_input(lookupdata);\n\t}\n};\n\n\nclass LookupSelectFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectField;\n\t}\n};\n\nlet lookupselectfieldtype = new LookupSelectFieldType(\"la\", \"LookupSelectField\", \"Holds the value of a lookup/select field of a record (and related information)\");\n\n\nexport class LookupSelectField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (value === this.control.nonekey)\n\t\t\t\tvalue = null;\n\t\t\telse\n\t\t\t\tvalue = this.control.lookupdata.get(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.key : this.control.nonekey);\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass LookupChoiceFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceField;\n\t}\n};\n\nlet lookupchoicefieldtype = new LookupChoiceFieldType(\"la\", \"LookupChoiceField\", \"Holds the value of a lookup/choice field of a record (and related information)\");\n\n\nexport class LookupChoiceField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicefieldtype;\n\t}\n};\n\n\nclass MultipleLookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupField;\n\t}\n};\n\nlet multiplelookupfieldtype = new MultipleLookupFieldType(\"la\", \"MultipleLookupField\", \"Holds the value of a multiple lookup field of a record (and related information)\");\n\n\nexport class MultipleLookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupfieldtype;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value.length === 0;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null || value.length === 0)\n\t\t\treturn null;\n\t\tlet result = [];\n\t\tfor (let item of value)\n\t\t\tresult.push(item.label);\n\t\treturn result.join(\", \");\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.nonekey === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_lookupitem(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleLookupCheckboxFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxField;\n\t}\n};\n\nlet multiplelookupcheckboxfieldtype = new MultipleLookupCheckboxFieldType(\"la\", \"MultipleLookupCheckboxField\", \"Holds the value of a multiplelookup/radio field of a record (and related information)\");\n\n\nexport class MultipleLookupCheckboxField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxfieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\tvalue.push(this.control.lookupdata.get(key));\n\t\t\t}\n\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = values.has(node.getAttribute(\"value\"));\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_input(lookupdata);\n\t}\n};\n\n\nclass MultipleLookupSelectFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectField;\n\t}\n};\n\nlet multiplelookupselectfieldtype = new MultipleLookupSelectFieldType(\"la\", \"MultipleLookupSelectField\", \"Holds the value of a multiplelookup/select field of a record (and related information)\");\n\nexport class MultipleLookupSelectField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t{\n\t\t\tif (option.selected)\n\t\t\t\tvalue.push(this.control.lookupdata.get(option.getAttribute(\"value\")));\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t\toption.selected = values.has(option.getAttribute(\"value\"));\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass MultipleLookupChoiceFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceField;\n\t}\n};\n\nlet multiplelookupchoicefieldtype = new MultipleLookupChoiceFieldType(\"la\", \"MultipleLookupChoiceField\", \"Holds the value of a multiplelookup/choice field of a record (and related information)\");\n\n\nexport class MultipleLookupChoiceField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicefieldtype;\n\t}\n};\n\n\nclass AppLookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupFieldBase;\n\t}\n};\n\nlet applookupfieldbasetype = new AppLookupFieldBaseType(\"la\", \"AppLookupFieldBase\", \"Base type of AppLookupField and MultipleAppLookupField\");\n\n\nexport class AppLookupFieldBase extends ChoiceFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdata !== null)\n\t\t\treturn this._lookupdata;\n\t\telse\n\t\t{\n\t\t\tif (this.control.lookup_app.records !== null)\n\t\t\t\treturn this.control.lookup_app.records;\n\t\t}\n\t\treturn new Map();\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_lookupdata(value);\n\t\tthis._lookupdata = value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t}\n\n\t_make_label(value)\n\t{\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\telse if (value instanceof Record)\n\t\t\treturn value.display_text(this.control.lookup_controls);\n\t\telse\n\t\t\treturn ul4._str(value);\n\t}\n\n\t_find_record(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\tlet record = this.control.lookup_app.records !== null ?\n\t\t\t\tthis.control.lookup_app.records.get(v) :\n\t\t\t\tundefined\n\t\t\t;\n\n\t\t\tif (record === undefined)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_unknownkey(v))\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = record;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof Record)\n\t\t{\n\t\t\tif (v.app !== this.control.lookup_app)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_wrongrecord(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t[ul4.symbols.setattr](key, value)\n\t{\n\t\tif (key === \"lookupdata\")\n\t\t\tthis.lookupdata = value;\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](key, value);\n\t}\n};\nAppLookupFieldBase.prototype._ul4attrs = new Set([...Field.prototype._ul4attrs, \"lookupdata\"]);\n\n\n\nclass AppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupField;\n\t}\n};\n\nlet applookupfieldtype = new AppLookupFieldType(\"la\", \"AppLookupField\", \"Holds the value of a applookup field of a record (and related information)\");\n\n\nexport class AppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldtype;\n\t}\n\n\tdisplay_value(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\treturn \"(\" + this.value.display_text(maxlevel) + \")\";\n\t}\n\n\t_validate(change)\n\t{\n\t\tthis._find_record(change);\n\t}\n};\n\n\nclass AppLookupSelectFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectField;\n\t}\n};\n\nlet applookupselectfieldtype = new AppLookupSelectFieldType(\"la\", \"AppLookupSelectField\", \"Holds the value of a `applookup`/`select` field of a record (and related information)\");\n\n\nexport class AppLookupSelectField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\n\t\tif (this.control.lookup_app.records !== null)\n\t\t{\n\t\t\tvalue = this.control.lookup_app.records.get(value);\n\t\t\tif (value === undefined)\n\t\t\t\tvalue = null;\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.id : this.control.nonekey);\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass AppLookupRadioFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioField;\n\t}\n};\n\nlet applookupradiofieldtype = new AppLookupRadioFieldType(\"la\", \"AppLookupRadioField\", \"Holds the value of a `applookup`/`radio` field of a record (and related information)\");\n\n\nexport class AppLookupRadioField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiofieldtype;\n\t}\n};\n\n\nclass AppLookupChoiceFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceField;\n\t}\n};\n\nlet applookupchoicefieldtype = new AppLookupChoiceFieldType(\"la\", \"AppLookupChoiceField\", \"Holds the value of a `applookup`/`choice` field of a record (and related information)\");\n\n\nexport class AppLookupChoiceField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicefieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupField;\n\t}\n};\n\nlet multipleapplookupfieldtype = new MultipleAppLookupFieldType(\"la\", \"MultipleAppLookupField\", \"Holds the value of a multiple applookup field of a record (and related information)\");\n\n\nexport class MultipleAppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupfieldtype;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value.length === 0;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.nonekey === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_record(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_record(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleAppLookupCheckboxFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxField;\n\t}\n};\n\nlet multipleapplookupcheckboxfieldtype = new MultipleAppLookupCheckboxFieldType(\"la\", \"MultipleAppLookupCheckboxField\", \"Holds the value of a `multipleapplookup`/`checkbox` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupCheckboxField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxfieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupSelectFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectField;\n\t}\n};\n\nlet multipleapplookupselectfieldtype = new MultipleAppLookupSelectFieldType(\"la\", \"MultipleAppLookupSelectField\", \"Holds the value of a `multipleapplookup`/`select` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupSelectField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectfieldtype;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass MultipleAppLookupChoiceFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceField;\n\t}\n};\n\nlet multipleapplookupchoicefieldtype = new MultipleAppLookupChoiceFieldType(\"la\", \"MultipleAppLookupChoiceField\", \"Holds the value of a `multipleapplookup`/`choice` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupChoiceField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicefieldtype;\n\t}\n};\n\n\nclass ControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Control;\n\t}\n};\n\nlet controltype = new ControlType(\"la\", \"Control\", \"Metainformation about a field in a LivingApps application\");\n\n\nexport class Control extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn controltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.app.globals;\n\t}\n\n\tget fulltype()\n\t{\n\t\treturn this.subtype ? this.type + \"/\" + this.subtype : this.type;\n\t}\n\n\tget label()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn this._label;\n\t\tlet label = view_control.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t}\n\n\tget default()\n\t{\n\t\treturn null;\n\t}\n\n\tget top()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.top : null;\n\t}\n\n\tget left()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.left : null;\n\t}\n\n\tget width()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.width : null;\n\t}\n\n\tget height()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.height : null;\n\t}\n\n\tget liveupdate()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.liveupdate : false;\n\t}\n\n\tget tabindex()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.tabindex : null;\n\t}\n\n\tget required()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.required : false;\n\t}\n\n\tget mode()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (this.app._active_view !== null && view_control === null)\n\t\t\treturn null;\n\t\tif (this.app.globals.mode === null)\n\t\t\treturn \"display\";\n\t\treturn view_control !== null ? view_control.mode : \"edit\";\n\t}\n\n\tget labelpos()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelpos : \"left\";\n\t}\n\n\tget labelwidth()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelwidth : null;\n\t}\n\n\tget autoalign()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.autoalign : true;\n\t}\n\n\tget in_active_view()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null;\n\t}\n\n\t_view_control()\n\t{\n\t\tif (this.app._active_view === null)\n\t\t\treturn null;\n\t\tlet view_control = this.app._active_view.controls.get(this.identifier);\n\t\treturn view_control ?? null;\n\t}\n\n\t_logsearch(value, search)\n\t{\n\t\t//console.log(\"Searching for \" + ul4._repr(search.value) + \" in \" + ul4._repr(this) + \" with operator \" + search.operator + \" in value \" + ul4._repr(value));\n\t}\n\n\t// base implemntation, always returns ``false`` (i.e. \"not found\")\n\t// ``value`` is the value of the field\n\t// ``search`` is an object with information what we're searching for\n\t// keys in ``search`` are: ``operator`` (and ``value`` (if required by the operator))\n\tsearch(value, search)\n\t{\n\t\treturn false;\n\t}\n};\n\nControl.prototype.type = null;\nControl.prototype.subtype = null;\nControl.prototype._ul4onattrs = [\"identifier\", \"fieldname\", \"app\", \"_label\", \"priority\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\"];\nControl.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"fieldname\", \"app\", \"priority\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\", \"fulltype\", \"label\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"tabindex\", \"required\", \"mode\", \"labelpos\", \"autoalign\", \"in_active_view\"]);\nControl.prototype._cssclass_root = \"llft-control\";\nControl.prototype._cssclass_control = \"input\";\n\n\nclass BoolControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolControl;\n\t}\n};\n\nlet boolcontroltype = new BoolControlType(\"la\", \"BoolControl\", \"A LivingApps boolean field (type 'bool')\");\n\n\nexport class BoolControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolcontroltype;\n\t}\n\n\t// ``search`` must by ``null``, ``false`` or ``true``\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nBoolControl.prototype.type = \"bool\";\nBoolControl.prototype.fieldtype = BoolField;\n\n\nclass IntControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntControl;\n\t}\n};\n\nlet intcontroltype = new IntControlType(\"la\", \"IntControl\", \"A LivingApps integer field (type 'int')\");\n\n\nexport class IntControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intcontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nIntControl.prototype.type = \"int\";\nIntControl.prototype.fieldtype = IntField;\n\n\nclass PlaceholderControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof PlaceholderControld;\n\t}\n};\n\nlet placeholdercontroltype = new PlaceholderControlType(\"la\", \"PlaceholderControl\", \"A LivingApps field that has a placeholder\");\n\n\nclass PlaceholderControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn placeholdercontroltype;\n\t}\n\n\tget placeholder()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.placeholder;\n\t}\n};\n\nPlaceholderControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"placeholder\"]);\n\n\nclass NumberControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberControl;\n\t}\n};\n\nlet numbercontroltype = new NumberControlType(\"la\", \"NumberControl\", \"A LivingApps number field (type 'number')\");\n\n\nexport class NumberControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numbercontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"range\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn false;\n\t\t\treturn (search.minvalue === null || search.minvalue <= value) && (search.maxvalue === null || value < search.maxvalue);\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nNumberControl.prototype.type = \"number\";\nNumberControl.prototype.fieldtype = NumberField;\nNumberControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"precision\", \"minimum\", \"maximum\"];\nNumberControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"precision\", \"minimum\", \"maximum\"]);\n\n\nclass StringControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringControl;\n\t}\n};\n\nlet stringcontroltype = new StringControlType(\"la\", \"StringControl\", \"A LivingApps number field (type 'string')\");\n\n\nexport class StringControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringcontroltype;\n\t}\n\n\t_user_placeholder(user, placeholder)\n\t{\n\t\tif (placeholder === null)\n\t\t\treturn null;\n\t\tswitch (placeholder)\n\t\t{\n\t\t\tcase \"{gender}\":\n\t\t\t\treturn user !== null ? user.gender : null;\n\t\t\tcase \"{title}\":\n\t\t\t\treturn user !== null ? user.title : null;\n\t\t\tcase \"{firstname}\":\n\t\t\t\treturn user !== null ? user.firstname : null;\n\t\t\tcase \"{surname}\":\n\t\t\t\treturn user !== null ? user.surname : null;\n\t\t\tcase \"{account}\":\n\t\t\t\treturn user !== null ? user.email : null;\n\t\t\tcase \"{streetname}\":\n\t\t\t\treturn user !== null ? user.streetname : null;\n\t\t\tcase \"{streetnumber}\":\n\t\t\t\treturn user !== null ? user.streetnumber : null;\n\t\t\tcase \"{street}\":\n\t\t\t\tif (user === null)\n\t\t\t\t\treturn null;\n\t\t\t\telse if (user.street === null)\n\t\t\t\t\treturn user.streetnumber;\n\t\t\t\telse if (user.streetnumber === null)\n\t\t\t\t\treturn user.street;\n\t\t\t\telse\n\t\t\t\t\treturn user.street + \" \" + user.streetnumber;\n\t\t\tcase \"{zip}\":\n\t\t\t\treturn user !== null ? user.zip : null;\n\t\t\tcase \"{phone}\":\n\t\t\t\treturn user !== null ? user.phone : null;\n\t\t\tcase \"{fax}\":\n\t\t\t\treturn user !== null ? user.fax : null;\n\t\t\tcase \"{company}\":\n\t\t\t\treturn user !== null ? user.company : null;\n\t\t\tcase \"{city}\":\n\t\t\t\treturn user !== null ? user.city : null;\n\t\t\tcase \"{summary}\":\n\t\t\t\treturn user !== null ? user.summary : null;\n\t\t\tcase \"{interests}\":\n\t\t\t\treturn user !== null ? user.interests : null;\n\t\t\tcase \"{personal_website}\":\n\t\t\t\treturn user !== null ? user.personal_website : null;\n\t\t\tcase \"{company_website}\":\n\t\t\t\treturn user !== null ? user.company_website : null;\n\t\t\tcase \"{position}\":\n\t\t\t\treturn user !== null ? user.position : null;\n\t\t\tcase \"{department}\":\n\t\t\t\treturn user !== null ? user.department : null;\n\t\t\tcase \"{today}\":\n\t\t\t\treturn ul4.today();\n\t\t\tdefault:\n\t\t\t\treturn placeholder;\n\t\t}\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this._user_placeholder(this.app.globals.user, view_control.default);\n\t}\n\n\tget minlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 0;\n\t\tlet minlength = view_control.minlength;\n\t\tif (minlength === null || minlength < 0)\n\t\t\treturn 0;\n\t\treturn minlength;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 4000;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength === null || maxlength < 0 || maxlength > 4000)\n\t\t\treturn 4000;\n\t\treturn maxlength;\n\t}\n\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (search.value === null || value === null)\n\t\t\t\treturn search.value === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(search.value.toLowerCase()) >= 0;\n\t\t}\n\t}\n};\n\nStringControl.prototype.type = \"string\";\n\n\nclass TextControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextControl;\n\t}\n};\n\nlet textcontroltype = new TextControlType(\"la\", \"TextControl\", \"A LivingApps text field (type 'string/text')\");\n\n\nexport class TextControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textcontroltype;\n\t}\n};\n\nTextControl.prototype.subtype = \"text\";\nTextControl.prototype.fieldtype = StringField;\n\n\nclass EmailControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailControl;\n\t}\n};\n\nlet emailcontroltype = new EmailControlType(\"la\", \"EmailControl\", \"A LivingApps email field (type 'string/email')\");\n\n\nexport class EmailControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailcontroltype;\n\t}\n};\n\nEmailControl.prototype.subtype = \"email\";\nEmailControl.prototype.fieldtype = EmailField;\n\n\nclass URLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLControl;\n\t}\n};\n\nlet urlcontroltype = new URLControlType(\"la\", \"URLControl\", \"A LivingApps URL field (type 'string/url')\");\n\n\nexport class URLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlcontroltype;\n\t}\n};\n\nURLControl.prototype.subtype = \"url\";\nURLControl.prototype.fieldtype = URLField;\n\n\nclass TelControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelControl;\n\t}\n};\n\nlet telcontroltype = new TelControlType(\"la\", \"TelControl\", \"A LivingApps phone number field (type 'string/tel')\");\n\n\nexport class TelControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telcontroltype;\n\t}\n};\n\nTelControl.prototype.subtype = \"tel\";\nTelControl.prototype.fieldtype = TelField;\n\n\nclass TextAreaControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaControl;\n\t}\n};\n\nlet textareacontroltype = new TextAreaControlType(\"la\", \"TextAreaControl\", \"A LivingApps textarea field (type 'string/textarea')\");\n\n\nexport class TextAreaControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareacontroltype;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\t// We only get the encrypted text in encryption mode, so we can't check its length\n\t\tif (this.encrypted !== null)\n\t\t\treturn null;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength < 0)\n\t\t\treturn null;\n\t\treturn maxlength;\n\t}\n};\n\nTextAreaControl.prototype.subtype = \"textarea\";\nTextAreaControl.prototype.fieldtype = TextAreaField;\nTextAreaControl.prototype._ul4onattrs = [...StringControl.prototype._ul4onattrs, \"encrypted\"];\nTextAreaControl.prototype._ul4attrs = new Set([...StringControl.prototype._ul4attrs, \"encrypted\"]);\nTextAreaControl.prototype._cssclass_control = \"textarea\";\n\n\nclass HTMLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLControl;\n\t}\n};\n\nlet htmlcontroltype = new HTMLControlType(\"la\", \"HTMLControl\", \"A LivingApps HTML field (type 'string/html')\");\n\n\nexport class HTMLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlcontroltype;\n\t}\n};\n\nHTMLControl.prototype.subtype = \"html\";\nHTMLControl.prototype.fieldtype = HTMLField;\n\n\nclass DateControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateControl;\n\t}\n};\n\nlet datecontroltype = new DateControlType(\"la\", \"DateControl\", \"A LivingApps date field (type 'date/date')\");\n\n\nexport class DateControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn view_control.default === \"{today}\" ? ul4.today() : null;\n\t}\n\n\tformatstring(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\t\treturn this._formatstrings[lang];\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeMinuteControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeMinuteControl.prototype._formatstrings[\"intl\"],\n\t\t\tDatetimeSecondControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeSecondControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n\n\t// searchvalue must be ``null``, a ``Date`` object or a string\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\n\t\tlet searchvalue = search.value;\n\t\tif (Object.prototype.toString.call(searchvalue) == \"[object Date]\")\n\t\t\tsearchvalue = ul4._format(searchvalue, this.formatstring(), this.app.language);\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.formatstring(), this.app.language);\n\n\t\tif (search.operator === \"equals\")\n\t\t\treturn searchvalue === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (searchvalue === null || value === null)\n\t\t\t\treturn searchvalue === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(searchvalue.toLowerCase()) >= 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nDateControl.prototype.type = \"date\";\nDateControl.prototype.subtype = \"date\";\nDateControl.prototype.fieldtype = DateField;\nDateControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y\",\n\t\"fr\": \"%d.%m.%Y\",\n\t\"it\": \"%d.%m.%Y\",\n\t\"en\": \"%m/%d/%Y\",\n\t\"intl\": [\"%Y-%m-%d\"]\n};\n\n\nclass DatetimeMinuteControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteControl;\n\t}\n};\n\nlet datetimeminutecontroltype = new DatetimeMinuteControlType(\"la\", \"DatetimeMinuteControl\", \"A LivingApps date field (type 'date/datetimeminute')\");\n\n\nexport class DatetimeMinuteControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setSeconds(0);\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeSecondControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeSecondControl.prototype._formatstrings[\"intl\"],\n\t\t\tDateControl.prototype._formatstrings[lang],\n\t\t\t...DateControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n};\n\nDatetimeMinuteControl.prototype.subtype = \"datetimeminute\";\nDatetimeMinuteControl.prototype.fieldtype = DatetimeMinuteField;\nDatetimeMinuteControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M\",\n\t\"fr\": \"%d.%m.%Y %H:%M\",\n\t\"it\": \"%d.%m.%Y %H:%M\",\n\t\"en\": \"%m/%d/%Y %H:%M\",\n\t\"intl\": [\"%Y-%m-%dT%H:%M\", \"%Y-%m-%d %H:%M\"]\n};\n\n\nclass DatetimeSecondControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondControl;\n\t}\n};\n\nlet datetimesecondcontroltype = new DatetimeSecondControlType(\"la\", \"DatetimeSecondControl\", \"A LivingApps date field (type 'date/datetimesecond')\");\n\n\nexport class DatetimeSecondControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeMinuteControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeMinuteControl.prototype._formatstrings[\"intl\"],\n\t\t\tDateControl.prototype._formatstrings[lang],\n\t\t\t...DateControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n};\n\nDatetimeSecondControl.prototype.subtype = \"datetimesecond\";\nDatetimeSecondControl.prototype.fieldtype = DatetimeSecondField;\nDatetimeSecondControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M:%S\",\n\t\"fr\": \"%d.%m.%Y %H:%M:%S\",\n\t\"it\": \"%d.%m.%Y %H:%M:%S\",\n\t\"en\": \"%m/%d/%Y %H:%M:%S\",\n\t\"intl\": [\"%Y-%m-%dT%H:%M:%S\", \"%Y-%m-%d %H:%M:%S\"]\n};\n\n\nclass LookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupControl;\n\t}\n};\n\nlet lookupcontroltype = new LookupControlType(\"la\", \"LookupControl\", \"A LivingApps date field (type 'lookup')\");\n\n\nexport class LookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this.lookupdata.get(view_control) ?? null;\n\t}\n\n\tget autoexpandable()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn false;\n\t\treturn view_control.autoexpandable;\n\t}\n\n\tget nonekey()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget nonelabel()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn search.value === null;\n\t\t\telse\n\t\t\t\treturn value.key === search.value;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nLookupControl.prototype.type = \"lookup\";\nLookupControl.prototype.fieldtype = LookupField;\nLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookupdata\"];\nLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookupdata\"]);\n\n\nclass LookupSelectControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectControl;\n\t}\n};\n\nlet lookupselectcontroltype = new LookupSelectControlType(\"la\", \"LookupSelectControl\", \"A LivingApps lookup field (type 'lookup/select')\");\n\n\nexport class LookupSelectControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectcontroltype;\n\t}\n};\n\nLookupSelectControl.prototype.subtype = \"select\";\nLookupSelectControl.prototype.fieldtype = LookupSelectField;\nLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass LookupRadioControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioControl;\n\t}\n};\n\nlet lookupradiocontroltype = new LookupRadioControlType(\"la\", \"LookupRadioControl\", \"A LivingApps lookup field (type 'lookup/radio')\");\n\n\nexport class LookupRadioControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiocontroltype;\n\t}\n};\n\nLookupRadioControl.prototype.subtype = \"radio\";\nLookupRadioControl.prototype.fieldtype = LookupRadioField;\nLookupRadioControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass LookupChoiceControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceControl;\n\t}\n};\n\nlet lookupchoicecontroltype = new LookupChoiceControlType(\"la\", \"LookupChoiceControl\", \"A LivingApps lookup field (type 'lookup/choice')\");\n\n\nexport class LookupChoiceControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicecontroltype;\n\t}\n};\n\nLookupChoiceControl.prototype.subtype = \"choice\";\nLookupChoiceControl.prototype.fieldtype = LookupChoiceField;\n\n\nclass AppLookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupControl;\n\t}\n};\n\nlet applookupcontroltype = new AppLookupControlType(\"la\", \"AppLookupControl\", \"A LivingApps lookup field (type 'applookup')\");\n\n\nexport class AppLookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupcontroltype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this.lookup_app !== null && this.lookup_app.records !== null)\n\t\t\treturn this.lookup_app.records;\n\t\telse\n\t\t\treturn new Map();\n\t}\n\n\tget nonekey()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget nonelabel()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (value === null || search.value === null)\n\t\t\treturn value === search.value;\n\t\telse\n\t\t\treturn value.search(search);\n\t}\n};\n\nAppLookupControl.prototype.type = \"applookup\";\nAppLookupControl.prototype.fieldtype = AppLookupField;\nAppLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"];\nAppLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"]);\n\n\nclass AppLookupSelectControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectControl;\n\t}\n};\n\nlet applookupselectcontroltype = new AppLookupSelectControlType(\"la\", \"AppLookupSelectControl\", \"A LivingApps applookup field (type 'applookup/select')\");\n\n\nexport class AppLookupSelectControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectcontroltype;\n\t}\n};\n\nAppLookupSelectControl.prototype.subtype = \"select\";\nAppLookupSelectControl.prototype.fieldtype = AppLookupSelectField;\nAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass AppLookupRadioControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioControl;\n\t}\n};\n\nlet applookupradiocontroltype = new AppLookupRadioControlType(\"la\", \"AppLookupRadioControl\", \"A LivingApps applookup field (type 'applookup/radio')\");\n\n\nexport class AppLookupRadioControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiocontroltype;\n\t}\n};\n\nAppLookupRadioControl.prototype.subtype = \"radio\";\nAppLookupRadioControl.prototype.fieldtype = AppLookupRadioField;\n\n\nclass AppLookupChoiceControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceControl;\n\t}\n};\n\nlet applookupchoicecontroltype = new AppLookupChoiceControlType(\"la\", \"AppLookupChoiceControl\", \"A LivingApps applookup field (type 'applookup/choice')\");\n\n\nexport class AppLookupChoiceControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicecontroltype;\n\t}\n};\n\nAppLookupChoiceControl.prototype.subtype = \"choice\";\nAppLookupChoiceControl.prototype.fieldtype = AppLookupChoiceField;\n\n\nclass MultipleLookupControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupControl;\n\t}\n};\n\nlet multiplelookupcontroltype = new MultipleLookupControlType(\"la\", \"MultipleLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleLookupControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tlet defaultValue = this.lookupdata.get(view_control)\n\n\t\treturn (defaultValue !== undefined) ? [defaultValue] : [];\n\t}\n\n\t// search.value must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tfor (let item of value)\n\t\t\t{\n\t\t\t\tif (item.key === search.value)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleLookupControl.prototype.type = \"multiplelookup\";\nMultipleLookupControl.prototype.fieldtype = MultipleLookupField;\n\n\nclass MultipleLookupCheckboxControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxControl;\n\t}\n};\n\nlet multiplelookupcheckboxcontroltype = new MultipleLookupCheckboxControlType(\"la\", \"MultipleLookupCheckboxControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/checkbox')\");\n\n\nexport class MultipleLookupCheckboxControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxcontroltype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n};\n\nMultipleLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleLookupCheckboxControl.prototype.fieldtype = MultipleLookupCheckboxField;\nMultipleLookupCheckboxControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass MultipleLookupSelectControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectControl;\n\t}\n};\n\nlet multiplelookupselectcontroltype = new MultipleLookupSelectControlType(\"la\", \"MultipleLookupSelectControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/select')\");\n\n\nexport class MultipleLookupSelectControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectcontroltype;\n\t}\n};\n\nMultipleLookupSelectControl.prototype.subtype = \"select\";\nMultipleLookupSelectControl.prototype.fieldtype = MultipleLookupSelectField;\nMultipleLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleLookupChoiceControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceControl;\n\t}\n};\n\nlet multiplelookupchoicecontroltype = new MultipleLookupChoiceControlType(\"la\", \"MultipleLookupChoiceControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/choice')\");\n\n\nexport class MultipleLookupChoiceControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicecontroltype;\n\t}\n};\n\nMultipleLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleLookupChoiceControl.prototype.fieldtype = MultipleLookupChoiceField;\n\n\nclass MultipleAppLookupControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupControl;\n\t}\n};\n\nlet multipleapplookupcontroltype = new MultipleAppLookupControlType(\"la\", \"MultipleAppLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleAppLookupControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcontroltype;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (search.value === null)\n\t\t\t\treturn value.length === 0;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (let item of value)\n\t\t\t\t{\n\t\t\t\t\tif (item.search(search.value))\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleAppLookupControl.prototype.type = \"multipleapplookup\";\nMultipleAppLookupControl.prototype.fieldtype = MultipleAppLookupField;\n\n\nclass MultipleAppLookupSelectControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectControl;\n\t}\n};\n\nlet multipleapplookupselectcontroltype = new MultipleAppLookupSelectControlType(\"la\", \"MultipleAppLookupSelectControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/select')\");\n\n\nexport class MultipleAppLookupSelectControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectcontroltype;\n\t}\n};\n\nMultipleAppLookupSelectControl.prototype.subtype = \"select\";\nMultipleAppLookupSelectControl.prototype.fieldtype = MultipleAppLookupSelectField;\nMultipleAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleAppLookupCheckboxControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxControl;\n\t}\n};\n\nlet multipleapplookupcheckboxcontroltype = new MultipleAppLookupCheckboxControlType(\"la\", \"MultipleAppLookupCheckboxControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/checkbox')\");\n\n\nexport class MultipleAppLookupCheckboxControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxcontroltype;\n\t}\n};\n\nMultipleAppLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleAppLookupCheckboxControl.prototype.fieldtype = MultipleAppLookupCheckboxField;\n\n\nclass MultipleAppLookupChoiceControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceControl;\n\t}\n};\n\nlet multipleapplookupchoicecontroltype = new MultipleAppLookupChoiceControlType(\"la\", \"MultipleAppLookupChoiceControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/choice')\");\n\n\nexport class MultipleAppLookupChoiceControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicecontroltype;\n\t}\n};\n\nMultipleAppLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleAppLookupChoiceControl.prototype.fieldtype = MultipleAppLookupChoiceField;\n\n\nclass GeoControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoControl;\n\t}\n};\n\nlet geocontroltype = new GeoControlType(\"la\", \"GeoControl\", \"A LivingApps geo field (type 'geo')\");\n\n\nexport class GeoControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geocontroltype;\n\t}\n};\n\nGeoControl.prototype.type = \"geo\";\nGeoControl.prototype.fieldtype = GeoField;\nGeoControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileControl;\n\t}\n};\n\nlet filecontroltype = new FileControlType(\"la\", \"FileControl\", \"A LivingApps upload field (type 'file')\");\n\n\nexport class FileControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filecontroltype;\n\t}\n};\n\nFileControl.prototype.type = \"file\";\nFileControl.prototype.fieldtype = FileField;\nFileControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileSignatureControlType extends FileControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureControl;\n\t}\n};\n\nlet filesignaturecontroltype = new FileSignatureControlType(\"la\", \"FileSignatureControl\", \"A LivingApps signature image field (type 'file/signature')\");\n\n\nexport class FileSignatureControl extends FileControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturecontroltype;\n\t}\n};\n\nFileSignatureControl.prototype.subtype = \"signature\";\nFileSignatureControl.prototype.fieldtype = FileSignatureField;\n\n\nclass ButtonControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonControl;\n\t}\n};\n\nlet buttoncontroltype = new ButtonControlType(\"la\", \"ButtonControl\", \"A submit button\");\n\n\nexport class ButtonControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttoncontroltype;\n\t}\n};\n\nButtonControl.prototype.type = \"button\";\n\n\nclass LookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupItem;\n\t}\n};\n\nlet lookupitemtype = new LookupItemType(\"la\", \"LookupItem\", \"An option in a lookup control/field\");\n\n\nexport class LookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupitemtype;\n\t}\n\n\tget label()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn this._label;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn this._label;\n\t\tlet label = view_lookupitem.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tget visible()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn true;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn true;\n\t\treturn view_lookupitem.visible;\n\t}\n\n\t_view_lookupitem()\n\t{\n\t\tlet identifier = this.control.identifier;\n\t\tlet active_view = this.control.app.active_view;\n\t\tif (active_view !== null && active_view.controls !== null)\n\t\t{\n\t\t\tlet view_control = active_view.controls.get(identifier);\n\t\t\tif (view_control !== undefined && view_control.lookupdata !== undefined && view_control.lookupdata !== null)\n\t\t\t{\n\t\t\t\tlet view_lookupitem = view_control.lookupdata.get(this.key);\n\t\t\t\tif (view_lookupitem !== undefined)\n\t\t\t\t\treturn view_lookupitem;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<LookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \"visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nLookupItem.prototype._ul4onattrs = [\"control\", \"key\", \"_label\"];\nLookupItem.prototype._ul4attrs = new Set([\"id\", \"control\", \"key\", \"label\"]);\n\n\nclass ViewLookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewLookupItem;\n\t}\n};\n\nlet viewlookupitemtype = new ViewLookupItemType(\"la\", \"ViewLookupItem\", \"View specific information about a lookup item\");\n\n\nexport class ViewLookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewlookupitemtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<ViewLookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \" visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nViewLookupItem.prototype._ul4onattrs = [\"key\", \"label\", \"visible\"];\nViewLookupItem.prototype._ul4attrs = new Set([\"key\", \"label\", \"visible\"]);\n\n\nclass LayoutControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LayoutControl;\n\t}\n};\n\nlet layoutcontroltype = new LayoutControlType(\"la\", \"LayoutControl\", \"A decoration in an input form\");\n\n\nexport class LayoutControl extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn layoutcontroltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.view.app.globals;\n\t}\n\n\tget _sel_root()\n\t{\n\t\treturn \"#livingapps-form .llft-element.llft-id-\" + this.identifier;\n\t}\n\n\tget _dom_root()\n\t{\n\t\treturn document.querySelector(this._sel_root);\n\t}\n};\n\nLayoutControl.prototype._ul4onattrs = [\"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\"];\nLayoutControl.prototype._ul4attrs = new Set([\"id\", \"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\"]);\n\n\nclass HTMLLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLLayoutControl;\n\t}\n};\n\nlet htmllayoutcontroltype = new HTMLLayoutControlType(\"la\", \"HTMLLayoutControl\", \"HTML decoration in an input form\");\n\n\nexport class HTMLLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmllayoutcontroltype;\n\t}\n\n\tget value()\n\t{\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tthis._value = value;\n\t\tif (this.globals._in_form())\n\t\t\tthis._set_dom_value(this._value);\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_root.innerHTML = value;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = value;\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n};\n\nHTMLLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"_value\"];\nHTMLLayoutControl.prototype._ul4attrs = new Set([...LayoutControl.prototype._ul4attrs, \"value\"]);\n\n\nclass ImageLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ImageLayoutControl;\n\t}\n};\n\nlet imagelayoutcontroltype = new ImageLayoutControlType(\"la\", \"ImageLayoutControl\", \"An image decoration in an input form\");\n\n\nexport class ImageLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn imagelayoutcontroltype;\n\t}\n};\n\nImageLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"original\", \"scaled\"];\nImageLayoutControl.prototype._ul4attrs = new Set([...LayoutControl.prototype._ul4attrs, \"original\", \"scaled\"]);\n\n\nclass ButtonLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonLayoutControl;\n\t}\n};\n\nlet buttonlayoutcontroltype = new ButtonLayoutControlType(\"la\", \"ButtonLayoutControl\", \"A submit button in an input form\");\n\n\nexport class ButtonLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttonlayoutcontroltype;\n\t}\n};\n\n\nclass ViewControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewControl;\n\t}\n};\n\nlet viewcontroltype = new ViewControlType(\"la\", \"ViewControl\", \"Contains view specific information about a control\");\n\n\nexport class ViewControl extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewcontroltype;\n\t}\n\n\tget mode()\n\t{\n\t\treturn this._mode ? \"display\" : \"edit\";\n\t}\n};\n\nViewControl.prototype._ul4onattrs = [\"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"_mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"];\nViewControl.prototype._ul4attrs = new Set([\"id\", \"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"]);\n\n\nclass UserType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof User;\n\t}\n};\n\nlet usertype = new UserType(\"la\", \"User\", \"A LivingApps user/account\");\n\n\nexport class User extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn usertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<User id=\" + ul4._repr(this.id) + \" firstname=\" + ul4._repr(this.firstname) + \" surname=\" + ul4._repr(this.surname) + \" email=\" + ul4._repr(this.email) + \">\";\n\t}\n};\n\nUser.prototype._ul4onattrs = [\"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"avatarsmall\", \"avatarlarge\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\"];\nUser.prototype._ul4attrs = new Set([\"id\", \"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"avatarsmall\", \"avatarlarge\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\"]);\n\n\nclass FileType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof File;\n\t}\n};\n\nlet filetype = new FileType(\"la\", \"File\", \"An uploaded file\");\n\n\nexport class File extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<File id=\" + ul4._repr(this.id) + \" url=\" + ul4._repr(this.url) + \" filename=\" + ul4._repr(this.filename) + \">\";\n\t}\n\n\tget url()\n\t{\n\t\treturn \"/gateway/files/\" + this.id;\n\t}\n\n\tget archive_url()\n\t{\n\t\tif (this.archive === null)\n\t\t\treturn this.url;\n\t\treturn this.archive.url + \"/\" + this.filename;\n\t}\n};\n\nFile.prototype._ul4onattrs = [\"filename\", \"mimetype\", \"width\", \"height\", \"internalid\", \"createdat\", \"size\", \"duration\", \"geo\", \"storagefilename\", \"archive\"];\nFile.prototype._ul4attrs = new Set([\"id\", \"url\", \"archive_url\", \"filename\", \"mimetype\", \"width\", \"height\", \"size\", \"duration\", \"geo\", \"archive\", \"createdat\"]);\n\n\nclass GeoType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Geo;\n\t}\n};\n\nlet geotype = new GeoType(\"la\", \"Geo\", \"Geographical coordinates and location information\");\n\n\nexport class Geo extends Base\n{\n\tconstructor(lat, long, info)\n\t{\n\t\tsuper(null);\n\t\tthis.lat = lat;\n\t\tthis.long = long;\n\t\tthis.info = info;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geotype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Geo lat=\" + ul4._repr(this.lat) + \" long=\" + ul4._repr(this.long) + \" info=\" + ul4._repr(this.info) + \">\";\n\t}\n};\n\nGeo.prototype._ul4onattrs = [\"lat\", \"long\", \"info\"];\nGeo.prototype._ul4attrs = new Set([\"lat\", \"long\", \"info\"]);\n\n\nclass AttachmentType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Attachment;\n\t}\n};\n\nlet attachmenttype = new AttachmentType(\"la\", \"Attachment\", \"An attachment of a record\");\n\n\nexport class Attachment extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn attachmenttype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" label=\" + ul4._repr(this.label) + \">\";\n\t}\n};\n\nAttachment.prototype._ul4onattrs = [\"record\", \"label\", \"active\"];\nAttachment.prototype._ul4attrs = new Set([\"id\", \"record\", \"label\", \"active\"]);\n\n\nclass NoteAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NoteAttachment;\n\t}\n};\n\nlet noteattachmenttype = new NoteAttachmentType(\"la\", \"NoteAttachment\", \"A note attachment of a record\");\n\n\nexport class NoteAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn noteattachmenttype;\n\t}\n};\n\nNoteAttachment.prototype.type = \"noteattachment\";\nNoteAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nNoteAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass URLAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLAttachment;\n\t}\n};\n\nlet urlattachmenttype = new URLAttachmentType(\"la\", \"URLAttachment\", \"A URL attachment of a record\");\n\n\nexport class URLAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlattachmenttype;\n\t}\n};\n\nURLAttachment.prototype.type = \"urlattachment\";\nURLAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nURLAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass FileAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileAttachment;\n\t}\n};\n\nlet fileattachmenttype = new FileAttachmentType(\"la\", \"FileAttachment\", \"A file attachment of a record\");\n\n\nexport class FileAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fileattachmenttype;\n\t}\n};\n\nFileAttachment.prototype.type = \"fileattachment\";\nFileAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nFileAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass ImageAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ImageAttachment;\n\t}\n};\n\nlet imageattachmenttype = new ImageAttachmentType(\"la\", \"ImageAttachment\", \"An image attachment of a record\");\n\n\nexport class ImageAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn imageattachmenttype;\n\t}\n};\n\nImageAttachment.prototype.type = \"imageattachment\";\nImageAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"original\", \"thumb\", \"small\", \"medium\",\"large\"];\nImageAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"original\", \"thumb\", \"small\", \"medium\", \"large\"]);\n\n\nclass JSONAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof JSONAttachment;\n\t}\n};\n\nlet jsonattachmenttype = new JSONAttachmentType(\"la\", \"JSONAttachment\", \"A JSON attachment of a record\");\n\n\nexport class JSONAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn jsonattachmenttype;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"value\")\n\t\t\treturn ul4._asjson(this.value);\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = ul4._fromjson(value);\n\t\telse\n\t\t\tthis[name] = value\n\t}\n};\n\nJSONAttachment.prototype.type = \"jsonattachment\";\nJSONAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nJSONAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass InstallationType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Installation;\n\t}\n};\n\nlet installationtype = new InstallationType(\"la\", \"Installation\", \"The installation that created an app\");\n\n\nexport class Installation extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn installationtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Installation id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nInstallation.prototype._ul4onattrs = [\"name\"];\nInstallation.prototype._ul4attrs = new Set([\"id\", \"name\"]);\n\n\nclass CategoryType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Category;\n\t}\n};\n\nlet categorytype = new CategoryType(\"la\", \"Category\", \"A navigation category\");\n\n\nexport class Category extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn categorytype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [];\n\t\tlet category = this;\n\t\twhile (category !== null)\n\t\t{\n\t\t\tv.splice(0, 0, category.identifier);\n\t\t\tcategory = category.parent;\n\t\t}\n\t\treturn \"<Category id=\" + ul4._repr(this.id) + \" identifierpath=\" + ul4._repr(v.join(\"/\")) +  + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nCategory.prototype._ul4onattrs = [\"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"];\nCategory.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"]);\n\n\nclass KeyViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof KeyView;\n\t}\n};\n\nlet keyviewtype = new KeyViewType(\"la\", \"KeyView\", \"Object granting access to a view template\");\n\n\nexport class KeyView extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn keyviewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<KeyView id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nKeyView.prototype._ul4onattrs = [\"identifier\", \"name\", \"key\", \"user\"];\nKeyView.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"key\", \"user\"]);\n\n\nclass AppParameterType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppParameter;\n\t}\n};\n\nlet appparametertype = new AppParameterType(\"la\", \"AppParameter\", \"A parameter of a LivingApps application\");\n\n\nexport class AppParameter extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn appparametertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<AppParameter id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nAppParameter.prototype._ul4onattrs = [\"app\", \"identifier\", \"description\", \"value\"];\nAppParameter.prototype._ul4attrs = new Set([\"id\", \"app\", \"identifier\", \"description\", \"value\"]);\n\n\nclass FormType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Form;\n\t}\n};\n\nlet formtype = new FormType(\"la\", \"Form\", \"The input form.\");\n\nexport class Form extends ul4.Proto\n{\n\tconstructor(globals, template)\n\t{\n\t\tsuper();\n\t\tthis.globals = globals;\n\t\tthis.template = template;\n\n\t\tfor (let field of globals.record.fields.values())\n\t\t\tthis.wire_field(field);\n\t\tthis.render_template(null);\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn formtype;\n\t}\n\n\tget _dom_button()\n\t{\n\t\treturn document.querySelector(this._sel_form + \" \" + this._sel_button);\n\t}\n\n\tget enabled()\n\t{\n\t\treturn !this._dom_button.disabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tthis._dom_button.disabled = value;\n\t}\n\n\t[ul4.symbols.getattr](key)\n\t{\n\t\tif (key === \"enabled\")\n\t\t\treturn this.enabled;\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, key);\n\t}\n\n\t[ul4.symbols.setattr](key, value)\n\t{\n\t\tif (key === \"enabled\")\n\t\t\tthis.enabled = ul4._bool(value);\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, key);\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" enabled=\" + ul4._repr(this.enabled) + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n\n\trender_template(identifier)\n\t{\n\t\tlet vars = {\n\t\t\t\"record\": this.globals.record,\n\t\t\t\"fields\": this.globals.record.fields,\n\t\t\t\"identifier\": identifier\n\t\t};\n\t\tlet globalVars = {\n\t\t\t\"globals\": this.globals,\n\t\t\t\"form\": this\n\t\t};\n\n\t\tlet msg = \"LivingApps update template: \";\n\t\tif (identifier === null)\n\t\t\tmsg += \"Initialization\";\n\t\telse\n\t\t\tmsg += \"Value change in \" + ul4._repr(identifier);\n\n\t\tthis.globals.group_logging(msg, () => {\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.template.renders(vars, globalVars);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (console && console.error)\n\t\t\t\t{\n\t\t\t\t\tthis.globals._start_log_message();\n\t\t\t\t\tif (console.group)\n\t\t\t\t\t\tconsole.group(\"UL4 stacktrace\");\n\t\t\t\t\tul4.report_exc(exc);\n\t\t\t\t\tif (console.groupEnd)\n\t\t\t\t\t\tconsole.groupEnd();\n\n\t\t\t\t\tif (console.groupCollapsed)\n\t\t\t\t\t\tconsole.groupCollapsed(\"Javascript stacktrace\");\n\t\t\t\t\tconsole.error(exc);\n\t\t\t\t\tif (console.groupEnd)\n\t\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\twire_field(field)\n\t{\n\t\tfor (let dom_node of field._dom_controls)\n\t\t{\n\t\t\tdom_node.addEventListener(field.type == 'date' ? 'change' : 'input', (event) => {\n\t\t\t\tthis.render_template(field.control.identifier);\n\t\t\t});\n\t\t}\n\t}\n};\n\nForm.prototype._ul4attrs = new Set([\"enabled\"]);\nForm.prototype._sel_form = \"#livingapps-form form\";\nForm.prototype._sel_button = \"[type=submit]\";\n\n\nlet classes = [\n\tGlobals,\n\tFlashMessage,\n\tApp,\n\tView,\n\tDataSource,\n\tRecord,\n\tBoolControl,\n\tIntControl,\n\tNumberControl,\n\tTextControl,\n\tEmailControl,\n\tURLControl,\n\tTelControl,\n\tTextAreaControl,\n\tDateControl,\n\tDatetimeMinuteControl,\n\tDatetimeSecondControl,\n\tLookupControl,\n\tLookupSelectControl,\n\tLookupRadioControl,\n\tLookupChoiceControl,\n\tAppLookupControl,\n\tAppLookupSelectControl,\n\tAppLookupRadioControl,\n\tAppLookupChoiceControl,\n\tMultipleLookupControl,\n\tMultipleLookupSelectControl,\n\tMultipleLookupCheckboxControl,\n\tMultipleLookupChoiceControl,\n\tMultipleAppLookupControl,\n\tMultipleAppLookupSelectControl,\n\tMultipleAppLookupCheckboxControl,\n\tMultipleAppLookupChoiceControl,\n\tGeoControl,\n\tFileControl,\n\tFileSignatureControl,\n\tButtonControl,\n\tField,\n\tBoolField,\n\tStringField,\n\tEmailField,\n\tURLField,\n\tTelField,\n\tTextAreaField,\n\tHTMLField,\n\tIntField,\n\tNumberField,\n\tGeoField,\n\tFileField,\n\tFileSignatureField,\n\tDateFieldBase,\n\tDateField,\n\tDatetimeMinuteField,\n\tDatetimeSecondField,\n\tLookupFieldBase,\n\tLookupField,\n\tMultipleLookupField,\n\tAppLookupFieldBase,\n\tAppLookupField,\n\tMultipleAppLookupField,\n\tLookupItem,\n\tViewLookupItem,\n\tLayoutControl,\n\tHTMLLayoutControl,\n\tImageLayoutControl,\n\tButtonLayoutControl,\n\tViewControl,\n\tUser,\n\tFile,\n\tGeo,\n\tNoteAttachment,\n\tURLAttachment,\n\tFileAttachment,\n\tImageAttachment,\n\tJSONAttachment,\n\tInstallation,\n\tCategory,\n\tKeyView,\n\tAppParameter\n];\n\nfor (let constructor of classes)\n{\n\tul4.register(\"de.livinglogic.livingapi.\" + constructor.name.toLowerCase(), constructor);\n}\n"],"names":["Base","ul4","Proto","id","this","encoder","i","_ul4onattrs","length","dump","_dumpUL4ONAttr","name","decoder","iter","loadcontent","iteritem","next","done","_loadUL4ONAttr","value","_setDefaultUL4ONAttr","symbols","getattr","_ul4attrs","has","realvalue","bind","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","startsWith","hasOwnProperty","AttributeError","setattr","repr","constructor","Handler","record","globalstype","Type","obj","Globals","version","hostname","platform","user","lang","datasources","app","mode","maxdbactions","maxtemplateruntime","flashmessages","view_template_id","email_template_id","handler","_log_stack","type","image","width","height","enlarge","gravity","quality","rotate","blur","sharpen","format","cache","filename","File","archive_url","encodeURIComponent","result","rotatet","_repr","msg_bool_true","msg_bool_false","messages","output","message","push","join","header","console","groupEnd","pop","callback","begin_logging","end_logging","level","group","_start_log_message","debug","_make_log_message","info","warn","error","geo1","geo2","sqsin","x","Math","sin","sqcos","sqsos","cos","deg2rad","PI","flat","lat1","lat","long1","lat2","F","G","l","S","C","w","atan","sqrt","D","T","H2","prototype","Set","expose","log_debug","log_info","log_warning","log_error","scaled_url","flashmessagetype","FlashMessage","title","apptype","App","values","call","globals","save","active_view","Map","layout_controls","Record","_ismap","keys","identifier","fields","ArgumentError","_make_fields","_isobject","TypeError","_list","dicttype","items","controls","substr","get","params","_active_view","view","views","ValueError","View","insert","viewtype","datasourcetype","DataSource","recordtype","createdat","createdby","updatedat","updatedby","updatecount","_sparsevalues","_values","_fields","children","attachments","errors","_sparsefielderrors","_sparsefieldlookupdata","_is_deleted","_is_new","maxlevel","control","priority","fieldvalue","display_value","label","msg_no_fields","defaults","lookupdata","field","fieldtype","set","_sparselookupdata","_in_form","v","is_empty","state","is_dirty","has_errors","entries","key","search","fieldsearch","_bool","update","FieldType","Field","_label","_lookupdata","_value","_this4","_dirty","_enabled","_writable","_visible","_get_dom_value","oldvalue","change","_validate","_ne","_set_dom_value","_dom_label","textContent","_set_dom_label","searchvalue","_type","minlength","maxlength","_cssclass_root","_sel_root","_cssclass_control","document","querySelector","_sel_label","_sel_control","querySelectorAll","_dom_control","_dom_root","hidden","classList","contains","disabled","_dom_controls","toggle","s","visible","enabled","writable","boolfieldtype","BoolField","required","msg_field_required","msg_bool_truerequired","msg_field_wrong_type","checked","msg_bool","intfieldtype","IntField","test","parseInt","_parse","msg_number_format","round","testvalue","numberfieldtype","NumberField","seps","commas","dots","c","convert","replace","floatvalue","parseFloat","isNaN","_bound_value","precision","_round","minimum","maximum","toFixed","toString","StringFieldType","StringField","stringfieldtype","msg_string_tooshort","msg_string_toolong","readonly","readOnly","emailfieldtype","EmailField","msg_email_format","urlfieldtype","URLField","url","URL","exc","msg_url_format","protocol","telfieldtype","TelField","msg_tel_format","textareafieldtype","TextAreaField","htmlfieldtype","HTMLField","geofieldtype","GeoField","dom_node","endsWith","JSON","parse","Geo","geometry","coordinates","properties","formatted_address","dom_value","_asjson","FileFieldType","FileField","filefieldtype","filesignaturefieldtype","FileSignatureField","DateFieldBaseType","DateFieldBase","datefieldbasetype","_format","formatstring","year","month","day","hour","minute","second","ispm","_int","len","min","max","substring","toLowerCase","Date","_convert","Date_","_date","formatstrings_parse","msg_date_format","date","datefieldtype","DateField","getFullYear","getMonth","getDate","datetimeminutefieldtype","DatetimeMinuteField","setSeconds","setMilliseconds","datetimesecondfieldtype","DatetimeSecondField","ChoiceFieldBase","selected","el","createElement","args","arg","appendChild","createTextNode","ismap","isobject","Object","setAttribute","nonekey","lookup_data","none_selected","getAttribute","add","new_children","_make_option","nonelabel","msg_nothing_selected","_make_label","replaceChildren","dom_input","dom_none_input","dom_label","style","display","innerText","LookupFieldBaseType","LookupFieldBase","lookupfieldbasetype","_set_dom_lookupdata","LookupItem","_str","lookupitem","undefined","autoexpandable","search_lookupitem","msg_lookup_unknownkey","msg_lookup_wrongitem","LookupFieldType","LookupField","lookupfieldtype","_find_lookupitem","lookupradiofieldtype","LookupRadioField","node","_set_dom_lookupdata_input","lookupselectfieldtype","LookupSelectField","_set_dom_lookupdata_select","lookupchoicefieldtype","LookupChoiceField","MultipleLookupFieldType","MultipleLookupField","multiplelookupfieldtype","item","islist","newvalue","singlechange","multiplelookupcheckboxfieldtype","MultipleLookupCheckboxField","multiplelookupselectfieldtype","MultipleLookupSelectField","option","multiplelookupchoicefieldtype","MultipleLookupChoiceField","AppLookupFieldBaseType","AppLookupFieldBase","applookupfieldbasetype","lookup_app","records","display_text","lookup_controls","msg_applookup_unknownkey","msg_applookup_wrongrecord","_get","AppLookupFieldType","AppLookupField","applookupfieldtype","_find_record","applookupselectfieldtype","AppLookupSelectField","applookupradiofieldtype","AppLookupRadioField","applookupchoicefieldtype","AppLookupChoiceField","MultipleAppLookupFieldType","MultipleAppLookupField","multipleapplookupfieldtype","multipleapplookupcheckboxfieldtype","MultipleAppLookupCheckboxField","multipleapplookupselectfieldtype","MultipleAppLookupSelectField","multipleapplookupchoicefieldtype","MultipleAppLookupChoiceField","ControlType","Control","controltype","subtype","view_control","_view_control","top","left","liveupdate","tabindex","labelpos","labelwidth","autoalign","boolcontroltype","BoolControl","_logsearch","operator","intcontroltype","IntControl","PlaceholderControlType","PlaceholderControld","placeholdercontroltype","PlaceholderControl","placeholder","numbercontroltype","NumberControl","minvalue","maxvalue","StringControlType","StringControl","stringcontroltype","gender","firstname","surname","email","streetname","streetnumber","street","zip","phone","fax","company","city","summary","interests","personal_website","company_website","position","department","today","_user_placeholder","indexOf","textcontroltype","TextControl","emailcontroltype","EmailControl","urlcontroltype","URLControl","telcontroltype","TelControl","textareacontroltype","TextAreaControl","encrypted","htmlcontroltype","HTMLControl","DateControlType","DateControl","datecontroltype","_formatstrings","DatetimeMinuteControl","DatetimeSecondControl","language","datetimeminutecontroltype","now","datetimesecondcontroltype","LookupControlType","LookupControl","lookupcontroltype","lookupnonekey","lookupnonelabel","lookupselectcontroltype","LookupSelectControl","lookupradiocontroltype","LookupRadioControl","lookupchoicecontroltype","LookupChoiceControl","AppLookupControlType","AppLookupControl","applookupcontroltype","applookupselectcontroltype","AppLookupSelectControl","applookupradiocontroltype","AppLookupRadioControl","applookupchoicecontroltype","AppLookupChoiceControl","MultipleLookupControlType","MultipleLookupControl","multiplelookupcontroltype","defaultValue","multiplelookupcheckboxcontroltype","MultipleLookupCheckboxControl","multiplelookupselectcontroltype","MultipleLookupSelectControl","multiplelookupchoicecontroltype","MultipleLookupChoiceControl","MultipleAppLookupControlType","MultipleAppLookupControl","multipleapplookupcontroltype","multipleapplookupselectcontroltype","MultipleAppLookupSelectControl","multipleapplookupcheckboxcontroltype","MultipleAppLookupCheckboxControl","multipleapplookupchoicecontroltype","MultipleAppLookupChoiceControl","geocontroltype","GeoControl","FileControlType","FileControl","filecontroltype","filesignaturecontroltype","FileSignatureControl","buttoncontroltype","ButtonControl","lookupitemtype","view_lookupitem","_view_lookupitem","viewlookupitemtype","ViewLookupItem","LayoutControlType","LayoutControl","layoutcontroltype","htmllayoutcontroltype","HTMLLayoutControl","innerHTML","imagelayoutcontroltype","ImageLayoutControl","buttonlayoutcontroltype","ButtonLayoutControl","viewcontroltype","ViewControl","_mode","usertype","User","filetype","archive","geotype","long","AttachmentType","Attachment","attachmenttype","noteattachmenttype","NoteAttachment","urlattachmenttype","URLAttachment","fileattachmenttype","FileAttachment","imageattachmenttype","ImageAttachment","jsonattachmenttype","JSONAttachment","_fromjson","installationtype","Installation","categorytype","Category","category","splice","parent","keyviewtype","KeyView","appparametertype","AppParameter","formtype","Form","template","wire_field","render_template","_sel_form","_sel_button","_dom_button","vars","globalVars","msg","group_logging","_this7","renders","report_exc","groupCollapsed","addEventListener","event","_this8","register"],"mappings":"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C,YACpC8f,GAAK/f,UAAUmgB,UAAY,wBAC3BJ,GAAK/f,UAAUogB,YAAc,gBAqF7B,IAlFA,YAAc,CACbxlB,EACA6F,EACAG,EACA4B,EACAI,EACAxB,EACA4U,GACAI,GACAO,GACA4B,GACAE,GACAE,GACAE,GACAE,GACAK,GACAG,GACAC,GACAM,GACAK,GACAE,GACAE,GACAE,GACAG,GACAE,GACAE,GACAE,GACAM,GACAF,GACAI,GACAE,GACAG,GACAE,GACAE,GACAE,GACAE,GACAG,GACAE,GACArX,EACA2C,EACAkC,EACAO,EACAG,EACAO,EACAG,EACAE,EACAhD,EACAQ,EACA0C,EACAa,EACAG,EACAE,EACAyB,EACAK,EACAI,GACA+B,GACAY,GACAa,GACAc,GACAU,GACAU,GACAxD,GACA+L,GACAE,GACAG,GACAG,GACAE,GACAE,GACAG,GACAvhB,GACAwP,GACAwS,GACAE,GACAE,GACAE,GACAE,GACAG,GACAE,GACAK,GACAE,sBAID,KADSvlB,UAERnC,EAAI8oB,SAAS,4BAA8B3mB,GAAYzB,KAAKiV,cAAexT"}