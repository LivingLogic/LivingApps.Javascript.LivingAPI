{"version":3,"file":"livingapi.js","sources":["../../src/livingapi.js"],"sourcesContent":["/*!\n * LivingAPI JavaScript Library\n * https://my.living-apps.de/docs/LivingAPI.html\n *\n * Copyright 2017-2019 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2017-2019 by Walter DÃ¶rwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\nimport * as ul4 from '@livinglogic/ul4';\n\nexport class Base extends ul4.Proto\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let i = 0; i < this._ul4onattrs.length; ++i)\n\t\t\tencoder.dump(this._dumpUL4ONAttr(this._ul4onattrs[i]));\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\treturn this[name];\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet i = 0;\n\t\tfor (let iter = decoder.loadcontent(); ; ++i)\n\t\t{\n\t\t\tlet iteritem = iter.next();\n\t\t\tif (iteritem.done)\n\t\t\t\tbreak;\n\t\t\tif (i < this._ul4onattrs.length)\n\t\t\t\tthis._loadUL4ONAttr(this._ul4onattrs[i], iteritem.value);\n\t\t}\n\t\tfor (; i < this._ul4onattrs.length; ++i)\n\t\t\tthis._setDefaultUL4ONAttr(this._ul4onattrs[i]);\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tthis[name] = value;\n\t}\n\n\t_setDefaultUL4ONAttr(name)\n\t{\n\t\tthis[name] = null;\n\t}\n\n\t__getattr__(name)\n\t{\n\t\tif (this._ul4attrs.has(name))\n\t\t{\n\t\t\tlet value = this[name];\n\t\t\tif (typeof(value) === \"function\")\n\t\t\t{\n\t\t\t\tlet realvalue = value.bind(this);\n\t\t\t\trealvalue._ul4_name = value._ul4_name || value.name;\n\t\t\t\trealvalue._ul4_signature = value._ul4_signature;\n\t\t\t\trealvalue._ul4_needsobject = value._ul4_needsobject;\n\t\t\t\trealvalue._ul4_needscontext = value._ul4_needscontext;\n\t\t\t\treturn realvalue;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<\" + this.constructor.name + \">\";\n\t}\n};\n\nexport class Handler\n{\n\tsave(record)\n\t{\n\t}\n\n\tdelete(record)\n\t{\n\t}\n};\n\nexport class Globals extends Base\n{\n\tstatic classdoc = \"Global information\";\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.version = null;\n\t\tthis.hostname = null;\n\t\tthis.platform = null;\n\t\tthis.user = null;\n\t\tthis.lang = null;\n\t\tthis.app = null;\n\t\tthis.record = null;\n\t\tthis.maxdbactions = null;\n\t\tthis.maxtemplateruntime = null;\n\t\tthis.flashmessages = null;\n\t\tthis.handler = new Handler();\n\t}\n\n\t// distance between two geo coordinates (see https://de.wikipedia.org/wiki/Orthodrome#Genauere_Formel_zur_Abstandsberechnung_auf_der_Erde)\n\tstatic geodist(geo1, geo2)\n\t{\n\t\tlet sqsin = function sqsin(x) {x = Math.sin(x); return x*x};\n\t\tlet sqcos = function sqsos(x) {x = Math.cos(x); return x*x};\n\t\tconst deg2rad = Math.PI/180; // Conversion factor degree -> radians\n\t\tconst radius = 6378.137; // Equatorial radius of earth in km\n\t\tconst flat = 1/298.257223563; // Earth flattening\n\n\t\tconst lat1 = geo1.lat * deg2rad;\n\t\tconst long1 = geo1.long * deg2rad;\n\t\tconst lat2 = geo2.lat * deg2rad;\n\t\tconst long2 = geo2.long * deg2rad;\n\t\tconst F = (lat1 + lat2)/2;\n\t\tconst G = (lat1 - lat2)/2;\n\t\tconst l = (long1 - long2)/2;\n\t\tconst S = sqsin(G) * sqcos(l) + sqcos(F) * sqsin(l);\n\t\tconst C = sqcos(G) * sqcos(l) + sqsin(F) * sqsin(l);\n\t\tconst w = Math.atan(Math.sqrt(S/C));\n\t\tconst D = 2 * w * radius;\n\t\tconst T = Math.sqrt(S*C)/w;\n\t\tconst H1 = (3*T-1)/(2*C);\n\t\tconst H2 = (3*T+1)/(2*S);\n\t\tconst s = D * (1 + flat * H1 * sqsin(F) * sqcos(G) - flat * H2 * sqcos(F) * sqsin(G));\n\t\treturn s;\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<Globals version=\" + ul4._repr(this.version) + \">\";\n\t}\n};\n\nGlobals.prototype._ul4onattrs = [\"version\", \"platform\", \"user\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"lang\", \"datasources\", \"hostname\", \"app\", \"record\"];\nGlobals.prototype._ul4attrs = ul4._makeset(\"version\", \"hostname\", \"platform\", \"user\", \"lang\", \"app\", \"record\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\");\n\nexport class FlashMessage extends Base\n{\n\tstatic classdoc = \"A flash message in a web page\";\n\n\t__repr__()\n\t{\n\t\treturn \"<FlashMessage type=\" + ul4._repr(this.type) + \" title=\" + ul4._repr(this.title) + \">\";\n\t}\n};\n\nFlashMessage.prototype._ul4onattrs = [\"timestamp\", \"type\", \"title\", \"message\"];\nFlashMessage.prototype._ul4attrs = ul4._makeset(\"timestamp\", \"type\", \"title\", \"message\");\n\nexport class App extends Base\n{\n\tstatic classdoc = \"A LivingApps application\";\n\n\t__repr__()\n\t{\n\t\treturn \"<App id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n\n\tinsert(values={})\n\t{\n\t\tlet record = this.__call__(values);\n\t\tthis.globals.handler.save(this);\n\t\treturn record;\n\t}\n\n\t__call__(values={})\n\t{\n\t\tlet record = new Record(this);\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let [key, value] of values.entries())\n\t\t\t{\n\t\t\t\tif (!record.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = value;\n\t\t\t}\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let key in values)\n\t\t\t{\n\t\t\t\tif (!record.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = values[key];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\t\treturn record;\n\t}\n\n\t__getattr__(name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t{\n\t\t\tif (!this.controls.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.controls.get(name.substr(2));\n\t\t}\n\t\telse\n\t\t\treturn super.__getattr__(name);\n\t}\n};\n\nApp.prototype._ul4onattrs = [\"id\", \"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"basetable\", \"primarykey\", \"insertprocedure\", \"updateprocedure\", \"deleteprocedure\", \"templates\", \"createdat\", \"updatedat\", \"updatedby\", \"superid\", \"favorite\"];\nApp.prototype._ul4attrs = ul4._makeset(\"id\", \"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"insert\", \"favorite\");\nul4.expose(App.prototype.__call__, [\"**values\"], {\"needsobject\": true});\nul4.expose(App.prototype.insert, [\"**values\"], {\"needsobject\": true});\n\nexport class View extends Base\n{\n\tstatic classdoc = \"An input form for a LivingApps application\";\n\n\t__repr__()\n\t{\n\t\treturn \"<View id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nView.prototype._ul4onattrs = [\"id\", \"name\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\"];\nView.prototype._ul4attrs = ul4._makeset(\"id\", \"name\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\");\n\nexport class DataSourceData extends Base\n{\n\tstatic classdoc = \"The data resulting from a data source configuration\";\n\n\t__repr__()\n\t{\n\t\treturn \"<DataSource.Data id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nDataSourceData.prototype._ul4onattrs = [\"id\", \"identifier\", \"app\", \"apps\"];\nDataSourceData.prototype._ul4attrs = ul4._makeset(\"id\", \"identifier\", \"app\", \"apps\");\n\nexport class Record extends Base\n{\n\tstatic classdoc = \"A record of a LivingApp application\";\n\n\tconstructor(app)\n\t{\n\t\tsuper();\n\t\tthis.id = null;\n\t\tthis.app = app;\n\t\tthis.createdat = null;\n\t\tthis.createdby = null;\n\t\tthis.updatedat = null;\n\t\tthis.updatedby = null;\n\t\tthis.updatecount = 0;\n\t\tthis._sparsevalues = new Map();\n\t\tthis._values = null;\n\t\tthis._fields = null;\n\t\tthis.children = new Map();\n\t\tthis.attachments = null;\n\t\tthis.errors = [];\n\t\tthis._is_deleted = false;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [\"<Record id=\", ul4._repr(this.id)];\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.control.priority)\n\t\t\t{\n\t\t\t\tv.push(\" v_\");\n\t\t\t\tv.push(field.control.identifier);\n\t\t\t\tv.push(\"=\");\n\t\t\t\tv.push(ul4._repr(field.value)); // FIXME: This might lead to infinite recursions\n\t\t\t}\n\t\t}\n\t\tv.push(\">\")\n\t\treturn v.join(\"\");\n\t}\n\n\tget values()\n\t{\n\t\tif (this._values === null)\n\t\t{\n\t\t\tthis._values = ul4._havemap ? new Map() : {};\n\t\t\tfor (let [identifier, control] of this.app.controls.entries())\n\t\t\t{\n\t\t\t\tlet fieldvalue = this._sparsevalues.get(identifier);\n\t\t\t\tif (typeof(fieldvalue) === \"undefined\")\n\t\t\t\t\tfieldvalue = null;\n\t\t\t\tthis._values.set(identifier, fieldvalue);\n\t\t\t}\n\t\t}\n\t\treturn this._values;\n\t}\n\n\tget fields()\n\t{\n\t\tif (this._fields === null)\n\t\t{\n\t\t\tthis._fields = ul4._havemap ? new Map() : {};\n\t\t\tfor (let [identifier, value] of this.values.entries())\n\t\t\t{\n\t\t\t\tlet field = new Field(this.app.controls.get(identifier), this, value);\n\t\t\t\tthis._fields.set(identifier, field);\n\t\t\t}\n\t\t}\n\t\treturn this._fields;\n\t}\n\n\tis_dirty()\n\t{\n\t\tif (this.id === null)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.is_dirty())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\thas_errors()\n\t{\n\t\tif (this.errors.length !== 0)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.has_errors())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\treturn this.app.globals.handler.delete(this);\n\t}\n\n\tsave()\n\t{\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tupdate(values={})\n\t{\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let [key, value] of values.entries())\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\tfields.get(key).value = value;\n\t\t\t}\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let key in values)\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = values[key];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tsearch(search)\n\t{\n\t\tfor (let identifier in search)\n\t\t{\n\t\t\tlet fieldsearch = search[identifier];\n\t\t\tif (ul4._bool(fieldsearch))\n\t\t\t{\n\t\t\t\tif (!this.fields.get(identifier).search(fieldsearch))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"values\")\n\t\t\treturn this._sparsevalues;\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"values\")\n\t\t{\n\t\t\tthis._sparsevalues = value;\n\t\t\tthis._values = null;\n\t\t\tthis._fields = null;\n\t\t}\n\t\telse\n\t\t\tthis[name] = value;\n\t}\n\n\t__getattr__(name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\treturn this.children.get(name.substr(2))\n\t\telse if (name.startsWith(\"f_\"))\n\t\t\treturn this.fields.get(name.substr(2))\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\treturn this.values.get(name.substr(2))\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t__setattr__(name, value)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\tthis.children[name.substr(2)] = value;\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\tthis.fields.get(name.substr(2)).value = value;\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t}\n};\n\nRecord.prototype._ul4onattrs = [\"id\", \"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"values\", \"attachments\", \"children\"];\nRecord.prototype._ul4attrs = ul4._makeset(\"id\", \"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"values\", \"attachments\", \"children\");\nul4.expose(Record.prototype.is_dirty, []);\nul4.expose(Record.prototype.has_errors, []);\nul4.expose(Record.prototype.delete, []);\nul4.expose(Record.prototype.save, []);\nul4.expose(Record.prototype.update, [\"**values\"], {\"needsobject\": true});\n\nexport class Control extends Base\n{\n\t__repr__()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\t_logsearch(value, search)\n\t{\n\t\t//console.log(\"Searching for \" + ul4._repr(search.value) + \" in \" + ul4._repr(this) + \" with operator \" + search.operator + \" in value \" + ul4._repr(value));\n\t}\n\n\t// base implemntation, always returns ``false`` (i.e. \"not found\")\n\t// ``value`` is the value of the field\n\t// ``search`` is an object with information what we're searching for\n\t// keys in ``search`` are: ``operator`` (and ``value`` (if required by the operator))\n\tsearch(value, search)\n\t{\n\t\treturn false;\n\t}\n};\n\nControl.prototype.type = null;\nControl.prototype.subtype = null;\nControl.prototype._ul4onattrs = [\"id\", \"identifier\", \"field\", \"app\", \"label\", \"priority\", \"order\", \"default\", \"ininsertprocedure\", \"inupdateprocedure\"];\nControl.prototype._ul4attrs = ul4._makeset(\"id\", \"identifier\", \"field\", \"app\", \"label\", \"priority\", \"order\", \"default\", \"ininsertprocedure\", \"inupdateprocedure\");\n\nexport class BoolControl extends Control\n{\n\tstatic classdoc = \"A LivingApps boolean field (type 'bool')\";\n\n\t// ``search`` must by ``null``, ``false`` or ``true``\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nBoolControl.prototype.type = \"bool\";\n\nexport class IntControl extends Control\n{\n\tstatic classdoc = \"A LivingApps integer field (type 'int')\";\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nIntControl.prototype.type = \"int\";\n\nexport class NumberControl extends Control\n{\n\tstatic classdoc = \"A LivingApps number field (type 'number')\";\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"range\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn false;\n\t\t\treturn (search.minvalue === null || search.minvalue <= value) && (search.maxvalue === null || value < search.maxvalue);\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nNumberControl.prototype.type = \"number\";\n\nexport class StringControl extends Control\n{\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (search.value === null || value === null)\n\t\t\t\treturn search.value === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(search.value.toLowerCase()) >= 0;\n\t\t}\n\t}\n};\n\nStringControl.prototype.type = \"string\";\n\nexport class TextControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps text field (type 'string/text')\";\n\n};\n\nTextControl.prototype.subtype = \"text\";\n\nexport class EmailControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps email field (type 'string/email')\";\n\n};\n\nEmailControl.prototype.subtype = \"email\";\n\nexport class URLControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps URL field (type 'string/url')\";\n\n};\n\nURLControl.prototype.subtype = \"url\";\n\nexport class TelControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps phone number field (type 'string/tel')\";\n\n};\n\nTelControl.prototype.subtype = \"tel\";\n\nexport class PasswordControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps email field (type 'string/email')\";\n\n};\n\nPasswordControl.prototype.subtype = \"password\";\n\nexport class TextAreaControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps textarea field (type 'string/textarea')\";\n\n};\n\nTextAreaControl.prototype.subtype = \"textarea\";\nTextAreaControl.prototype._ul4onattrs = StringControl.prototype._ul4onattrs.concat([\"encrypted\"]);\nTextAreaControl.prototype._ul4attrs = ul4._makeset(...StringControl.prototype._ul4attrs, \"encrypted\");\n\nexport class HTMLControl extends StringControl\n{\n\tstatic classdoc = \"A LivingApps HTML field (type 'string/html')\";\n\n};\n\nHTMLControl.prototype.subtype = \"html\";\n\nexport class DateControl extends Control\n{\n\tstatic classdoc = \"A LivingApps date field (type 'date/date')\";\n\n\tformatstring(language)\n\t{\n\t\tlanguage = language || this.app.language;\n\n\t\tif (language === \"de\")\n\t\t\treturn \"%d.%m.%Y\";\n\t\telse\n\t\t\treturn \"%m/%d/%Y\";\n\t}\n\n\t// searchvalue must be ``null``, a ``Date`` object or a string\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\n\t\tlet searchvalue = search.value;\n\t\tif (Object.prototype.toString.call(searchvalue) == \"[object Date]\")\n\t\t\tsearchvalue = ul4._format(searchvalue, this.formatstring(), this.app.language);\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.formatstring(), this.app.language);\n\n\t\tif (search.operator === \"equals\")\n\t\t\treturn searchvalue === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (searchvalue === null || value === null)\n\t\t\t\treturn searchvalue === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(searchvalue.toLowerCase()) >= 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nDateControl.prototype.type = \"date\";\nDateControl.prototype.subtype = \"date\";\n\nexport class DatetimeMinuteControl extends DateControl\n{\n\tstatic classdoc = \"A LivingApps date field (type 'date/datetimeminute')\";\n\n\tformatstring(language)\n\t{\n\t\tlanguage = language || this.app.language;\n\n\t\tif (language === \"de\")\n\t\t\treturn \"%d.%m.%Y %H:%M\";\n\t\telse\n\t\t\treturn \"%m/%d/%Y %H:%M\";\n\t}\n};\n\nDatetimeMinuteControl.prototype.subtype = \"datetimeminute\";\n\nexport class DatetimeSecondControl extends DateControl\n{\n\tstatic classdoc = \"A LivingApps date field (type 'date/datetimesecond')\";\n\n\tformatstring(language)\n\t{\n\t\tlanguage = language || this.app.language;\n\n\t\tif (language === \"de\")\n\t\t\treturn \"%d.%m.%Y %H:%M:%S\";\n\t\telse\n\t\t\treturn \"%m/%d/%Y %H:%M:%S\";\n\t}\n};\n\nDatetimeSecondControl.prototype.subtype = \"datetimesecond\";\n\nexport class LookupControl extends Control\n{\n\t// ``search.value`` must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn search.value === null;\n\t\t\telse\n\t\t\t\treturn value.key === search.value;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nLookupControl.prototype.type = \"lookup\";\nLookupControl.prototype._ul4onattrs = Control.prototype._ul4onattrs.concat([\"lookupdata\"]);\nLookupControl.prototype._ul4attrs = ul4._makeset(...Control.prototype._ul4attrs, \"lookupdata\");\n\nexport class LookupSelectControl extends LookupControl\n{\n\tstatic classdoc = \"A LivingApps lookup field (type 'lookup/select')\";\n\n};\n\nLookupSelectControl.prototype.subtype = \"select\";\n\nexport class LookupRadioControl extends LookupControl\n{\n\tstatic classdoc = \"A LivingApps lookup field (type 'lookup/radio')\";\n\n};\n\nLookupRadioControl.prototype.subtype = \"radio\";\n\nexport class LookupChoiceControl extends LookupControl\n{\n\tstatic classdoc = \"A LivingApps lookup field (type 'lookup/choice')\";\n\n};\n\nLookupChoiceControl.prototype.subtype = \"choice\";\n\nexport class AppLookupControl extends Control\n{\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (value === null || search.value === null)\n\t\t\treturn value === search.value;\n\t\telse\n\t\t\treturn value.search(search);\n\t}\n};\n\nAppLookupControl.prototype.type = \"applookup\";\nAppLookupControl.prototype._ul4onattrs = Control.prototype._ul4onattrs.concat([\"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"]);\nAppLookupControl.prototype._ul4attrs = ul4._makeset(...Control.prototype._ul4attrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\");\n\nexport class AppLookupSelectControl extends AppLookupControl\n{\n\tstatic classdoc = \"A LivingApps applookup field (type 'applookup/select')\";\n\n};\n\nAppLookupSelectControl.prototype.subtype = \"select\";\n\nexport class AppLookupRadioControl extends AppLookupControl\n{\n\tstatic classdoc = \"A LivingApps applookup field (type 'applookup/radio')\";\n\n};\n\nAppLookupRadioControl.prototype.subtype = \"radio\";\n\nexport class AppLookupChoiceControl extends AppLookupControl\n{\n\tstatic classdoc = \"A LivingApps applookup field (type 'applookup/choice')\";\n\n};\n\nAppLookupChoiceControl.prototype.subtype = \"choice\";\n\nexport class MultipleLookupControl extends LookupControl\n{\n\t// search.value must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tfor (let item of value)\n\t\t\t{\n\t\t\t\tif (item.key === search.value)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleLookupControl.prototype.subtype = \"multiplelookup\";\n\nexport class MultipleLookupSelectControl extends MultipleLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiplelookup field (type 'multiplelookup/select')\";\n\n};\n\nMultipleLookupSelectControl.prototype.subtype = \"select\";\n\nexport class MultipleLookupCheckboxControl extends MultipleLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiplelookup field (type 'multiplelookup/checkbox')\";\n\n};\n\nMultipleLookupCheckboxControl.prototype.subtype = \"checkbox\";\n\nexport class MultipleLookupChoiceControl extends MultipleLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiplelookup field (type 'multiplelookup/choice')\";\n\n};\n\nMultipleLookupChoiceControl.prototype.subtype = \"choice\";\n\nexport class MultipleAppLookupControl extends AppLookupControl\n{\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (search.value === null)\n\t\t\t\treturn value.length === 0;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (let item of value)\n\t\t\t\t{\n\t\t\t\t\tif (item.search(search.value))\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleAppLookupControl.prototype.type = \"multipleapplookup\";\n\nexport class MultipleAppLookupSelectControl extends MultipleAppLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiple applookup field (type 'multipleapplookup/select')\";\n\n};\n\nMultipleAppLookupSelectControl.prototype.subtype = \"select\";\n\nexport class MultipleAppLookupCheckboxControl extends MultipleAppLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiple applookup field (type 'multipleapplookup/checkbox')\";\n\n};\n\nMultipleAppLookupCheckboxControl.prototype.subtype = \"checkbox\";\n\nexport class MultipleAppLookupChoiceControl extends MultipleAppLookupControl\n{\n\tstatic classdoc = \"A LivingApps multiple applookup field (type 'multipleapplookup/choice')\";\n\n};\n\nMultipleAppLookupChoiceControl.prototype.subtype = \"choice\";\n\nexport class GeoControl extends Control\n{\n\tstatic classdoc = \"A LivingApps geo field (type 'geo')\";\n\n};\n\nGeoControl.prototype.type = \"geo\";\n\nexport class FileControl extends Control\n{\n\tstatic classdoc = \"A LivingApps upload field (type 'file')\";\n\n};\n\nFileControl.prototype.type = \"file\";\n\nexport class FileSignatureControl extends FileControl\n{\n\tstatic classdoc = \"A LivingApps signature image field (type 'file/signature')\";\n\n};\n\nFileSignatureControl.prototype.subtype = \"signature\";\n\nexport class ButtonControl extends Control\n{\n};\n\nButtonControl.prototype.type = \"button\";\n\nexport class Field extends Base\n{\n\tconstructor(control, record, value)\n\t{\n\t\tsuper();\n\t\tthis.control = control;\n\t\tthis.record = record;\n\t\tthis._value = value;\n\t\tthis._dirty = false;\n\t\tthis.errors = [];\n\t}\n\n\tget value()\n\t{\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tlet oldvalue = this._value;\n\n\t\tif (ul4._ne(oldvalue, value))\n\t\t{\n\t\t\tthis.record.values.set(this.control.identifier, value);\n\t\t\tthis._value = value;\n\t\t\tthis._dirty = true;\n\t\t}\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value === null || (ul4._islist(this._value) && this._value.length === 0);\n\t}\n\n\tis_dirty()\n\t{\n\t\treturn this._dirty;\n\t}\n\n\thas_errors()\n\t{\n\t\treturn this.errors.length !== 0;\n\t}\n\n\tsearch(searchvalue)\n\t{\n\t\treturn this.control.search(this.value, searchvalue);\n\t}\n\n\t__repr__()\n\t{\n\t\tlet s = \"<Field identifier=\";\n\t\ts += ul4._repr(this.control.identifier)\n\t\tif (this._dirty)\n\t\t\ts += \" is_dirty()=True\";\n\t\tif (this.errors.length !== 0)\n\t\t\ts += \" has_errors()=True\";\n\t\ts += \">\"\n\t\treturn s;\n\t}\n};\n\nexport class LookupItem extends Base\n{\n\tstatic classdoc = \"An option in a lookup control/field\";\n\n\t__repr__()\n\t{\n\t\treturn \"<LookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label) + \">\";\n\t}\n};\n\nLookupItem.prototype._ul4onattrs = [\"key\", \"label\"];\nLookupItem.prototype._ul4attrs = ul4._makeset(\"key\", \"label\");\n\nexport class User extends Base\n{\n\tstatic classdoc = \"A LivingApps user/account\";\n\n\t__repr__()\n\t{\n\t\treturn \"<User id=\" + ul4._repr(this.id) + \" firstname=\" + ul4._repr(this.firstname) + \" surname=\" + ul4._repr(this.surname) + \" email=\" + ul4._repr(this.email) + \">\";\n\t}\n};\n\nUser.prototype._ul4onattrs = [\"_id\", \"id\", \"gender\", \"firstname\", \"surname\", \"initials\", \"email\", \"language\", \"avatarsmall\", \"avatarlarge\", \"keyviews\"];\nUser.prototype._ul4attrs = ul4._makeset(\"_id\", \"id\", \"gender\", \"firstname\", \"surname\", \"initials\", \"email\", \"language\", \"avatarsmall\", \"avatarlarge\", \"keyviews\");\n\nexport class File extends Base\n{\n\tstatic classdoc = \"An uploaded file\";\n\n\t__repr__()\n\t{\n\t\treturn \"<File id=\" + ul4._repr(this.id) + \" url=\" + ul4._repr(this.url) + \" filename=\" + ul4._repr(this.filename) + \">\";\n\t}\n};\n\nFile.prototype._ul4onattrs = [\"id\", \"url\", \"filename\", \"mimetype\", \"width\", \"height\", \"internalid\", \"createdat\", \"size\"];\nFile.prototype._ul4attrs = ul4._makeset(\"id\", \"url\", \"filename\", \"mimetype\", \"width\", \"height\", \"size\", \"createdat\");\n\nexport class Geo extends Base\n{\n\tstatic classdoc = \"Geographical coordinates and location information\";\n\n\tconstructor(lat, long, info)\n\t{\n\t\tsuper();\n\t\tthis.lat = lat;\n\t\tthis.long = long;\n\t\tthis.info = info;\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<Geo lat=\" + ul4._repr(this.lat) + \" long=\" + ul4._repr(this.long) + \" info=\" + ul4._repr(this.info) + \">\";\n\t}\n};\n\nGeo.prototype._ul4onattrs = [\"lat\", \"long\", \"info\"];\nGeo.prototype._ul4attrs = ul4._makeset(\"lat\", \"long\", \"info\");\n\nexport class Attachment extends Base\n{\n\t__repr__()\n\t{\n\t\treturn \"<\" + this.__type__ + \" id=\" + ul4._repr(this.id) + \" label=\" + ul4._repr(this.label) + \">\";\n\t}\n};\n\nAttachment.prototype._ul4onattrs = [\"id\", \"record\", \"label\", \"active\"];\nAttachment.prototype._ul4attrs = ul4._makeset(\"id\", \"record\", \"label\", \"active\");\n\nexport class NoteAttachment extends Attachment\n{\n\tstatic classdoc = \"A note attachment of a record\";\n\n};\n\nNoteAttachment.prototype.type = \"noteattachment\";\nNoteAttachment.prototype._ul4onattrs = Attachment.prototype._ul4onattrs.concat([\"value\"]);\nNoteAttachment.prototype._ul4attrs = ul4._makeset(...Attachment.prototype._ul4onattrs, \"value\");\n\nexport class URLAttachment extends Attachment\n{\n\tstatic classdoc = \"A URL attachment of a record\";\n\n};\n\nURLAttachment.prototype.type = \"urlattachment\";\nURLAttachment.prototype._ul4onattrs = Attachment.prototype._ul4onattrs.concat([\"value\"]);\nURLAttachment.prototype._ul4attrs = ul4._makeset(...Attachment.prototype._ul4onattrs, \"value\");\n\nexport class FileAttachment extends Attachment\n{\n\tstatic classdoc = \"A file attachment of a record\";\n\n};\n\nFileAttachment.prototype.type = \"fileattachment\";\nFileAttachment.prototype._ul4onattrs = Attachment.prototype._ul4onattrs.concat([\"value\"]);\nFileAttachment.prototype._ul4attrs = ul4._makeset(...Attachment.prototype._ul4onattrs, \"value\");\n\nexport class ImageAttachment extends Attachment\n{\n\tstatic classdoc = \"An image attachment of a record\";\n\n};\n\nImageAttachment.prototype.type = \"imageattachment\";\nImageAttachment.prototype._ul4onattrs = Attachment.prototype._ul4onattrs.concat([\"original\", \"thumb\", \"small\", \"medium\", \"large\"]);\nImageAttachment.prototype._ul4attrs = ul4._makeset(...Attachment.prototype._ul4onattrs, \"original\", \"thumb\", \"small\", \"medium\", \"large\");\n\nexport class JSONAttachment extends Attachment\n{\n\tstatic classdoc = \"A JSON attachment of a record\";\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"value\")\n\t\t\treturn ul4._asjson(this.value);\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = ul4._fromjson(value);\n\t\telse\n\t\t\tthis[name] = value\n\t}\n};\n\nJSONAttachment.prototype.type = \"jsonattachment\";\nJSONAttachment.prototype._ul4onattrs = Attachment.prototype._ul4onattrs.concat([\"value\"]);\nJSONAttachment.prototype._ul4attrs = ul4._makeset(...Attachment.prototype._ul4onattrs, \"value\");\n\nexport class Installation extends Base\n{\n\tstatic classdoc = \"The installation that created an app\";\n\n\t__repr__()\n\t{\n\t\treturn \"<Installation id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nInstallation.prototype._ul4onattrs = [\"id\", \"name\"];\nInstallation.prototype._ul4attrs = ul4._makeset(\"id\", \"name\");\n\nexport class Category extends Base\n{\n\tstatic classdoc = \"A navigation category\";\n\n\t__repr__()\n\t{\n\t\tlet v = [];\n\t\tlet category = this;\n\t\twhile (category !== null)\n\t\t{\n\t\t\tv.splice(0, 0, category.identifier);\n\t\t\tcategory = category.parent;\n\t\t}\n\t\treturn \"<Category id=\" + ul4._repr(this.id) + \" identifierpath=\" + ul4._repr(v.join(\"/\")) +  + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nCategory.prototype._ul4onattrs = [\"id\", \"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"];\nCategory.prototype._ul4attrs = ul4._makeset(\"id\", \"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\");\n\nexport class KeyView extends Base\n{\n\tstatic classdoc = \"Object granting access to a view template\";\n\n\t__repr__()\n\t{\n\t\treturn \"<KeyView id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nKeyView.prototype._ul4onattrs = [\"id\", \"identifier\", \"name\", \"key\", \"user\"];\nKeyView.prototype._ul4attrs = ul4._makeset(\"id\", \"identifier\", \"name\", \"key\", \"user\");\n\nexport class AppParameter extends Base\n{\n\tstatic classdoc = \"A parameter of a LivingApps application\";\n\n\t__repr__()\n\t{\n\t\treturn \"<AppParameter id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nAppParameter.prototype._ul4onattrs = [\"id\", \"app\", \"identifier\", \"description\", \"value\"];\nAppParameter.prototype._ul4attrs = ul4._makeset(\"id\", \"app\", \"identifier\", \"description\", \"value\");\n\nlet classes = [\n\tGlobals,\n\tFlashMessage,\n\tApp,\n\tView,\n\tDataSourceData,\n\tRecord,\n\tBoolControl,\n\tIntControl,\n\tNumberControl,\n\tTextControl,\n\tEmailControl,\n\tURLControl,\n\tTelControl,\n\tPasswordControl,\n\tTextAreaControl,\n\tDateControl,\n\tDatetimeMinuteControl,\n\tDatetimeSecondControl,\n\tLookupControl,\n\tLookupSelectControl,\n\tLookupRadioControl,\n\tLookupChoiceControl,\n\tAppLookupControl,\n\tAppLookupSelectControl,\n\tAppLookupRadioControl,\n\tAppLookupChoiceControl,\n\tMultipleLookupControl,\n\tMultipleLookupSelectControl,\n\tMultipleLookupCheckboxControl,\n\tMultipleLookupChoiceControl,\n\tMultipleAppLookupControl,\n\tMultipleAppLookupSelectControl,\n\tMultipleAppLookupCheckboxControl,\n\tMultipleAppLookupChoiceControl,\n\tGeoControl,\n\tFileControl,\n\tButtonControl,\n\tField,\n\tLookupItem,\n\tUser,\n\tFile,\n\tGeo,\n\tNoteAttachment,\n\tURLAttachment,\n\tFileAttachment,\n\tImageAttachment,\n\tJSONAttachment,\n\tInstallation,\n\tCategory,\n\tKeyView,\n\tAppParameter\n];\n\nfor (let constructor of classes)\n{\n\tul4.register(\"de.livinglogic.livingapi.\" + constructor.name.toLowerCase(), constructor);\n}\n"],"names":["Base","ul4","Proto","encoder","i","this","_ul4onattrs","length","dump","_dumpUL4ONAttr","name","decoder","iter","loadcontent","iteritem","next","done","_loadUL4ONAttr","value","_setDefaultUL4ONAttr","_ul4attrs","has","realvalue","bind","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","AttributeError","constructor","Handler","record","Globals","version","hostname","platform","user","lang","app","maxdbactions","maxtemplateruntime","flashmessages","handler","_repr","geo1","geo2","sqsin","x","Math","sin","sqcos","sqsos","cos","deg2rad","PI","flat","lat1","lat","long1","lat2","F","G","l","S","C","w","atan","sqrt","D","T","H2","prototype","_makeset","FlashMessage","type","title","App","id","values","__call__","globals","save","Record","_ismap","entries","key","fields","ArgumentError","get","_isobject","TypeError","startsWith","controls","substr","expose","insert","View","DataSourceData","identifier","createdat","createdby","updatedat","updatedby","updatecount","_sparsevalues","Map","_values","_fields","children","attachments","errors","_is_deleted","v","field","control","priority","push","join","_havemap","fieldvalue","set","Field","is_dirty","has_errors","search","fieldsearch","_bool","update","Control","subtype","BoolControl","_logsearch","operator","IntControl","NumberControl","minvalue","maxvalue","StringControl","toLowerCase","indexOf","TextControl","EmailControl","URLControl","TelControl","PasswordControl","TextAreaControl","concat","HTMLControl","DateControl","language","searchvalue","Object","toString","call","_format","formatstring","DatetimeMinuteControl","DatetimeSecondControl","LookupControl","LookupSelectControl","LookupRadioControl","LookupChoiceControl","AppLookupControl","AppLookupSelectControl","AppLookupRadioControl","AppLookupChoiceControl","MultipleLookupControl","MultipleLookupSelectControl","MultipleLookupCheckboxControl","MultipleLookupChoiceControl","MultipleAppLookupControl","MultipleAppLookupSelectControl","MultipleAppLookupCheckboxControl","MultipleAppLookupChoiceControl","GeoControl","FileControl","FileSignatureControl","ButtonControl","_value","_dirty","oldvalue","_ne","_islist","s","LookupItem","label","User","firstname","surname","email","File","url","filename","Geo","long","info","Attachment","__type__","NoteAttachment","URLAttachment","FileAttachment","ImageAttachment","JSONAttachment","_asjson","_fromjson","Installation","Category","category","splice","parent","KeyView","AppParameter","register"],"mappings":"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"}