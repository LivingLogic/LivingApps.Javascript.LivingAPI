{"version":3,"file":"livingapi.js","sources":["../../src/livingapi.js"],"sourcesContent":["/*!\n * LivingAPI JavaScript Library\n * https://my.living-apps.de/docs/LivingAPI.html\n *\n * Copyright 2017-2024 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2017-2024 by Walter Dörwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\nimport * as ul4 from '@livinglogic/ul4';\n\n\nexport function element(name, ...args)\n{\n\tlet dom_node = document.createElement(name);\n\tfor (let arg of args)\n\t{\n\t\tif (typeof(arg) === \"string\")\n\t\t\tdom_node.appendChild(document.createTextNode(arg));\n\t\tlet ismap = arg instanceof Map;\n\t\tlet isobject = ul4._isobject(arg);\n\t\tif (ismap || isobject)\n\t\t{\n\t\t\tif (isobject)\n\t\t\t\targ = Object.entries(arg);\n\t\t\tfor (let [name, value] of arg)\n\t\t\t{\n\t\t\t\tif (value !== null)\n\t\t\t\t\tdom_node.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t}\n\treturn dom_node;\n}\n\n\nfunction _append_param_to_url(urlparams, name, value)\n{\n\tif (ul4._islist(value) || ul4._isset(value))\n\t{\n\t\tfor (let v of value)\n\t\t\t_append_param_to_url(urlparams, name, v);\n\t}\n\telse if (typeof(value) === \"string\")\n\t\turlparams.append(name, value);\n\telse if (value !== null)\n\t\turlparams.append(name, ul4._str(value));\n}\n\nexport function url_with_params(url, ...params)\n{\n\tlet urlparams = new URLSearchParams();\n\n\tfor (let param of params)\n\t{\n\t\tif (ul4._islist(param) && param.length == 2)\n\t\t{\n\t\t\t_append_param_to_url(urlparams, ...param);\n\t\t}\n\t\telse if (Object.prototype.toString.call(param) === \"[object Object]\" && !(param instanceof ul4.Proto))\n\t\t{\n\t\t\tfor (let name in param)\n\t\t\t\t_append_param_to_url(urlparams, name, param[name]);\n\t\t}\n\t\telse if (param !== null && typeof(param) === \"object\" && typeof(param.__proto__) === \"object\" && param.__proto__ === Map.prototype)\n\t\t{\n\t\t\tfor (let [name, value] of param)\n\t\t\t\t_append_param_to_url(urlparams, name, value);\n\t\t}\n\t}\n\turlparams = urlparams.toString().replace(\"+\", \"%20\");\n\tif (urlparams.length > 0)\n\t\turl += \"?\" + urlparams;\n\treturn url;\n}\n\nexport class Base extends ul4.Proto\n{\n\tconstructor(id)\n\t{\n\t\tsuper();\n\t\tthis.id = id;\n\t}\n\n\tget ul4onid()\n\t{\n\t\treturn this.id;\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let i = 0; i < this._ul4onattrs.length; ++i)\n\t\t\tencoder.dump(this._dumpUL4ONAttr(this._ul4onattrs[i]));\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\treturn this[name];\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet i = 0;\n\t\tfor (let iter = decoder.loadcontent(); ; ++i)\n\t\t{\n\t\t\tlet iteritem = iter.next();\n\t\t\tif (iteritem.done)\n\t\t\t\tbreak;\n\t\t\tif (i < this._ul4onattrs.length)\n\t\t\t\tthis._loadUL4ONAttr(this._ul4onattrs[i], iteritem.value);\n\t\t}\n\t\tfor (; i < this._ul4onattrs.length; ++i)\n\t\t\tthis._setDefaultUL4ONAttr(this._ul4onattrs[i]);\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tthis[name] = value;\n\t}\n\n\t_setDefaultUL4ONAttr(name)\n\t{\n\t\tthis[name] = null;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (this._ul4attrs.has(name))\n\t\t{\n\t\t\tlet value = this[name];\n\t\t\tif (typeof(value) === \"function\")\n\t\t\t{\n\t\t\t\tlet realvalue = value.bind(this);\n\t\t\t\trealvalue._ul4_name = value._ul4_name || value.name;\n\t\t\t\trealvalue._ul4_signature = value._ul4_signature;\n\t\t\t\trealvalue._ul4_needsobject = value._ul4_needsobject;\n\t\t\t\trealvalue._ul4_needscontext = value._ul4_needscontext;\n\t\t\t\treturn realvalue;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t\telse if (name.startsWith(\"x_\"))\n\t\t{\n\t\t\treturn this.hasOwnProperty(name) ? this[name] : null;\n\t\t}\n\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name.startsWith(\"x_\"))\n\t\t{\n\t\t\tthis[name] = value;\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n};\n\n\nexport class Handler\n{\n\tsave(record)\n\t{\n\t}\n\n\tdelete(record)\n\t{\n\t}\n};\n\n\nclass GlobalsType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Globals;\n\t}\n};\n\nlet globalstype = new GlobalsType(\"la\", \"Globals\", \"Global information\");\n\n\nexport class Globals extends Base\n{\n\tconstructor(id)\n\t{\n\t\tsuper(id);\n\t\tthis.version = null;\n\t\tthis.hostname = null;\n\t\tthis.platform = null;\n\t\tthis.user = null;\n\t\tthis.lang = null;\n\t\tthis.datasources = null;\n\t\tthis.app = null;\n\t\tthis.record = null;\n\t\tthis.mode = null;\n\t\tthis.groups = null;\n\t\tthis.maxdbactions = null;\n\t\tthis.maxtemplateruntime = null;\n\t\tthis.flashmessages = null;\n\t\tthis.view_template_id = null;\n\t\tthis.email_template_id = null;\n\t\tthis.handler = new Handler();\n\t\tthis._log_stack = [];\n\t\tthis._current_geo = null;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn globalstype;\n\t}\n\n\t// distance between two geo coordinates (see https://de.wikipedia.org/wiki/Orthodrome#Genauere_Formel_zur_Abstandsberechnung_auf_der_Erde)\n\tdist(geo1, geo2)\n\t{\n\t\tlet sqsin = function sqsin(x) {x = Math.sin(x); return x*x};\n\t\tlet sqcos = function sqsos(x) {x = Math.cos(x); return x*x};\n\t\tconst deg2rad = Math.PI/180; // Conversion factor degree -> radians\n\t\tconst radius = 6378.137; // Equatorial radius of earth in km\n\t\tconst flat = 1/298.257223563; // Earth flattening\n\n\t\tconst lat1 = geo1.lat * deg2rad;\n\t\tconst long1 = geo1.long * deg2rad;\n\t\tconst lat2 = geo2.lat * deg2rad;\n\t\tconst long2 = geo2.long * deg2rad;\n\t\tconst F = (lat1 + lat2)/2;\n\t\tconst G = (lat1 - lat2)/2;\n\t\tconst l = (long1 - long2)/2;\n\t\tconst S = sqsin(G) * sqcos(l) + sqcos(F) * sqsin(l);\n\t\tconst C = sqcos(G) * sqcos(l) + sqsin(F) * sqsin(l);\n\t\tconst w = Math.atan(Math.sqrt(S/C));\n\t\tconst D = 2 * w * radius;\n\t\tif (D === 0.0)\n\t\t\t/* The \"correction\" calculation below would fail if the raw distance is 0 */\n\t\t\treturn D;\n\t\tconst T = Math.sqrt(S*C)/w;\n\t\tconst H1 = (3*T-1)/(2*C);\n\t\tconst H2 = (3*T+1)/(2*S);\n\t\tconst s = D * (1 + flat * H1 * sqsin(F) * sqcos(G) - flat * H2 * sqcos(F) * sqsin(G));\n\t\treturn s;\n\t}\n\n\tscaled_url(image, width, height, type=\"fill\", enlarge=true, gravity=\"sm\", quality=null, rotate=null, blur=null, sharpen=null, format=null, cache=true)\n\t{\n\t\tlet filename = null;\n\n\t\tif (image instanceof File)\n\t\t{\n\t\t\timage = image.archive_url;\n\t\t\tfilename = encodeURIComponent(image.filename);\n\t\t\tif (filename != image.filename)\n\t\t\t\tfilename = null;\n\t\t}\n\n\t\tlet result = \"https://\" + this.hostname;\n\n\t\tif (cache)\n\t\t\tresult += \"/imgproxycache/insecure\";\n\t\telse\n\t\t\tresult += \"/imgproxy/insecure\";\n\n\t\tif (type !== \"fit\")\n\t\t\tresult += \"/rt:\" + type;\n\n\t\tif (width !== null && width !== undefined)\n\t\t\tresult += \"/w:\" + width;\n\n\t\tif (height !== null && height !== undefined)\n\t\t\tresult += \"/h:\" + height;\n\n\t\tif (enlarge)\n\t\t\tresult += \"/el:1\";\n\n\t\tif (gravity !== null && gravity !== undefined)\n\t\t\tresult += \"/g:\" + gravity;\n\n\t\tif (quality !== null && quality !== undefined)\n\t\t\tresult += \"/q:\" + quality;\n\n\t\tif (rotate !== null && rotate % 360 != 0)\n\t\t\tresult += \"/rot:\" + rotatet;\n\n\t\tif (blur !== null && blur !== undefined)\n\t\t\tresult += \"/bl:\" + blur;\n\n\t\tif (sharpen !== null && sharpen !== undefined)\n\t\t\tresult += \"/sh:\" + sharpen;\n\n\t\tif (format !== null && format !== undefined)\n\t\t\tresult += \"/f:\" + format;\n\n\t\tif (filename !== null && filename !== undefined)\n\t\t\tresult += \"/fn:\" + filename;\n\n\t\tresult += \"/plain/\" + encodeURIComponent(image);\n\n\t\treturn result;\n\t}\n\n\tqrcode_url(data, size)\n\t{\n\t\treturn \"https://\" + this.hostname + \"/qr/generate?data=\" + encodeURIComponent(data) + \"&size=\" + encodeURIComponent(size);\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Globals version=\" + ul4._repr(this.version) + \" mode=\" + ul4._repr(this.mode) + \">\";\n\t}\n\n\tcurrent_geo()\n\t{\n\t\treturn this._current_geo;\n\t}\n\n\tset_current_geo(position)\n\t{\n\t\tthis._current_geo = new Geo(this, position.coords.latitude, position.coords.longitude);\n\t}\n\n\t_in_form()\n\t{\n\t\treturn this.mode !== null && this.mode.startsWith(\"form/\");\n\t}\n\n\tmsg_bool(value)\n\t{\n\t\tswitch (value)\n\t\t{\n\t\t\tcase true:\n\t\t\t\treturn this.msg_bool_true();\n\t\t\tcase false:\n\t\t\t\treturn this.msg_bool_false();\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tmsg_bool_true(value)\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"Ja\";\n\t\t\tdefault:\n\t\t\t\treturn \"Yes\";\n\t\t}\n\t}\n\n\tmsg_bool_false(value)\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"Nein\";\n\t\t\tdefault:\n\t\t\t\treturn \"No\";\n\t\t}\n\t}\n\n\tmsg_no_fields()\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"(Keine Felder gefunden)\";\n\t\t\tdefault:\n\t\t\t\treturn \"(No fields found)\";\n\t\t}\n\t}\n\n\tmsg_nothing_selected()\n\t{\n\t\tswitch (this.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn \"(Nichts ausgewählt)\";\n\t\t\tdefault:\n\t\t\t\treturn \"(Nothing selected)\";\n\t\t}\n\t}\n\n\t_make_log_message(messages)\n\t{\n\t\treturn messages\n\t\t\t.map(m => typeof(m) !== \"string\" ? ul4._repr(m) : m)\n\t\t\t.join(\" \")\n\t\t;\n\t}\n\n\tbegin_logging(header)\n\t{\n\t\tthis._log_stack.push({header: header, output: false});\n\t}\n\n\tend_logging()\n\t{\n\t\tif (this._log_stack)\n\t\t{\n\t\t\tif (this._log_stack[this._log_stack.length-1].output && console && console.groupEnd)\n\t\t\t\tconsole.groupEnd();\n\t\t\tthis._log_stack.pop();\n\t\t}\n\t}\n\n\tgroup_logging(header, callback)\n\t{\n\t\tthis.begin_logging(header);\n\t\ttry\n\t\t{\n\t\t\tcallback();\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.end_logging();\n\t\t}\n\t}\n\n\t_start_log_message()\n\t{\n\t\tfor (let level of this._log_stack)\n\t\t{\n\t\t\tif (!level.output)\n\t\t\t{\n\t\t\t\tif (console && console.group)\n\t\t\t\t\tconsole.group(level.header)\n\t\t\t\tlevel.output = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tlog_debug(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.debug)\n\t\t\tconsole.debug(this._make_log_message(message));\n\t}\n\n\tlog_info(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.info)\n\t\t\tconsole.info(this._make_log_message(message));\n\t}\n\n\tlog_warning(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.warn)\n\t\t\tconsole.warn(this._make_log_message(message));\n\t}\n\n\tlog_error(message)\n\t{\n\t\tthis._start_log_message();\n\t\tif (console && console.error)\n\t\t\tconsole.error(this._make_log_message(message));\n\t}\n\n\tmy_apps_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/apps.htm\";\n\t}\n\n\tmy_tasks_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/xist4c/web/aufgaben_id_393_.htm\";\n\t}\n\n\tcatalog_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/katalog/home.htm\";\n\t}\n\n\tchats_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/chats.htm\";\n\t}\n\n\tprofile_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/profil/index.htm\";\n\t}\n\n\taccount_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/account.htm\";\n\t}\n\n\tlogout_url()\n\t{\n\t\treturn \"https://\" + this.hostname + \"/login.htm?logout=standardCug\";\n\t}\n};\n\nGlobals.prototype._ul4onattrs = [\"version\", \"platform\", \"user\", \"maxdbactions\", \"maxtemplateruntime\", \"lang\", \"datasources\", \"hostname\", \"app\", \"record\", \"mode\", \"view_template_id\", \"email_template_id\", \"view_id\"];\nGlobals.prototype._ul4attrs = new Set([\"id\", \"version\", \"hostname\", \"platform\", \"mode\", \"form\", \"app\", \"record\", \"datasources\", \"externaldatasources\", \"groups\", \"user\", \"lang\", \"templates\", \"pparams\", \"geo\", \"dist\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"scaled_url\", \"qrcode_url\", \"current_geo\", \"log_debug\", \"log_info\", \"log_warning\", \"log_error\", \"my_apps_url\", \"my_tasks_url\", \"catalog_url\", \"chats_url\", \"profile_url\", \"account_url\", \"logout_url\"]);\nul4.expose(Globals.prototype.log_debug, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_info, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_warning, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.log_error, [\"message\", \"*\"]);\nul4.expose(Globals.prototype.dist, [\"geo1\", \"pk\", \"geo2\", \"pk\"]);\nul4.expose(Globals.prototype.current_geo, []);\nul4.expose(Globals.prototype.scaled_url, [\n\t\"image\", \"p\",\n\t\"width\", \"p\",\n\t\"height\", \"p\",\n\t\"type\", \"k=\", \"fill\",\n\t\"enlarge\", \"k=\", true,\n\t\"gravity\", \"k=\", \"sm\",\n\t\"quality\", \"k=\", null,\n\t\"rotate\", \"k=\", null,\n\t\"blur\", \"k=\", null,\n\t\"sharpen\", \"k=\", null,\n\t\"format\", \"k=\", null,\n\t\"cache\", \"k=\", true\n]);\n\n\nclass FlashMessageType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FlashMessage;\n\t}\n};\n\nlet flashmessagetype = new FlashMessageType(\"la\", \"FlashMessage\", \"A flash message in a web page\");\n\n\nexport class FlashMessage extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn flashmessagetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<FlashMessage type=\" + ul4._repr(this.type) + \" title=\" + ul4._repr(this.title) + \">\";\n\t}\n};\n\nFlashMessage.prototype._ul4onattrs = [\"timestamp\", \"type\", \"title\", \"message\"];\nFlashMessage.prototype._ul4attrs = new Set([\"timestamp\", \"type\", \"title\", \"message\"]);\n\n\nclass AppType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof App;\n\t}\n};\n\nlet apptype = new AppType(\"la\", \"App\", \"A LivingApps application\");\n\n\nexport class App extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn apptype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<App id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n\n\t/* For backwards compatibility */\n\tget group()\n\t{\n\t\treturn this.appgroup;\n\t}\n\n\tinsert(values={})\n\t{\n\t\tlet record = this[ul4.symbols.call](values);\n\t\tthis.globals.handler.save(this);\n\t\treturn record;\n\t}\n\n\ttemplate_url(identifier, record=null, params)\n\t{\n\t\tlet url = \"https://\" + this.globals.hostname + \"/gateway/apps/\" + this.id;\n\t\tif (record !== null)\n\t\t\turl += \"/\" + record.id;\n\t\treturn url_with_params(url, ['template', identifier], params);\n\t}\n\n\tnew_embedded_url(params)\n\t{\n\t\tlet url = \"https://\" + this.globals.hostname + \"/dateneingabe/\" + this.id + \"/new\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\tnew_standalone_url(params)\n\t{\n\t\tlet url = \"https://\" + this.globals.hostname + \"/gateway/apps/\" + this.id + \"/new\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\thome_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/apps/\" + this.id + \".htm\";\n\t}\n\n\tdatamanagement_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/_id_36_.htm?uuid=\" + this.id + \"&dId=\" + this.id + \"&resetInfo=true&templateIdentifier=created_\" + this.id;\n\t}\n\n\timport_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/import-export/\"+ this.id + \".htm\";\n\t}\n\n\ttasks_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/_id_1073_.htm?uuid=\" + this.id + \"&dId=\" + this.id + \"&p_tpl_uuid=\" + this.id + \"&resetInfo=true&templateIdentifier=created_task_\" + this.id;\n\t}\n\n\t// formbuilder_url()\n\t// {\n\t// \tlet lang = this.globals.lang\n\t// \tif (!lang)\n\t// \t\tlang = \"de\"\n\t// \tlet tpl_id = \"???\"\n\t// \tlet cl_id = \"???\"\n\t// \treturn \"https://\" + this.globals.hostname + \"/formbuilder/index.html?lang=\" + lang + \"&searchDescription=\" + tpl_id + \"&p_tpl_uuid=\" + this.id + \"&p_cl_id=\" + cl_id;\n\t// }\n\n\t// tasks_config_url()\n\t// {\n\t// \tlet tpl_id = \"???\"\n\t// \treturn \"https://\" + this.globals.hostname + \"/konfiguration/aufgaben.htm?com.livinglogic.cms.apps.search.model.SearchState.search_submit=true&searchDescription=\" + tpl_id + \"&dId=\" + this.id;\n\t// }\n\n\tdatamanagement_config_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/datenmanagement-konfigurieren/\" + this.id + \".htm\";\n\t}\n\n\tpermissions_url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/_id_833_.htm?uuid=\" + this.id + \"&dId=\" + this.id + \"&resetInfo=true\";\n\t}\n\n\tdatamanageview_url(identifier)\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/_id_36_.htm?uuid=\" + this.id + \"&dId=\" + this.id + \"&resetInfo=true&templateIdentifier=created_\" + this.id + \"_datamanage_master_\" + identifier;\n\t}\n\n\tget layout_controls()\n\t{\n\t\tif (this.active_view === null)\n\t\t\treturn new Map();\n\t\treturn this.active_view.layout_controls;\n\t}\n\n\t[ul4.symbols.call](values={})\n\t{\n\t\tlet record = new Record(null, this);\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let identifier of values.keys())\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, values, null, null);\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let identifier in values)\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, new Map(ul4._list(ul4.dicttype.items(values))), null, null);\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\t\treturn record;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t{\n\t\t\tif (!this.controls.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.controls.get(name.substr(2));\n\t\t}\n\t\telse if (name.startsWith(\"lc_\"))\n\t\t{\n\t\t\tif (this.layout_controls === null || !this.layout_controls.has(name.substr(3)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.layout_controls.get(name.substr(3));\n\t\t}\n\t\telse if (name.startsWith(\"p_\"))\n\t\t{\n\t\t\tlet identifier = name.substr(2);\n\t\t\tif (this.params !== null && this.params.has(identifier))\n\t\t\t\treturn this.params.get(identifier);\n\t\t\telse if (this.appgroup !== null && this.appgroup.params !== null && this.appgroup.params.has(identifier))\n\t\t\t\treturn this.appgroup.params.get(identifier);\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t}\n\t\telse if (name.startsWith(\"pv_\"))\n\t\t{\n\t\t\tlet identifier = name.substr(3);\n\t\t\tif (this.params !== null && this.params.has(identifier))\n\t\t\t\treturn this.params.get(identifier).value;\n\t\t\telse if (this.appgroup !== null && this.appgroup.params !== null && this.appgroup.params.has(identifier))\n\t\t\t\treturn this.appgroup.params.get(identifier).value;\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t}\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n\n\tget active_view()\n\t{\n\t\treturn this._active_view;\n\t}\n\n\tset active_view(view)\n\t{\n\t\tif (view === null)\n\t\t\t;\n\t\telse if (typeof(view) === \"string\")\n\t\t{\n\t\t\tif (this.views !== null && this.views.has(view))\n\t\t\t\tview = this.views.get(view);\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" not found!\");\n\t\t}\n\t\telse if (view instanceof View)\n\t\t{\n\t\t\tif (view.app === this)\n\t\t\t\t;\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" belongs to the wrong app!\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new ul4.TypeError(ul4._repr(view) + \" is not a view!\");\n\t\t}\n\n\t\tthis._active_view = view;\n\t}\n\n\tget layout_controls()\n\t{\n\t\tif (this.active_views === null)\n\t\t\treturn new Map();\n\t\treturn this.active_view.layout_controls;\n\t}\n};\n\n\nApp.prototype._ul4onattrs = [\"globals\", \"name\", \"description\", \"lang\", \"appgroup\", \"gramgen\", \"typename_nom_sin\", \"typename_gen_sin\", \"typename_dat_sin\", \"typename_acc_sin\", \"typename_nom_plu\", \"typename_gen_plu\", \"typename_dat_plu\", \"typename_acc_plu\",\n\t\"startlink\", \"image\", \"createdby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"basetable\", \"primarykey\", \"insertprocedure\", \"updateprocedure\", \"deleteprocedure\", \"templates\", \"createdat\", \"updatedat\", \"updatedby\", \"superid\", \"favorite\", \"_active_view\", \"datasource\", \"main\", \"viewtemplates\"];\nApp.prototype._ul4attrs = new Set([\"id\", \"globals\", \"name\", \"description\", \"lang\", \"appgroup\", \"group\", \"main\", \"gramgen\", \"typename_nom_sin\", \"typename_gen_sin\", \"typename_dat_sin\", \"typename_acc_sin\", \"typename_nom_plu\", \"typename_gen_plu\", \"typename_dat_plu\", \"typename_acc_plu\", \"startlink\", \"image\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"controls\", \"layout_controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"menus\", \"panels\", \"datasource\", \"datamanagement_identifier\", \"insert\", \"favorite\", \"_active_view\", \"template_url\", \"new_embedded_url\", \"new_standalone_url\", \"home_url\", \"datamanagement_url\", \"import_url\", \"tasks_url\", /*\"formbuilder_url\", \"tasks_config_url\",*/ \"datamanagement_config_url\", \"permissions_url\", \"datamanageview_url\"]);\nul4.expose(App.prototype[ul4.symbols.call], [\"values\", \"**\"], {\"needsobject\": true});\nul4.expose(App.prototype.insert, [\"values\", \"**\"], {\"needsobject\": true});\nul4.expose(App.prototype.template_url, [\"identifier\", \"p\", \"record\", \"p=\", null, \"params\", \"**\"]);\nul4.expose(App.prototype.new_embedded_url, [\"params\", \"**\"]);\nul4.expose(App.prototype.new_standalone_url, [\"params\", \"**\"]);\n\n\nclass AppGroupType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppGroup;\n\t}\n};\n\nlet appgrouptype = new AppType(\"la\", \"AppGroup\", \"A group of LivingApps\");\n\n\nexport class AppGroup extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn appgrouptype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<AppGroup id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\nAppGroup.prototype._ul4onattrs = [\"globals\", \"name\", \"apps\", \"main_app\", \"params\"];\nAppGroup.prototype._ul4attrs = new Set([\"globals\", \"id\", \"name\", \"apps\", \"main_app\", \"params\"]);\n\n\nclass ViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof View;\n\t}\n};\n\nlet viewtype = new ViewType(\"la\", \"View\", \"An input form for a LivingViews application\");\n\n\nexport class View extends Base\n{\n\tget globals()\n\t{\n\t\treturn this.app.globals;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<View id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nView.prototype._ul4onattrs = [\"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\", \"login_required\", \"result_page\", \"use_geo\"];\nView.prototype._ul4attrs = new Set([\"id\", \"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\", \"login_required\", \"result_page\", \"use_geo\"]);\n\n\nclass DataSourceType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DataSource;\n\t}\n};\n\nlet datasourcetype = new DataSourceType(\"la\", \"DataSource\", \"The data resulting from a data source configuration\");\n\n\nexport class DataSource extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datasourcetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<DataSource id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nDataSource.prototype._ul4onattrs = [\"identifier\", \"app\", \"apps\"];\nDataSource.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"app\", \"apps\"]);\n\n\nclass DataSourceChildrenType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DataSourceChildren;\n\t}\n};\n\nlet datasourcechildrentype = new DataSourceChildrenType(\"la\", \"DataSourceChildren\", \"A master/detail specification in a data source\");\n\n\nexport class DataSourceChildren extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datasourcetypechildren;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<DataSourceChildren id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nDataSourceChildren.prototype._ul4onattrs = [\"datasource\", \"identifier\", \"control\"];\nDataSourceChildren.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"datasource\", \"control\"]);\n\n\nclass RecordChildrenType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof RecordChildren;\n\t}\n};\n\nlet recordchildrentype = new RecordChildrenType(\"la\", \"RecordChildren\", \"The child records of a master record\");\n\n\nexport class RecordChildren extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn recordchildrentype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<RecordChildren id=\" + ul4._repr(this.id) + \">\";\n\t}\n};\n\nRecordChildren.prototype._ul4onattrs = [\"record\", \"datasourcechildren\", \"records\"];\nRecordChildren.prototype._ul4attrs = new Set([\"id\", \"record\", \"datasourcechildren\", \"records\"]);\n\n\nclass RecordType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Record;\n\t}\n};\n\nlet recordtype = new RecordType(\"la\", \"Record\", \"A record of a LivingApp application\");\n\n\nexport class Record extends Base\n{\n\tconstructor(id, app)\n\t{\n\t\tsuper(id);\n\t\tthis.app = app;\n\t\tthis.createdat = null;\n\t\tthis.createdby = null;\n\t\tthis.updatedat = null;\n\t\tthis.updatedby = null;\n\t\tthis.updatecount = 0;\n\t\tthis._sparsevalues = new Map();\n\t\tthis._values = null;\n\t\tthis._fields = null;\n\t\tthis.details = new Map();\n\t\tthis._children = null;\n\t\tthis.attachments = null;\n\t\tthis.errors = [];\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparsefieldlookupdata = null;\n\t\tthis._is_deleted = false;\n\t\tthis._is_new = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn recordtype;\n\t}\n\n\tas_text(maxlevel=3, controls=null)\n\t{\n\t\tif (maxlevel == 0)\n\t\t\treturn \"...\";\n\t\tlet fields = [];\n\t\tfor (let [identifier, control] of (controls || this.app.controls))\n\t\t{\n\t\t\tif (controls !== null || control.priority)\n\t\t\t{\n\t\t\t\tlet fieldvalue = this.fields.get(identifier).value_as_text(maxlevel-1);\n\t\t\t\tif (fieldvalue !== null)\n\t\t\t\t\tfields.push([control.label, fieldvalue]);\n\t\t\t}\n\t\t}\n\t\tif (fields.length === 0)\n\t\t\treturn this.globals.msg_no_fields();\n\t\telse if (fields.length === 1)\n\t\t\treturn fields[0][1];\n\t\tlet result = [];\n\t\tfor (let [label, fieldvalue] of fields)\n\t\t\tresult.push(label + \": \" + fieldvalue);\n\t\treturn result.join(\", \");\n\t}\n\n\t_make_fields(defaults, values, errors, lookupdata)\n\t{\n\t\tlet fields = new Map();\n\n\t\tfor (let control of this.app.controls.values())\n\t\t{\n\t\t\tlet identifier = control.identifier;\n\t\t\tlet value = null;\n\t\t\tif (values !== null)\n\t\t\t{\n\t\t\t\tif (defaults && !values.has(identifier))\n\t\t\t\t\tvalue = control.default;\n\t\t\t\telse if (values.has(identifier))\n\t\t\t\t\tvalue = values.get(identifier);\n\t\t\t}\n\t\t\tlet field = new control.fieldtype(control, this, value);\n\t\t\tfields.set(identifier, field);\n\t\t\tif (errors !== null && errors.has(identifier))\n\t\t\t\tfield.errors = errors.get(identifier);\n\t\t\tif (lookupdata !== null && lookupdata.has(identifier))\n\t\t\t\tfield.lookupdata = lookupdata.get(identifier);\n\t\t}\n\n\t\tthis._fields = fields;\n\t\tthis._sparsevalues = null;\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparselookupdata = null;\n\t}\n\n\t_in_form()\n\t{\n\t\tlet globals = this.app.globals;\n\n\t\treturn globals._in_form() && this === globals.record;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [\"<Record id=\", ul4._repr(this.id)];\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.control.priority && !field.is_empty())\n\t\t\t{\n\t\t\t\tv.push(\" v_\");\n\t\t\t\tv.push(field.control.identifier);\n\t\t\t\tv.push(\"=\");\n\t\t\t\tv.push(ul4._repr(field.value)); // FIXME: This might lead to infinite recursions\n\t\t\t}\n\t\t}\n\t\tv.push(\" state=\");\n\t\tv.push(ul4._repr(this.state));\n\t\tv.push(\">\");\n\t\treturn v.join(\"\");\n\t}\n\n\tget state()\n\t{\n\t\tif (this._is_deleted)\n\t\t\treturn \"deleted\";\n\t\telse if (this._is_new)\n\t\t\treturn \"new\";\n\t\telse if (this.is_dirty())\n\t\t\treturn \"dirty\";\n\t\telse\n\t\t\treturn \"saved\";\n\t}\n\n\tget values()\n\t{\n\t\tif (this._values === null)\n\t\t{\n\t\t\tthis._values = new Map();\n\t\t\tfor (let field of this.fields.values())\n\t\t\t{\n\t\t\t\tthis._values.set(field.control.identifier, field.value);\n\t\t\t}\n\t\t}\n\t\treturn this._values;\n\t}\n\n\tget fields()\n\t{\n\t\tif (this._fields === null)\n\t\t\tthis._make_fields(false, this._sparsevalues, this._sparsefielderrors, this._sparsefieldlookupdata)\n\t\treturn this._fields;\n\t}\n\n\tget children()\n\t{\n\t\tif (this._children === null)\n\t\t{\n\t\t\tthis._children = new Map();\n\t\t\tfor (const recordchildren of this.details.values())\n\t\t\t{\n\t\t\t\tthis._children.set(recordchildren.datasourcechildren.identifier, recordchildren.records);\n\t\t\t}\n\t\t}\n\t\treturn this._children;\n\t}\n\n\tis_dirty()\n\t{\n\t\tif (this.id === null)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.is_dirty())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\thas_errors()\n\t{\n\t\tif (this.errors.length !== 0)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.has_errors())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\tlet result = this.app.globals.handler.delete(this);\n\t\tthis._is_deleted = true;\n\t\treturn result;\n\t}\n\n\tsave()\n\t{\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tupdate(values={})\n\t{\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let [key, value] of values.entries())\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\tfields.get(key).value = value;\n\t\t\t}\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let key in values)\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = values[key];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\ttemplate_url(identifier, params)\n\t{\n\t\tlet url = \"https://\" + this.app.globals.hostname + \"/gateway/apps/\" + this.app.id + \"/\" + this.id;\n\t\treturn url_with_params(url, ['template', identifier], params);\n\t}\n\n\tedit_embedded_url(params)\n\t{\n\t\tlet url = \"https://\" + this.app.globals.hostname + \"/dateneingabe/\" + this.app.id + \"/\" + this.id + \"/edit\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\tedit_standalone_url(params)\n\t{\n\t\tlet url = \"https://\" + this.app.globals.hostname + \"/gateway/apps/\" + this.app.id + \"/\" + this.id + \"/edit\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\tedit_url(params)\n\t{\n\t\treturn this.app[ul4.symbols.getattr](\"pv_la_default_form_variant\") === \"standalone\" ? this.edit_standalone_url(params) : this.edit_embedded_url(params);\n\t}\n\n\tdisplay_embedded_url(params)\n\t{\n\t\tlet url = \"https://\" + this.app.globals.hostname + \"/dateneingabe/\" + this.app.id + \"/\" + this.id + \"/display\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\tdisplay_standalone_url(params)\n\t{\n\t\tlet url = \"https://\" + this.app.globals.hostname + \"/gateway/apps/\" + this.app.id + \"/\" + this.id + \"/display\";\n\t\treturn url_with_params(url, params);\n\t}\n\n\tdisplay_url(params)\n\t{\n\t\treturn this.app[ul4.symbols.getattr](\"pv_la_default_form_variant\") === \"standalone\" ? this.display_standalone_url(params) : this.display_embedded_url(params);\n\t}\n\n\tsearch(search)\n\t{\n\t\tfor (let identifier in search)\n\t\t{\n\t\t\tlet fieldsearch = search[identifier];\n\t\t\tif (ul4._bool(fieldsearch))\n\t\t\t{\n\t\t\t\tif (!this.fields.get(identifier).search(fieldsearch))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._is_new = false;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"values\")\n\t\t\treturn this._sparsevalues;\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"values\")\n\t\t{\n\t\t\tthis._sparsevalues = value;\n\t\t\tthis._values = null;\n\t\t\tthis._fields = null;\n\t\t}\n\t\telse\n\t\t\tthis[name] = value;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t{\n\t\t\treturn this.children.get(name.substr(2))\n\t\t}\n\t\telse if (name.startsWith(\"d_\"))\n\t\t\treturn this.details.get(name.substr(2))\n\t\telse if (name.startsWith(\"f_\"))\n\t\t\treturn this.fields.get(name.substr(2))\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\treturn this.fields.get(name.substr(2)).value\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\tthis.children[name.substr(2)] = value;\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\tthis.fields.get(name.substr(2)).value = value;\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\n\nRecord.prototype._ul4onattrs = [\"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"_sparsevalues\", \"attachments\", \"details\", \"errors\", \"_sparsefielderrors\", \"_sparsefieldlookupdata\"];\nRecord.prototype._ul4attrs = new Set([\"id\", \"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"values\", \"fields\", \"attachments\", \"details\", \"children\", \"errors\", \"template_url\", \"edit_embedded_url\", \"edit_standalone_url\"]);\nul4.expose(Record.prototype.is_dirty, []);\nul4.expose(Record.prototype.has_errors, []);\nul4.expose(Record.prototype.delete, []);\nul4.expose(Record.prototype.save, []);\nul4.expose(Record.prototype.update, [\"values\", \"**\"], {\"needsobject\": true});\nul4.expose(Record.prototype.template_url, [\"identifier\", \"p\", \"params\", \"**\"]);\nul4.expose(Record.prototype.edit_embedded_url, [\"params\", \"**\"]);\nul4.expose(Record.prototype.edit_standalone_url, [\"params\", \"**\"]);\n\n\nclass FieldType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Field;\n\t}\n};\n\nlet fieldtype = new FieldType(\"la\", \"Field\", \"Holds the value of a field of a record (and related information)\");\n\n\nexport class Field extends Base\n{\n\tconstructor(control, record, value)\n\t{\n\t\tsuper(null);\n\t\tthis.control = control;\n\t\tthis.record = record;\n\t\tthis._label = null;\n\t\tthis._description = null;\n\t\tthis._lookupdata = null;\n\t\tthis.errors = [];\n\t\tthis._value = null;\n\t\tif (!this._in_form())\n\t\t\tthis.value = value;\n\t\tthis._dirty = false;\n\t\tthis._enabled = true;\n\t\tthis._writable = true;\n\t\tthis._visible = true;\n\t\tthis._required = null;\n\t\tthis._in_text = null;\n\t\tthis._top = null;\n\t\tthis._left = null;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fieldtype;\n\t}\n\n\tget value()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn this._get_dom_value();\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tlet oldvalue = this._value;\n\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\n\t\tif (ul4._ne(oldvalue, change.value))\n\t\t{\n\t\t\tif (this.record._values !== null)\n\t\t\t\tthis.record._values.set(this.control.identifier, change.value);\n\t\t\tthis._value = change.value;\n\t\t\tthis._dirty = true;\n\t\t}\n\t\tthis.errors = change.errors;\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_value(this._value);\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\treturn null;\n\t}\n\n\t_validate(change)\n\t{\n\t\t// Do nothing, i.e. accept the value unchanged and without errors\n\t}\n\n\t_set_dom_label()\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._dom_label.textContent = this.label;\n\t}\n\n\tget mode()\n\t{\n\t\treturn this._mode ?? this.control.mode;\n\t}\n\n\tset mode(value)\n\t{\n\t\tthis._mode = value;\n\t}\n\n\tget label()\n\t{\n\t\treturn this._label ?? this.control.label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t\tthis._set_dom_label();\n\t}\n\n\tget description()\n\t{\n\t\treturn this._description ?? this.control.description;\n\t}\n\n\tset description(value)\n\t{\n\t\tthis._description = value;\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.control.globals;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value === null;\n\t}\n\n\tis_dirty()\n\t{\n\t\treturn this._dirty;\n\t}\n\n\thas_errors()\n\t{\n\t\treturn this.errors.length !== 0;\n\t}\n\n\tadd_error(error)\n\t{\n\t\tthis.errors.push(error);\n\t}\n\n\tset_error(error)\n\t{\n\t\tif (error !== null)\n\t\t\tthis.errors = [error];\n\t\telse\n\t\t\tthis.errors = [];\n\t}\n\n\tget top()\n\t{\n\t\treturn this._top ?? this.control.top;\n\t}\n\n\tset top(value)\n\t{\n\t\tthis._top = value;\n\t\tif (this._in_form())\n\t\t\tthis._dom_root.style.top = this.top + \"px\";\n\t}\n\n\tget left()\n\t{\n\t\treturn this._left ?? this.control.left;\n\t}\n\n\tset left(value)\n\t{\n\t\tthis._left = value;\n\t\tif (this._in_form())\n\t\t\tthis._dom_root.style.left = this.left + \"px\";\n\t}\n\n\tget width()\n\t{\n\t\treturn this.control.width;\n\t}\n\n\tget height()\n\t{\n\t\treturn this.control.width;\n\t}\n\n\tsearch(searchvalue)\n\t{\n\t\treturn this.control.search(this.value, searchvalue);\n\t}\n\n\tmsg_field_required(value)\n\t{\n\t\tswitch (this.globals.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn `\"${this.label}\" wird benötigt!`;\n\t\t\tdefault:\n\t\t\t\treturn `\"${this.label}\" is required!`;\n\t\t}\n\t}\n\n\tmsg_field_wrong_type(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support the type ${ul4._type(value).name}!`;\n\t}\n\n\tmsg_bool_truerequired(value)\n\t{\n\t\treturn `\"${this.label}\" only accepts \"Yes\"!`;\n\t}\n\n\tmsg_string_tooshort(value)\n\t{\n\t\treturn `\"${this.label}\" is too short. You must use at least ${this.control.minlength} characters!`;\n\t}\n\n\tmsg_string_toolong(value)\n\t{\n\t\treturn `\"${this.label}\" is too long. You may use at most ${this.control.maxlength} characters!`;\n\t}\n\n\tmsg_email_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid email address!`;\n\t}\n\n\tmsg_url_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid URL!`;\n\t}\n\n\tmsg_tel_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid phone number!`;\n\t}\n\n\tmsg_date_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this date format!`;\n\t}\n\n\tmsg_number_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this number format!`;\n\t}\n\n\tmsg_lookup_wrongitem(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" doesn't belong to this lookup!`;\n\t}\n\n\tmsg_lookup_unknownkey(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" is unknown!`;\n\t}\n\n\tmsg_applookup_wrongrecord(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" doesn't belong to the correct app!`;\n\t}\n\n\tmsg_applookup_unknownkey(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" can't be found!`;\n\t}\n\n\t/*\n\tThe following methods are used in the input form.\n\n\tI.e. they are expected to be executed inside a browser.\n\t*/\n\t_in_form()\n\t{\n\t\treturn this.record._in_form();\n\t}\n\n\tget _sel_root()\n\t{\n\t\treturn \"#livingapps-form .\" + this.control._cssclass_root + \".llft-id-\" + this.control.identifier;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label span\";\n\t}\n\n\tget _sel_control()\n\t{\n\t\treturn this._sel_root + \" \" + this.control._cssclass_control;\n\t}\n\n\tget _dom_root()\n\t{\n\t\treturn document.querySelector(this._sel_root);\n\t}\n\n\tget _dom_label()\n\t{\n\t\treturn document.querySelector(this._sel_label);\n\t}\n\n\tget _dom_control()\n\t{\n\t\treturn document.querySelector(this._sel_control);\n\t}\n\n\tget _dom_controls()\n\t{\n\t\treturn document.querySelectorAll(this._sel_control);\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.value = value !== null ? value : \"\";\n\t}\n\n\tget visible()\n\t{\n\t\treturn this._visible;\n\t}\n\n\tset visible(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._dom_root.hidden = !value;\n\t\tthis._visible = value;\n\t}\n\n\tget required()\n\t{\n\t\treturn this._required ?? this.control.required;\n\t}\n\n\tset required(value)\n\t{\n\t\tthis._required = value;\n\t}\n\n\tget in_list()\n\t{\n\t\treturn this.control.in_list;\n\t}\n\n\tget in_mobile_list()\n\t{\n\t\treturn this.control.in_mobile_list;\n\t}\n\n\tget in_text()\n\t{\n\t\treturn this._in_text ?? this.control.in_text;\n\t}\n\n\tset in_text(value)\n\t{\n\t\tthis._in_text = value;\n\t}\n\n\tget enabled()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn !this._dom_root.classList.contains(\"llft-control-readonly\");\n\t\telse\n\t\t\treturn this._enabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet disabled = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.disabled = disabled;\n\t\t\tthis._dom_root.classList.toggle(\"llft-control-readonly\", disabled);\n\t\t}\n\t\tthis._enabled = value;\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tthis._writable = value;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet s = \"<\" + this.constructor.name + \" identifier=\";\n\t\ts += ul4._repr(this.control.identifier)\n\t\tif (this._dirty)\n\t\t\ts += \" is_dirty()=True\";\n\t\tif (this.errors.length > 0)\n\t\t\ts += \" has_errors()=True\";\n\t\ts += \">\";\n\t\treturn s;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = value;\n\t\telse if (name === \"visible\")\n\t\t\tthis.visible = ul4._bool(value);\n\t\telse if (name === \"enabled\")\n\t\t\tthis.enabled = ul4._bool(value);\n\t\telse if (name === \"writable\")\n\t\t\tthis.writable = ul4._bool(value);\n\t\telse if (name === \"required\")\n\t\t\tthis.required = ul4._bool(value);\n\t\telse if (name === \"top\")\n\t\t{\n\t\t\tif (value !== null && (typeof(value) !== \"number\"))\n\t\t\t\tthrow new ul4.ArgumentError(\"top must be None or an int\");\n\t\t\tthis.top = value;\n\t\t}\n\t\telse if (name === \"left\")\n\t\t{\n\t\t\tif (value !== null && (typeof(value) !== \"number\"))\n\t\t\t\tthrow new ul4.ArgumentError(\"left must be None or an int\");\n\t\t\tthis.left = value;\n\t\t}\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\n\nField.prototype._ul4onattrs = [\"control\", \"record\", \"label\", \"value\", \"errors\", \"_visible\", \"_enabled\", \"_writable\", \"_required\"];\nField.prototype._ul4attrs = new Set([\"control\", \"record\", \"label\", \"description\", \"value\", \"mode\", \"errors\", \"visible\", \"enabled\", \"writable\", \"required\", \"in_text\", \"top\", \"left\", \"width\", \"height\"]);\nField.prototype._inputevent = \"input\";\n\n\nclass BoolFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolField;\n\t}\n};\n\nlet boolfieldtype = new BoolFieldType(\"la\", \"BoolField\", \"Holds the value of a bool field of a record (and related information)\");\n\n\nexport class BoolField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tif (change.value.length === 0)\n\t\t\t{\n\t\t\t\tif (this.control.required)\n\t\t\t\t\tchange.errors.push(this.msg_bool_truerequired(change.value));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t\telse if ([\"false\", \"no\", \"0\", \"off\"].includes(change.value.toLowerCase()))\n\t\t\t{\n\t\t\t\tchange.value = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = true;\n\t\t\t}\n\t\t}\n\t\telse if (typeof(change.value) === \"boolean\")\n\t\t{\n\t\t\tif (this.control.required && !change.value)\n\t\t\t\tchange.errors.push(this.msg_bool_truerequired(change.value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.checked;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.checked = value;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\treturn this.globals.msg_bool(this.value);\n\t}\n};\n\n\nclass IntFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntField;\n\t}\n};\n\nlet intfieldtype = new IntFieldType(\"la\", \"IntField\", \"Holds the value of an int field of a record (and related information)\");\n\n\nexport class IntField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (/^\\s*[-+]?\\d+\\s*$/.test(value))\n\t\t\treturn parseInt(value);\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = value;\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tif (Math.round(change.value) !== change.value)\n\t\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\t\t// Keep original floating point number\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tlet testvalue = this._parse(value);\n\t\t\tif (testvalue !== null)\n\t\t\t\tvalue = testvalue;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tsuper._set_dom_value(value !== null ? value + \"\" : \"\");\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\treturn value != null ? value + \"\" : null;\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet readonly = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.readOnly = readonly;\n\t\t}\n\t\tsuper.writable = value;\n\t}\n};\n\n\nclass NumberFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberField;\n\t}\n};\n\nlet numberfieldtype = new NumberFieldType(\"la\", \"NumberField\", \"Holds the value of a number field of a record (and related information)\");\n\n\nexport class NumberField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numberfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (value === null)\n\t\t\treturn null;\n\n\t\t// Try to ignore thousands separators and return the value as a number\n\t\tlet testvalue = value;\n\t\t// Count decimal delimiters\n\t\tlet seps = \"\";\n\t\tlet commas = 0;\n\t\tlet dots = 0\n\t\tfor (let i = 0; i < value.length; ++i)\n\t\t{\n\t\t\tlet c = value[i];\n\t\t\tif (c == \",\")\n\t\t\t{\n\t\t\t\tcommas++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t\telse if (c == \".\")\n\t\t\t{\n\t\t\t\tdots++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t}\n\t\tlet convert = null;\n\t\tif (commas == 0)\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\t; // nothing to do\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse if (commas == 1)\n\t\t{\n\t\t\tif (dots == 1)\n\t\t\t\tconvert = (seps == \".,\") ? \"de\" : \"en\";\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse // commas > 1\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\tconvert = \"en\";\n\t\t\telse\n\t\t\t\treturn null; // We can't guess what the user meant\n\t\t}\n\n\t\tif (convert === \"de\")\n\t\t\ttestvalue = testvalue.replace(/\\./g, \"\").replace(/,/g, \".\");\n\t\telse if (convert === \"en\")\n\t\t\ttestvalue = testvalue.replace(/,/g, \"\");\n\t\tlet floatvalue = parseFloat(testvalue);\n\t\tif (isNaN(floatvalue))\n\t\t\treturn value;\n\t\treturn floatvalue;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tchange.value = value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tlet value = this._bound_value(change.value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\tchange.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_bound_value(value)\n\t{\n\t\tif (this.control.minimum !== null)\n\t\t{\n\t\t\tif (value < this.control.minimum)\n\t\t\t\tvalue = this.control.minimum;\n\t\t}\n\t\tif (this.control.maximum !== null)\n\t\t{\n\t\t\tif (value > this.control.maximum)\n\t\t\t\tvalue = this.control.maximum;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (typeof(value) == \"string\")\n\t\t\t{\n\t\t\t\tlet testvalue = this._parse(value);\n\t\t\t\tif (testvalue !== null)\n\t\t\t\t\tvalue = testvalue;\n\t\t\t}\n\t\t\tif (typeof(value) === \"number\")\n\t\t\t{\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (typeof(value) === \"number\")\n\t\t{\n\t\t\tvalue = this._bound_value(value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = value.toFixed(this.control.precision);\n\t\t}\n\t\telse if (value === null)\n\t\t\tvalue = \"\";\n\t\tvalue += \"\";\n\t\tif (this.globals.lang == \"de\" && this.control.precision === null)\n\t\t\tvalue = value.replace(\".\", \",\");\n\t\tsuper._set_dom_value(value);\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\tif (this.control.precision !== null)\n\t\t\treturn value.toFixed(this.control.precision);\n\t\treturn value.toString();\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet readonly = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.readOnly = readonly;\n\t\t}\n\t\tsuper.writable = value;\n\t}\n};\n\n\nclass StringFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringField;\n\t}\n};\n\nlet stringfieldtype = new StringFieldType(\"la\", \"StringField\", \"Holds the value of a string field of a record (and related information)\");\n\n\nexport class StringField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet minlength = this.control.minlength;\n\t\t\tlet maxlength = this.control.maxlength;\n\t\t\tif (minlength !== null && change.value.length < minlength)\n\t\t\t\tchange.errors.push(this.msg_string_tooshort(change.value))\n\t\t\tif (maxlength !== null && change.value.length > maxlength)\n\t\t\t\tchange.errors.push(this.msg_string_toolong(change.value))\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet readonly = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.readOnly = readonly;\n\t\t}\n\t\tsuper.writable = value;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\treturn this.value;\n\t}\n};\n\n\nclass PasswordFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof PasswordField;\n\t}\n};\n\nlet passwordfieldtype = new PasswordFieldType(\"la\", \"PasswordField\", \"Holds the value of a string/password field of a record (and related information)\");\n\n\nexport class PasswordField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn passwordfieldtype;\n\t}\n};\n\n\nclass EmailFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailField;\n\t}\n};\n\nlet emailfieldtype = new EmailFieldType(\"la\", \"EmailField\", \"Holds the value of a string/email field of a record (and related information)\");\n\n\nexport class EmailField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_email_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass URLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLField;\n\t}\n};\n\nlet urlfieldtype = new URLFieldType(\"la\", \"URLField\", \"Holds the value of a string/url field of a record (and related information)\");\n\n\nexport class URLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tlet url = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\turl = new URL(change.value);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t\tif (url !== null && url.protocol !== \"http:\" && url.protocol !== \"https:\")\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TelFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelField;\n\t}\n};\n\nlet telfieldtype = new TelFieldType(\"la\", \"TelField\", \"Holds the value of a string/tel field of a record (and related information)\");\n\n\nexport class TelField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^\\\\+?[0-9 /()-]+$/;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_tel_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TextAreaFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaField;\n\t}\n};\n\nlet textareafieldtype = new TextAreaFieldType(\"la\", \"TextAreaField\", \"Holds the value of a string/textarea field of a record (and related information)\");\n\n\nexport class TextAreaField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareafieldtype;\n\t}\n};\n\n\nclass HTMLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLField;\n\t}\n};\n\nlet htmlfieldtype = new HTMLFieldType(\"la\", \"HTMLField\", \"Holds the value of a string/html field of a record (and related information)\");\n\n\nexport class HTMLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlfieldtype;\n\t}\n};\n\n\nclass GeoFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoField;\n\t}\n};\n\nlet geofieldtype = new GeoFieldType(\"la\", \"GeoField\", \"Holds the value of a geo field of a record (and related information)\");\n\n\nexport class GeoField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geofieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tfor (let dom_node of this._dom_controls)\n\t\t{\n\t\t\tif (dom_node.id.endsWith(\"_geoinfo\"))\n\t\t\t{\n\t\t\t\tlet value = dom_node.value;\n\t\t\t\tif (value)\n\t\t\t\t{\n\t\t\t\t\tvalue = JSON.parse(value);\n\t\t\t\t\treturn new Geo(\n\t\t\t\t\t\tthis.globals,\n\t\t\t\t\t\tvalue.geometry.coordinates[0],\n\t\t\t\t\t\tvalue.geometry.coordinates[1],\n\t\t\t\t\t\tvalue.properties.formatted_address\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\tfor (let dom_node of this._dom_controls)\n\t\t\t{\n\t\t\t\tdom_node.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let dom_node of this._dom_controls)\n\t\t\t{\n\t\t\t\tif (dom_node.id.endsWith(\"_geoinfo\"))\n\t\t\t\t{\n\t\t\t\t\tlet dom_value = {\n\t\t\t\t\t\t\"type\": \"Feature\",\n\t\t\t\t\t\t\"geometry\": {\n\t\t\t\t\t\t\t\"coordinates\": [\n\t\t\t\t\t\t\t\tvalue.lat,\n\t\t\t\t\t\t\t\tvalue.long\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\"formatted_address\": value.info\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tdom_node.value = ul4._asjson(dom_value);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tdom_node.value = value.info;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (this.value === null)\n\t\t\treturn null;\n\t\t// FIXME: Show N/S and W/E? Show arc minutes/seconds?\n\t\tlet result = value.lat.toFixed(5) + \", \" + value.long.toFixed(5);\n\t\tif (value.info !== null)\n\t\t\tresult += \" (\" + value.info + \")\";\n\t\treturn result;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof Geo))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\nGeoField.prototype._inputevent = \"llgeo\";\n\n\nclass FileFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileField;\n\t}\n};\n\nlet filefieldtype = new FileFieldType(\"la\", \"FileField\", \"Holds the value of a file field of a record (and related information)\");\n\n\nexport class FileField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof File))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\t// Always return `null``\n\t\treturn null;\n\t}\n\n\t_set_dom_value()\n\t{\n\t\t// Do nothing\n\t}\n};\n\n\nclass FileSignatureFieldType extends FileFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureField;\n\t}\n};\n\nlet filesignaturefieldtype = new FileSignatureFieldType(\"la\", \"FileSignatureField\", \"Holds the value of a file/signature field of a record (and related information)\");\n\n\nexport class FileSignatureField extends FileField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\t// FIXME: Implement handling of data URLs.\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass DateFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateFieldBase;\n\t}\n};\n\nlet datefieldbasetype = new DateFieldBaseType(\"la\", \"DateFieldBase\", \"Holds the value of a date field of a record (and related information)\");\n\n\nexport class DateFieldBase extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldbasetype;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\treturn ul4._format(value, this.control.formatstring())\n\t}\n\n\t_parse(value, format)\n\t{\n\t\tlet year = null, month = null, day = null, hour = 0, minute = 0, second = 0, ispm = null;\n\n\t\tfunction _int(v, len, min, max)\n\t\t{\n\t\t\tv = v.substring(0, len);\n\t\t\tif (v.length != len)\n\t\t\t\treturn null;\n\t\t\tv = parseInt(v, 10);\n\t\t\tif (isNaN(v) || v < min || v > max)\n\t\t\t\treturn null;\n\t\t\treturn v;\n\t\t}\n\n\t\twhile (value)\n\t\t{\n\t\t\t// Are both `value` and `format` not `null`,\n\t\t\t// i.e. neither `value` nor `format` is exhaused?\n\t\t\tif (!format)\n\t\t\t\treturn null;\n\t\t\tif (format.startsWith(\"%Y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 4);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(4);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 2);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%m\"))\n\t\t\t{\n\t\t\t\tmonth = _int(value, 2);\n\t\t\t\tif (month === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%d\"))\n\t\t\t{\n\t\t\t\tday = _int(value, 2);\n\t\t\t\tif (day === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%H\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%I\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%M\"))\n\t\t\t{\n\t\t\t\tminute = _int(value, 2);\n\t\t\t\tif (minute === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%S\"))\n\t\t\t{\n\t\t\t\tsecond = _int(value, 2);\n\t\t\t\tif (second === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%p\"))\n\t\t\t{\n\t\t\t\tif (value.toLowerCase().startsWith(\"pm\"))\n\t\t\t\t\tispm = true;\n\t\t\t\telse if (value.toLowerCase().startsWith(\"am\"))\n\t\t\t\t\tispm = false;\n\t\t\t\telse\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%%\"))\n\t\t\t{\n\t\t\t\tif (!value.startsWith(\"%\"))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%z\"))\n\t\t\t{\n\t\t\t\tif (!value.startsWith(\"-\") && !value.startsWith(\"+\"))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tlet _tzhour = _int(value, 2);\n\t\t\t\tif (_tzhour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tif (!value.startsWith(\":\"))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tlet _tzminute = _int(value, 2);\n\t\t\t\tif (_tzminute === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!value.startsWith(format.substring(0, 1)))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(1);\n\t\t\t}\n\t\t}\n\t\t// Are both `value` and `format` `null`?\n\t\t// I.e. both `value` and `format` must be exhausted, otherwise ...\n\t\tif (format)\n\t\t\t// ... `format` has remaining content that the value didn't provide\n\t\t\treturn null;\n\n\t\t// Check existance of values and their range\n\t\tif (year === null)\n\t\t\treturn null;\n\t\tif (month === null || month < 1 || month > 12)\n\t\t\treturn null;\n\t\tif (day === null || day < 1 || day > 31) // FIXME: Use the actuall number of days\n\t\t\treturn null;\n\t\tif (ispm === null)\n\t\t{\n\t\t\tif (hour < 0 || hour > 23)\n\t\t\t\treturn null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (hour < 0 || hour > 11)\n\t\t\t\treturn null;\n\t\t\tif (ispm)\n\t\t\t\thour += 12;\n\t\t}\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (second < 0 || second > 60)\n\t\t\treturn null;\n\t\treturn new Date(year, month-1, day, hour, minute, second);\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (change.value instanceof Date)\n\t\t{\n\t\t\tchange.value = this._convert(change.value);\n\t\t}\n\t\telse if (change.value instanceof ul4.Date_)\n\t\t{\n\t\t\tchange.value = this._convert(change.value._date);\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = null;\n\t\t\tfor (let format of this.control.formatstrings_parse())\n\t\t\t{\n\t\t\t\tvalue = this._parse(change.value, format);\n\t\t\t\tif (value !== null)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = this._convert(value);\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_date_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (!value)\n\t\t\treturn null;\n\n\t\tfor (let format of this.control.formatstrings_parse())\n\t\t{\n\t\t\tlet date = this._parse(value, format);\n\t\t\tif (date !== null)\n\t\t\t\treturn this._convert(date);\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.control.formatstring(), this.globals.lang);\n\t\telse\n\t\t\tvalue = \"\";\n\t\tsuper._set_dom_value(value);\n\t}\n};\n\n\nclass DateFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateField;\n\t}\n};\n\nlet datefieldtype = new DateFieldType(\"la\", \"DateField\", \"Holds the value of a date/date field of a record (and related information)\");\n\n\nexport class DateField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\treturn new ul4.Date_(date.getFullYear(), date.getMonth()+1, date.getDate());\n\t}\n};\n\n\nclass DatetimeMinuteFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteField;\n\t}\n};\n\nlet datetimeminutefieldtype = new DatetimeMinuteFieldType(\"la\", \"DatetimeMinuteField\", \"Holds the value of a date/datetimeminute field of a record (and related information)\");\n\n\nexport class DatetimeMinuteField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of seconds and milliseconds, this modifies the object passed in.\n\t\tdate.setSeconds(0);\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n\nclass DatetimeSecondFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondField;\n\t}\n};\n\nlet datetimesecondfieldtype = new DatetimeSecondFieldType(\"la\", \"DatetimeSecondField\", \"Holds the value of a date/datetimesecond field of a record (and related information)\");\n\n\nexport class DatetimeSecondField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondfieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of milliseconds, this modifies the object passed in.\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n/*\n`ChoiceFieldBase` is used as the base class for all `lookup`, `multiplelookup`,\n`applookup` and `multipleapplookup` fields.\n\nSince the inheritance hierarchy follows the data model *not* which HTML element\nis used for editing, we would have to implement the same DOM interaction logic\nin multiple classes (i.e. we would have to handle a HTML `select` element in\n`LookupSelectField`, `MultipleLookupSelectField`, `AppLookupSelectField`\nand `MultipleAppLookupSelectField`).\n\nTo solve this problem, all methods that handle HTML elements are implemented in\nthis class. Subclasses then simply call the appropriate method.\n*/\nexport class ChoiceFieldBase extends Field\n{\n\t_make_option(selected, value, label)\n\t{\n\t\tlet option = element(\n\t\t\t\"option\",\n\t\t\tlabel,\n\t\t\t{\n\t\t\t\t\"value\": value,\n\t\t\t\t\"class\": value === this.control.none_key ? \"la-none-option\" : null,\n\t\t\t\t\"selected\": selected ? \"selected\" : null,\n\t\t\t}\n\t\t);\n\t\treturn option;\n\t}\n\n\t_set_dom_lookupdata_select(lookupdata)\n\t{\n\t\tif (lookupdata === null)\n\t\t\tlookupdata = this.control.lookup_data;\n\t\tif (ul4._isobject(lookupdata))\n\t\t\tlookupdata = new Map(Object.entries(lookupdata));\n\n\t\tlet none_selected = false;\n\t\tlet selected = new Set();\n\t\tfor (let dom_option of this._dom_control.querySelectorAll(\"option:checked\"))\n\t\t{\n\t\t\tlet value = dom_option.getAttribute(\"value\");\n\t\t\tif (lookupdata.has(value))\n\t\t\t\tselected.add(value);\n\t\t\telse if (value === this.control.none_key)\n\t\t\t\tnone_selected = true;\n\t\t}\n\n\t\tlet new_children = [];\n\t\tif (this.control.none_key !== null)\n\t\t{\n\t\t\tnew_children.push(\n\t\t\t\tthis._make_option(\n\t\t\t\t\tnone_selected,\n\t\t\t\t\tthis.control.none_key,\n\t\t\t\t\tthis.control.none_label !== null ? this.control.none_label : this.globals.msg_nothing_selected()\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tfor (let [key, value] of lookupdata)\n\t\t{\n\t\t\tnew_children.push(\n\t\t\t\tthis._make_option(\n\t\t\t\t\tselected.has(key),\n\t\t\t\t\tkey,\n\t\t\t\t\tthis._make_label(value)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tthis._dom_control.replaceChildren(...new_children);\n\t}\n\n\t_set_dom_lookupdata_input(lookupdata)\n\t{\n\t\tif (lookupdata === null)\n\t\t\tlookupdata = this.control.lookupdata;\n\t\telse if (ul4._isobject(lookupdata))\n\t\t\tlookupdata = new Map(Object.entries(lookupdata));\n\n\t\tlet none_selected = false;\n\t\tlet selected = new Set();\n\t\tfor (let dom_input of this._dom_controls)\n\t\t{\n\t\t\tlet value = dom_input.getAttribute(\"value\");\n\t\t\tif (dom_input.checked)\n\t\t\t{\n\t\t\t\tif (lookupdata.has(value))\n\t\t\t\t\tselected.add(value);\n\t\t\t\telse if (value === this.control.none_key)\n\t\t\t\t\tnone_selected = true;\n\n\t\t\t}\n\t\t}\n\n\t\tlet dom_none_input = this._dom_root.querySelector(\"input[value=\" + this.control.none_key + \"]\");\n\t\tif (dom_none_input !== null)\n\t\t\tdom_none_input.checked = none_selected;\n\n\t\tfor (let [key, item] of this.control.lookupdata)\n\t\t{\n\t\t\tlet dom_input = this._dom_root.querySelector(\"input[value=\" + key + \"]\");\n\t\t\tlet dom_label = this._dom_root.querySelector(\"label[for=\" + dom_input.id + \"]\")\n\n\t\t\tif (lookupdata.has(key))\n\t\t\t{\n\t\t\t\tdom_input.style.display = \"inline\";\n\t\t\t\tdom_label.style.display = \"inline\";\n\t\t\t\tdom_label.innerText = this._make_label(lookupdata.get(key));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdom_input.style.display = \"none\";\n\t\t\t\tdom_label.style.display = \"none\";\n\t\t\t\tdom_label.checked = false;\n\t\t\t}\n\t\t}\n\t}\n};\n\n\nclass LookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupFieldBase;\n\t}\n};\n\nlet lookupfieldbasetype = new LookupFieldBaseType(\"la\", \"LookupFieldBase\", \"Base type of LookupField and MultipleLookupField\");\n\n\nexport class LookupFieldBase extends ChoiceFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdata !== null)\n\t\t\treturn this._lookupdata;\n\t\telse\n\t\t\treturn this.control.lookupdata;\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_lookupdata(value);\n\t\tthis._lookupdata = value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t}\n\n\t_make_label(value)\n\t{\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\telse if (value instanceof LookupItem)\n\t\t\treturn value.label;\n\t\telse\n\t\t\treturn ul4._str(value);\n\t}\n\n\t_find_lookupitem(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\t// If `lookupdata` is `null`, this probably an interface,\n\t\t\t// so we can't validate anything (note that interfaces will however go\n\t\t\t// away in the future)\n\t\t\tif (this.lookupdata === null)\n\t\t\t\treturn;\n\t\t\tlet lookupitem = this.control.lookupdata.get(v);\n\t\t\tif (lookupitem === undefined)\n\t\t\t{\n\t\t\t\t// If the lookup control is auto expandable,\n\t\t\t\t// the user may have given us a label\n\t\t\t\tif (this.control.autoexpandable)\n\t\t\t\t{\n\t\t\t\t\t// Search for the LookupItem with that label\n\t\t\t\t\tfor (let search_lookupitem of this.lookupdata.values())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (v === search_lookupitem.label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchange.value = search_lookupitem;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If we couldn't find the label, keep the label as it is.\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchange.errors.push(this.msg_lookup_unknownkey(v))\n\t\t\t\t\tchange.value = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = lookupitem;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof LookupItem)\n\t\t{\n\t\t\tlet value = this.control.lookupdata.get(v.key);\n\t\t\tif (value !== v)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_lookup_wrongitem(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass LookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupField;\n\t}\n};\n\nlet lookupfieldtype = new LookupFieldType(\"la\", \"LookupField\", \"Holds the value of a lookup field of a record (and related information)\");\n\n\nexport class LookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldtype;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\treturn value.label;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (v === null || v === \"\" || this.control.none_key === v)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t}\n\t}\n};\n\n\nclass LookupRadioFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioField;\n\t}\n};\n\nlet lookupradiofieldtype = new LookupRadioFieldType(\"la\", \"LookupRadioField\", \"Holds the value of a lookup/radio field of a record (and related information)\");\n\n\nexport class LookupRadioField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiofieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\treturn this.control.lookupdata.get(key);\n\t\t\t}\n\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value instanceof LookupItem)\n\t\t\tvalue = value.key;\n\t\tif (value === null)\n\t\t\tvalue = this.control.none_key;\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = node.getAttribute(\"value\") === value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_input(lookupdata);\n\t}\n};\n\n\nclass LookupSelectFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectField;\n\t}\n};\n\nlet lookupselectfieldtype = new LookupSelectFieldType(\"la\", \"LookupSelectField\", \"Holds the value of a lookup/select field of a record (and related information)\");\n\n\nexport class LookupSelectField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (value === this.control.none_key)\n\t\t\t\tvalue = null;\n\t\t\telse\n\t\t\t\tvalue = this.control.lookupdata.get(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.key : this.control.none_key);\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass LookupChoiceFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceField;\n\t}\n};\n\nlet lookupchoicefieldtype = new LookupChoiceFieldType(\"la\", \"LookupChoiceField\", \"Holds the value of a lookup/choice field of a record (and related information)\");\n\n\nexport class LookupChoiceField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicefieldtype;\n\t}\n};\n\nLookupChoiceField.prototype._inputevent = \"llchoice\";\n\n\nclass MultipleLookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupField;\n\t}\n};\n\nlet multiplelookupfieldtype = new MultipleLookupFieldType(\"la\", \"MultipleLookupField\", \"Holds the value of a multiple lookup field of a record (and related information)\");\n\n\nexport class MultipleLookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupfieldtype;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value.length === 0;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null || value.length === 0)\n\t\t\treturn null;\n\t\treturn value.map(item => item.label).join(\", \");\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.none_key === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_lookupitem(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleLookupCheckboxFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxField;\n\t}\n};\n\nlet multiplelookupcheckboxfieldtype = new MultipleLookupCheckboxFieldType(\"la\", \"MultipleLookupCheckboxField\", \"Holds the value of a multiplelookup/radio field of a record (and related information)\");\n\n\nexport class MultipleLookupCheckboxField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxfieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\tvalue.push(this.control.lookupdata.get(key));\n\t\t\t}\n\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = values.has(node.getAttribute(\"value\"));\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_input(lookupdata);\n\t}\n};\n\n\nclass MultipleLookupSelectFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectField;\n\t}\n};\n\nlet multiplelookupselectfieldtype = new MultipleLookupSelectFieldType(\"la\", \"MultipleLookupSelectField\", \"Holds the value of a multiplelookup/select field of a record (and related information)\");\n\nexport class MultipleLookupSelectField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t{\n\t\t\tif (option.selected)\n\t\t\t\tvalue.push(this.control.lookupdata.get(option.getAttribute(\"value\")));\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t\toption.selected = values.has(option.getAttribute(\"value\"));\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass MultipleLookupChoiceFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceField;\n\t}\n};\n\nlet multiplelookupchoicefieldtype = new MultipleLookupChoiceFieldType(\"la\", \"MultipleLookupChoiceField\", \"Holds the value of a multiplelookup/choice field of a record (and related information)\");\n\n\nexport class MultipleLookupChoiceField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicefieldtype;\n\t}\n};\n\nMultipleLookupChoiceField.prototype._inputevent = \"llchoice\";\n\n\nclass AppLookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupFieldBase;\n\t}\n};\n\nlet applookupfieldbasetype = new AppLookupFieldBaseType(\"la\", \"AppLookupFieldBase\", \"Base type of AppLookupField and MultipleAppLookupField\");\n\n\nexport class AppLookupFieldBase extends ChoiceFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdata !== null)\n\t\t\treturn this._lookupdata;\n\t\telse\n\t\t{\n\t\t\tif (this.control.lookup_app.records !== null)\n\t\t\t\treturn this.control.lookup_app.records;\n\t\t}\n\t\treturn new Map();\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_lookupdata(value);\n\t\tthis._lookupdata = value;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t}\n\n\t_make_label(value)\n\t{\n\t\tif (typeof(value) === \"string\")\n\t\t\treturn value;\n\t\telse if (value instanceof Record)\n\t\t\treturn value.as_text(this.control.lookup_controls);\n\t\telse\n\t\t\treturn ul4._str(value);\n\t}\n\n\t_find_record(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\tlet record = this.control.lookup_app.records !== null ?\n\t\t\t\tthis.control.lookup_app.records.get(v) :\n\t\t\t\tundefined\n\t\t\t;\n\n\t\t\tif (record === undefined)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_unknownkey(v))\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = record;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof Record)\n\t\t{\n\t\t\tif (v.app !== this.control.lookup_app)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_wrongrecord(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"lookupdata\")\n\t\t\tthis.lookupdata = value;\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\nAppLookupFieldBase.prototype._ul4attrs = new Set([...Field.prototype._ul4attrs, \"lookupdata\"]);\n\n\n\nclass AppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupField;\n\t}\n};\n\nlet applookupfieldtype = new AppLookupFieldType(\"la\", \"AppLookupField\", \"Holds the value of a applookup field of a record (and related information)\");\n\n\nexport class AppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldtype;\n\t}\n\n\tvalue_as_text(maxlevel=3)\n\t{\n\t\tlet value = this.value;\n\t\tif (value === null)\n\t\t\treturn null;\n\t\treturn \"(\" + this.value.as_text(maxlevel) + \")\";\n\t}\n\n\t_validate(change)\n\t{\n\t\tthis._find_record(change);\n\t}\n};\n\n\nclass AppLookupSelectFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectField;\n\t}\n};\n\nlet applookupselectfieldtype = new AppLookupSelectFieldType(\"la\", \"AppLookupSelectField\", \"Holds the value of a `applookup`/`select` field of a record (and related information)\");\n\n\nexport class AppLookupSelectField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\n\t\tif (this.control.lookup_app.records !== null)\n\t\t{\n\t\t\tvalue = this.control.lookup_app.records.get(value);\n\t\t\tif (value === undefined)\n\t\t\t\tvalue = null;\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.id : this.control.none_key);\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass AppLookupRadioFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioField;\n\t}\n};\n\nlet applookupradiofieldtype = new AppLookupRadioFieldType(\"la\", \"AppLookupRadioField\", \"Holds the value of a `applookup`/`radio` field of a record (and related information)\");\n\n\nexport class AppLookupRadioField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiofieldtype;\n\t}\n};\n\n\nclass AppLookupChoiceFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceField;\n\t}\n};\n\nlet applookupchoicefieldtype = new AppLookupChoiceFieldType(\"la\", \"AppLookupChoiceField\", \"Holds the value of a `applookup`/`choice` field of a record (and related information)\");\n\n\nexport class AppLookupChoiceField extends AppLookupField\n{\n\tconstructor(control, record, value)\n\t{\n\t\tsuper(control, record, value);\n\t\tthis._search_url = null;\n\t\tthis._search_param_name = null;\n\t\tthis._target_param_name = null;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicefieldtype;\n\t}\n\n\tget search_url()\n\t{\n\t\treturn this._search_url ?? this.control.search_url;\n\t}\n\n\tset search_url(value)\n\t{\n\t\tthis._search_url = value;\n\t}\n\n\tget search_param_name()\n\t{\n\t\treturn this._search_param_name ?? this.control.search_param_name;\n\t}\n\n\tset search_param_name(value)\n\t{\n\t\tthis._search_param_name = value;\n\t}\n\n\tget target_param_name()\n\t{\n\t\treturn this._target_param_name ?? this.control.target_param_name;\n\t}\n\n\tset target_param_name(value)\n\t{\n\t\tthis._target_param_name = value;\n\t}\n};\n\nAppLookupChoiceField.prototype._inputevent = \"llchoice\";\nAppLookupChoiceField.prototype._ul4attrs = new Set([...Field.prototype._ul4attrs, \"search_url\", \"search_param_name\", \"target_param_name\"]);\n\n\nclass MultipleAppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupField;\n\t}\n};\n\nlet multipleapplookupfieldtype = new MultipleAppLookupFieldType(\"la\", \"MultipleAppLookupField\", \"Holds the value of a multiple applookup field of a record (and related information)\");\n\n\nexport class MultipleAppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupfieldtype;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value.length === 0;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.none_key === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_record(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_record(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleAppLookupCheckboxFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxField;\n\t}\n};\n\nlet multipleapplookupcheckboxfieldtype = new MultipleAppLookupCheckboxFieldType(\"la\", \"MultipleAppLookupCheckboxField\", \"Holds the value of a `multipleapplookup`/`checkbox` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupCheckboxField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxfieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupSelectFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectField;\n\t}\n};\n\nlet multipleapplookupselectfieldtype = new MultipleAppLookupSelectFieldType(\"la\", \"MultipleAppLookupSelectField\", \"Holds the value of a `multipleapplookup`/`select` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupSelectField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectfieldtype;\n\t}\n\n\t_set_dom_lookupdata(lookupdata)\n\t{\n\t\tthis._set_dom_lookupdata_select(lookupdata);\n\t}\n};\n\n\nclass MultipleAppLookupChoiceFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceField;\n\t}\n};\n\nlet multipleapplookupchoicefieldtype = new MultipleAppLookupChoiceFieldType(\"la\", \"MultipleAppLookupChoiceField\", \"Holds the value of a `multipleapplookup`/`choice` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupChoiceField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicefieldtype;\n\t}\n};\n\nMultipleAppLookupChoiceField.prototype._inputevent = \"llchoice\";\n\n\nclass ControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Control;\n\t}\n};\n\nlet controltype = new ControlType(\"la\", \"Control\", \"Metainformation about a field in a LivingApps application\");\n\n\nexport class Control extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn controltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.app.globals;\n\t}\n\n\tget fulltype()\n\t{\n\t\treturn this.subtype ? this.type + \"/\" + this.subtype : this.type;\n\t}\n\n\tget label()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn this._label;\n\t\tlet label = view_control.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t}\n\n\tget description()\n\t{\n\t\treturn this._description;\n\t}\n\n\tset description(value)\n\t{\n\t\tthis._description = value;\n\t}\n\n\tget priority()\n\t{\n\t\treturn this._priority;\n\t}\n\n\tset priority(value)\n\t{\n\t\tthis._priority = value;\n\t}\n\n\tget in_list()\n\t{\n\t\treturn this._priority;\n\t}\n\n\tset in_list(value)\n\t{\n\t\tthis._priority = value;\n\t}\n\n\tget in_mobile_list()\n\t{\n\t\treturn this._in_mobile_list;\n\t}\n\n\tset in_mobile_list(value)\n\t{\n\t\tthis._in_mobile_list = value;\n\t}\n\n\tget in_text()\n\t{\n\t\treturn this._in_text;\n\t}\n\n\tset in_text(value)\n\t{\n\t\tthis._in_text = value;\n\t}\n\n\tget default()\n\t{\n\t\treturn null;\n\t}\n\n\tget top()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.top : null;\n\t}\n\n\tget left()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.left : null;\n\t}\n\n\tget width()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.width : null;\n\t}\n\n\tget height()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.height : null;\n\t}\n\n\tget z_index()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.z_index : null;\n\t}\n\n\tget liveupdate()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.liveupdate : false;\n\t}\n\n\tget tabindex()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.tabindex : null;\n\t}\n\n\tget required()\n\t{\n\t\tif (this.app._active_view === null)\n\t\t{\n\t\t\treturn this._required ?? this._required_in_view;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet view_control = this._view_control();\n\t\t\tif (view_control === null)\n\t\t\t\treturn false;\n\t\t\telse\n\t\t\t\treturn view_control.required;\n\t\t}\n\t}\n\n\tset required(value)\n\t{\n\t\tthis._required = value;\n\t}\n\n\tget mode()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (this.app._active_view !== null && view_control === null)\n\t\t\treturn null;\n\t\tif (this.app.globals.mode === null)\n\t\t\treturn \"display\";\n\t\treturn view_control !== null ? view_control.mode : \"edit\";\n\t}\n\n\tget labelpos()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelpos : \"left\";\n\t}\n\n\tget labelwidth()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelwidth : null;\n\t}\n\n\tget autoalign()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.autoalign : true;\n\t}\n\n\tget in_active_view()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null;\n\t}\n\n\t_view_control()\n\t{\n\t\tif (this.app._active_view === null)\n\t\t\treturn null;\n\t\tlet view_control = this.app._active_view.controls.get(this.identifier);\n\t\treturn view_control ?? null;\n\t}\n\n\t_logsearch(value, search)\n\t{\n\t\t//console.log(\"Searching for \" + ul4._repr(search.value) + \" in \" + ul4._repr(this) + \" with operator \" + search.operator + \" in value \" + ul4._repr(value));\n\t}\n\n\t// base implemntation, always returns ``false`` (i.e. \"not found\")\n\t// ``value`` is the value of the field\n\t// ``search`` is an object with information what we're searching for\n\t// keys in ``search`` are: ``operator`` (and ``value`` (if required by the operator))\n\tsearch(value, search)\n\t{\n\t\treturn false;\n\t}\n};\n\nControl.prototype.type = null;\nControl.prototype.subtype = null;\nControl.prototype._ul4onattrs = [\"identifier\", \"fieldname\", \"app\", \"_label\", \"_description\", \"_priority\", \"_in_mobile_list\", \"_in_text\", \"_required\", \"_required_in_view\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\"];\nControl.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"fieldname\", \"app\", \"priority\", \"in_list\", \"in_mobile_list\", \"in_text\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\", \"fulltype\", \"label\", \"description\", \"top\", \"left\", \"width\", \"height\", \"z_index\", \"liveupdate\", \"tabindex\", \"required\", \"mode\", \"labelpos\", \"autoalign\", \"in_active_view\"]);\nControl.prototype._cssclass_root = \"llft-control\";\nControl.prototype._cssclass_control = \"input\";\n\n\nclass BoolControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolControl;\n\t}\n};\n\nlet boolcontroltype = new BoolControlType(\"la\", \"BoolControl\", \"A LivingApps boolean field (type 'bool')\");\n\n\nexport class BoolControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolcontroltype;\n\t}\n\n\t// ``search`` must by ``null``, ``false`` or ``true``\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nBoolControl.prototype.type = \"bool\";\nBoolControl.prototype.fieldtype = BoolField;\n\n\nclass IntControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntControl;\n\t}\n};\n\nlet intcontroltype = new IntControlType(\"la\", \"IntControl\", \"A LivingApps integer field (type 'int')\");\n\n\nexport class IntControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intcontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nIntControl.prototype.type = \"int\";\nIntControl.prototype.fieldtype = IntField;\n\n\nclass PlaceholderControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof PlaceholderControld;\n\t}\n};\n\nlet placeholdercontroltype = new PlaceholderControlType(\"la\", \"PlaceholderControl\", \"A LivingApps field that has a placeholder\");\n\n\nclass PlaceholderControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn placeholdercontroltype;\n\t}\n\n\tget placeholder()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.placeholder;\n\t}\n};\n\nPlaceholderControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"placeholder\"]);\n\n\nclass NumberControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberControl;\n\t}\n};\n\nlet numbercontroltype = new NumberControlType(\"la\", \"NumberControl\", \"A LivingApps number field (type 'number')\");\n\n\nexport class NumberControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numbercontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"range\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn false;\n\t\t\treturn (search.minvalue === null || search.minvalue <= value) && (search.maxvalue === null || value < search.maxvalue);\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nNumberControl.prototype.type = \"number\";\nNumberControl.prototype.fieldtype = NumberField;\nNumberControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"precision\", \"minimum\", \"maximum\"];\nNumberControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"precision\", \"minimum\", \"maximum\"]);\n\n\nclass StringControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringControl;\n\t}\n};\n\nlet stringcontroltype = new StringControlType(\"la\", \"StringControl\", \"A LivingApps number field (type 'string')\");\n\n\nexport class StringControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringcontroltype;\n\t}\n\n\t_user_placeholder(user, placeholder)\n\t{\n\t\tif (placeholder === null)\n\t\t\treturn null;\n\t\tswitch (placeholder)\n\t\t{\n\t\t\tcase \"{gender}\":\n\t\t\t\treturn user !== null ? user.gender : null;\n\t\t\tcase \"{title}\":\n\t\t\t\treturn user !== null ? user.title : null;\n\t\t\tcase \"{firstname}\":\n\t\t\t\treturn user !== null ? user.firstname : null;\n\t\t\tcase \"{surname}\":\n\t\t\t\treturn user !== null ? user.surname : null;\n\t\t\tcase \"{account}\":\n\t\t\t\treturn user !== null ? user.email : null;\n\t\t\tcase \"{streetname}\":\n\t\t\t\treturn user !== null ? user.streetname : null;\n\t\t\tcase \"{streetnumber}\":\n\t\t\t\treturn user !== null ? user.streetnumber : null;\n\t\t\tcase \"{street}\":\n\t\t\t\tif (user === null)\n\t\t\t\t\treturn null;\n\t\t\t\telse if (user.street === null)\n\t\t\t\t\treturn user.streetnumber;\n\t\t\t\telse if (user.streetnumber === null)\n\t\t\t\t\treturn user.street;\n\t\t\t\telse\n\t\t\t\t\treturn user.street + \" \" + user.streetnumber;\n\t\t\tcase \"{zip}\":\n\t\t\t\treturn user !== null ? user.zip : null;\n\t\t\tcase \"{phone}\":\n\t\t\t\treturn user !== null ? user.phone : null;\n\t\t\tcase \"{fax}\":\n\t\t\t\treturn user !== null ? user.fax : null;\n\t\t\tcase \"{company}\":\n\t\t\t\treturn user !== null ? user.company : null;\n\t\t\tcase \"{city}\":\n\t\t\t\treturn user !== null ? user.city : null;\n\t\t\tcase \"{summary}\":\n\t\t\t\treturn user !== null ? user.summary : null;\n\t\t\tcase \"{interests}\":\n\t\t\t\treturn user !== null ? user.interests : null;\n\t\t\tcase \"{personal_website}\":\n\t\t\t\treturn user !== null ? user.personal_website : null;\n\t\t\tcase \"{company_website}\":\n\t\t\t\treturn user !== null ? user.company_website : null;\n\t\t\tcase \"{position}\":\n\t\t\t\treturn user !== null ? user.position : null;\n\t\t\tcase \"{department}\":\n\t\t\t\treturn user !== null ? user.department : null;\n\t\t\tcase \"{today}\":\n\t\t\t\treturn ul4.today();\n\t\t\tdefault:\n\t\t\t\treturn placeholder;\n\t\t}\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this._user_placeholder(this.app.globals.user, view_control.default);\n\t}\n\n\tget minlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 0;\n\t\tlet minlength = view_control.minlength;\n\t\tif (minlength === null || minlength < 0)\n\t\t\treturn 0;\n\t\treturn minlength;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 4000;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength === null || maxlength < 0 || maxlength > 4000)\n\t\t\treturn 4000;\n\t\treturn maxlength;\n\t}\n\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (search.value === null || value === null)\n\t\t\t\treturn search.value === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(search.value.toLowerCase()) >= 0;\n\t\t}\n\t}\n};\n\nStringControl.prototype.type = \"string\";\n\n\nclass TextControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextControl;\n\t}\n};\n\nlet textcontroltype = new TextControlType(\"la\", \"TextControl\", \"A LivingApps text field (type 'string/text')\");\n\n\nexport class TextControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textcontroltype;\n\t}\n};\n\nTextControl.prototype.subtype = \"text\";\nTextControl.prototype.fieldtype = StringField;\n\n\nclass PasswordControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof PasswordControl;\n\t}\n};\n\nlet passwordcontroltype = new PasswordControlType(\"la\", \"PasswordControl\", \"A LivingApps password field (type 'string/password')\");\n\n\nexport class PasswordControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn passwordcontroltype;\n\t}\n};\n\nPasswordControl.prototype.subtype = \"password\";\nPasswordControl.prototype.fieldtype = PasswordField;\n\n\nclass EmailControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailControl;\n\t}\n};\n\nlet emailcontroltype = new EmailControlType(\"la\", \"EmailControl\", \"A LivingApps email field (type 'string/email')\");\n\n\nexport class EmailControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailcontroltype;\n\t}\n};\n\nEmailControl.prototype.subtype = \"email\";\nEmailControl.prototype.fieldtype = EmailField;\n\n\nclass URLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLControl;\n\t}\n};\n\nlet urlcontroltype = new URLControlType(\"la\", \"URLControl\", \"A LivingApps URL field (type 'string/url')\");\n\n\nexport class URLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlcontroltype;\n\t}\n};\n\nURLControl.prototype.subtype = \"url\";\nURLControl.prototype.fieldtype = URLField;\n\n\nclass TelControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelControl;\n\t}\n};\n\nlet telcontroltype = new TelControlType(\"la\", \"TelControl\", \"A LivingApps phone number field (type 'string/tel')\");\n\n\nexport class TelControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telcontroltype;\n\t}\n};\n\nTelControl.prototype.subtype = \"tel\";\nTelControl.prototype.fieldtype = TelField;\n\n\nclass TextAreaControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaControl;\n\t}\n};\n\nlet textareacontroltype = new TextAreaControlType(\"la\", \"TextAreaControl\", \"A LivingApps textarea field (type 'string/textarea')\");\n\n\nexport class TextAreaControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareacontroltype;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\t// We only get the encrypted text in encryption mode, so we can't check its length\n\t\tif (this.encrypted !== null)\n\t\t\treturn null;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength < 0)\n\t\t\treturn null;\n\t\treturn maxlength;\n\t}\n};\n\nTextAreaControl.prototype.subtype = \"textarea\";\nTextAreaControl.prototype.fieldtype = TextAreaField;\nTextAreaControl.prototype._ul4onattrs = [...StringControl.prototype._ul4onattrs, \"encrypted\"];\nTextAreaControl.prototype._ul4attrs = new Set([...StringControl.prototype._ul4attrs, \"encrypted\"]);\nTextAreaControl.prototype._cssclass_control = \"textarea\";\n\n\nclass HTMLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLControl;\n\t}\n};\n\nlet htmlcontroltype = new HTMLControlType(\"la\", \"HTMLControl\", \"A LivingApps HTML field (type 'string/html')\");\n\n\nexport class HTMLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlcontroltype;\n\t}\n};\n\nHTMLControl.prototype.subtype = \"html\";\nHTMLControl.prototype.fieldtype = HTMLField;\n\n\nclass DateControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateControl;\n\t}\n};\n\nlet datecontroltype = new DateControlType(\"la\", \"DateControl\", \"A LivingApps date field (type 'date/date')\");\n\n\nexport class DateControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn view_control.default === \"{today}\" ? ul4.today() : null;\n\t}\n\n\tformatstring(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\t\treturn this._formatstrings[lang];\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\t...this._formatstrings_parse[lang],\n\t\t\t...this._formatstrings_parse[\"intl\"]\n\t\t];\n\t}\n\n\t// searchvalue must be ``null``, a ``Date`` object or a string\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\n\t\tlet searchvalue = search.value;\n\t\tif (Object.prototype.toString.call(searchvalue) == \"[object Date]\")\n\t\t\tsearchvalue = ul4._format(searchvalue, this.formatstring(), this.app.language);\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.formatstring(), this.app.language);\n\n\t\tif (search.operator === \"equals\")\n\t\t\treturn searchvalue === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (searchvalue === null || value === null)\n\t\t\t\treturn searchvalue === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(searchvalue.toLowerCase()) >= 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nDateControl.prototype.type = \"date\";\nDateControl.prototype.subtype = \"date\";\nDateControl.prototype.fieldtype = DateField;\nDateControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y\",\n\t\"fr\": \"%d.%m.%Y\",\n\t\"it\": \"%d.%m.%Y\",\n\t\"en\": \"%m/%d/%Y\",\n\t\"intl\": \"%Y-%m-%d\"\n};\n\nlet _suffixes = [\n\t\"\",\n\t\" %H:%M\",\n\t\"T%H:%M\",\n\t\" %H:%M:%S\",\n\t\"T%H:%M:%S\",\n\t\" %H:%M:%S.%f\",\n\t\"T%H:%M:%S.%f\",\n\t\" %H:%M%z\",\n\t\"T%H:%M%z\",\n\t\" %H:%M:%S%z\",\n\t\"T%H:%M:%S%z\",\n\t\" %H:%M:%S.%f%z\",\n\t\"T%H:%M:%S.%f%z\",\n\t\" %H:%M %z\",\n\t\"T%H:%M %z\",\n\t\" %H:%M:%S %z\",\n\t\"T%H:%M:%S %z\",\n\t\" %H:%M:%S.%f %z\",\n\t\"T%H:%M:%S.%f %z\"\n]\n\nDateControl.prototype._formatstrings_parse = {\n\t\"en\": _suffixes.map(s => \"%m/%d/%Y\" + s),\n\t\"de\": _suffixes.map(s => \"%d.%m.%Y\" + s),\n\t\"fr\": _suffixes.map(s => \"%d.%m.%Y\" + s),\n\t\"it\": _suffixes.map(s => \"%d.%m.%Y\" + s),\n\t\"intl\": _suffixes.map(s => \"%Y-%m-%d\" + s)\n};\n\n\nclass DatetimeMinuteControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteControl;\n\t}\n};\n\nlet datetimeminutecontroltype = new DatetimeMinuteControlType(\"la\", \"DatetimeMinuteControl\", \"A LivingApps date field (type 'date/datetimeminute')\");\n\n\nexport class DatetimeMinuteControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setSeconds(0);\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n};\n\nDatetimeMinuteControl.prototype.subtype = \"datetimeminute\";\nDatetimeMinuteControl.prototype.fieldtype = DatetimeMinuteField;\nDatetimeMinuteControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M\",\n\t\"fr\": \"%d.%m.%Y %H:%M\",\n\t\"it\": \"%d.%m.%Y %H:%M\",\n\t\"en\": \"%m/%d/%Y %H:%M\",\n\t\"intl\": \"%Y-%m-%d %H:%M\"\n};\n\n\nclass DatetimeSecondControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondControl;\n\t}\n};\n\nlet datetimesecondcontroltype = new DatetimeSecondControlType(\"la\", \"DatetimeSecondControl\", \"A LivingApps date field (type 'date/datetimesecond')\");\n\n\nexport class DatetimeSecondControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n};\n\nDatetimeSecondControl.prototype.subtype = \"datetimesecond\";\nDatetimeSecondControl.prototype.fieldtype = DatetimeSecondField;\nDatetimeSecondControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M:%S\",\n\t\"fr\": \"%d.%m.%Y %H:%M:%S\",\n\t\"it\": \"%d.%m.%Y %H:%M:%S\",\n\t\"en\": \"%m/%d/%Y %H:%M:%S\",\n\t\"intl\": \"%Y-%m-%d %H:%M:%S\"\n};\n\n\nclass LookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupControl;\n\t}\n};\n\nlet lookupcontroltype = new LookupControlType(\"la\", \"LookupControl\", \"A LivingApps date field (type 'lookup')\");\n\n\nexport class LookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this.lookupdata.get(view_control) ?? null;\n\t}\n\n\tget autoexpandable()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn false;\n\t\treturn view_control.autoexpandable;\n\t}\n\n\tget none_key()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget none_label()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn search.value === null;\n\t\t\telse\n\t\t\t\treturn value.key === search.value;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nLookupControl.prototype.type = \"lookup\";\nLookupControl.prototype.fieldtype = LookupField;\nLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookupdata\"];\nLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookupdata\"]);\n\n\nclass LookupSelectControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectControl;\n\t}\n};\n\nlet lookupselectcontroltype = new LookupSelectControlType(\"la\", \"LookupSelectControl\", \"A LivingApps lookup field (type 'lookup/select')\");\n\n\nexport class LookupSelectControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectcontroltype;\n\t}\n};\n\nLookupSelectControl.prototype.subtype = \"select\";\nLookupSelectControl.prototype.fieldtype = LookupSelectField;\nLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass LookupRadioControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioControl;\n\t}\n};\n\nlet lookupradiocontroltype = new LookupRadioControlType(\"la\", \"LookupRadioControl\", \"A LivingApps lookup field (type 'lookup/radio')\");\n\n\nexport class LookupRadioControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiocontroltype;\n\t}\n};\n\nLookupRadioControl.prototype.subtype = \"radio\";\nLookupRadioControl.prototype.fieldtype = LookupRadioField;\nLookupRadioControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass LookupChoiceControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceControl;\n\t}\n};\n\nlet lookupchoicecontroltype = new LookupChoiceControlType(\"la\", \"LookupChoiceControl\", \"A LivingApps lookup field (type 'lookup/choice')\");\n\n\nexport class LookupChoiceControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicecontroltype;\n\t}\n};\n\nLookupChoiceControl.prototype.subtype = \"choice\";\nLookupChoiceControl.prototype.fieldtype = LookupChoiceField;\nLookupChoiceControl.prototype._cssclass_control = \"select\";\n\n\nclass AppLookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupControl;\n\t}\n};\n\nlet applookupcontroltype = new AppLookupControlType(\"la\", \"AppLookupControl\", \"A LivingApps lookup field (type 'applookup')\");\n\n\nexport class AppLookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupcontroltype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this.lookup_app !== null && this.lookup_app.records !== null)\n\t\t\treturn this.lookup_app.records;\n\t\telse\n\t\t\treturn new Map();\n\t}\n\n\tget none_key()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget none_label()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (value === null || search.value === null)\n\t\t\treturn value === search.value;\n\t\telse\n\t\t\treturn value.search(search);\n\t}\n};\n\nAppLookupControl.prototype.type = \"applookup\";\nAppLookupControl.prototype.fieldtype = AppLookupField;\nAppLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"];\nAppLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"]);\n\n\nclass AppLookupSelectControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectControl;\n\t}\n};\n\nlet applookupselectcontroltype = new AppLookupSelectControlType(\"la\", \"AppLookupSelectControl\", \"A LivingApps applookup field (type 'applookup/select')\");\n\n\nexport class AppLookupSelectControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectcontroltype;\n\t}\n};\n\nAppLookupSelectControl.prototype.subtype = \"select\";\nAppLookupSelectControl.prototype.fieldtype = AppLookupSelectField;\nAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass AppLookupRadioControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioControl;\n\t}\n};\n\nlet applookupradiocontroltype = new AppLookupRadioControlType(\"la\", \"AppLookupRadioControl\", \"A LivingApps applookup field (type 'applookup/radio')\");\n\n\nexport class AppLookupRadioControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiocontroltype;\n\t}\n};\n\nAppLookupRadioControl.prototype.subtype = \"radio\";\nAppLookupRadioControl.prototype.fieldtype = AppLookupRadioField;\n\n\nclass AppLookupChoiceControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceControl;\n\t}\n};\n\nlet applookupchoicecontroltype = new AppLookupChoiceControlType(\"la\", \"AppLookupChoiceControl\", \"A LivingApps applookup field (type 'applookup/choice')\");\n\n\nexport class AppLookupChoiceControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicecontroltype;\n\t}\n\n\tget search_url()\n\t{\n\t\treturn \"field_\" + this.identifier + \"_search\";\n\t}\n\n\tget search_param_name()\n\t{\n\t\treturn \"q\";\n\t}\n\n\tget target_param_name()\n\t{\n\t\treturn \"target\";\n\t}\n};\n\nAppLookupChoiceControl.prototype.subtype = \"choice\";\nAppLookupChoiceControl.prototype.fieldtype = AppLookupChoiceField;\nAppLookupChoiceControl.prototype._cssclass_control = \"select\";\nAppLookupChoiceControl.prototype._ul4attrs = new Set([...AppLookupControl.prototype._ul4attrs, \"search_url\", \"search_param_name\", \"target_param_name\"]);\n\n\nclass MultipleLookupControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupControl;\n\t}\n};\n\nlet multiplelookupcontroltype = new MultipleLookupControlType(\"la\", \"MultipleLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleLookupControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tlet defaultValue = this.lookupdata.get(view_control)\n\n\t\treturn (defaultValue !== undefined) ? [defaultValue] : [];\n\t}\n\n\t// search.value must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tfor (let item of value)\n\t\t\t{\n\t\t\t\tif (item.key === search.value)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleLookupControl.prototype.type = \"multiplelookup\";\nMultipleLookupControl.prototype.fieldtype = MultipleLookupField;\n\n\nclass MultipleLookupCheckboxControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxControl;\n\t}\n};\n\nlet multiplelookupcheckboxcontroltype = new MultipleLookupCheckboxControlType(\"la\", \"MultipleLookupCheckboxControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/checkbox')\");\n\n\nexport class MultipleLookupCheckboxControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxcontroltype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n};\n\nMultipleLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleLookupCheckboxControl.prototype.fieldtype = MultipleLookupCheckboxField;\nMultipleLookupCheckboxControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass MultipleLookupSelectControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectControl;\n\t}\n};\n\nlet multiplelookupselectcontroltype = new MultipleLookupSelectControlType(\"la\", \"MultipleLookupSelectControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/select')\");\n\n\nexport class MultipleLookupSelectControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectcontroltype;\n\t}\n};\n\nMultipleLookupSelectControl.prototype.subtype = \"select\";\nMultipleLookupSelectControl.prototype.fieldtype = MultipleLookupSelectField;\nMultipleLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleLookupChoiceControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceControl;\n\t}\n};\n\nlet multiplelookupchoicecontroltype = new MultipleLookupChoiceControlType(\"la\", \"MultipleLookupChoiceControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/choice')\");\n\n\nexport class MultipleLookupChoiceControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicecontroltype;\n\t}\n};\n\nMultipleLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleLookupChoiceControl.prototype.fieldtype = MultipleLookupChoiceField;\nMultipleLookupChoiceControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleAppLookupControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupControl;\n\t}\n};\n\nlet multipleapplookupcontroltype = new MultipleAppLookupControlType(\"la\", \"MultipleAppLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleAppLookupControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcontroltype;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (search.value === null)\n\t\t\t\treturn value.length === 0;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (let item of value)\n\t\t\t\t{\n\t\t\t\t\tif (item.search(search.value))\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleAppLookupControl.prototype.type = \"multipleapplookup\";\nMultipleAppLookupControl.prototype.fieldtype = MultipleAppLookupField;\n\n\nclass MultipleAppLookupSelectControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectControl;\n\t}\n};\n\nlet multipleapplookupselectcontroltype = new MultipleAppLookupSelectControlType(\"la\", \"MultipleAppLookupSelectControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/select')\");\n\n\nexport class MultipleAppLookupSelectControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectcontroltype;\n\t}\n};\n\nMultipleAppLookupSelectControl.prototype.subtype = \"select\";\nMultipleAppLookupSelectControl.prototype.fieldtype = MultipleAppLookupSelectField;\nMultipleAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleAppLookupCheckboxControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxControl;\n\t}\n};\n\nlet multipleapplookupcheckboxcontroltype = new MultipleAppLookupCheckboxControlType(\"la\", \"MultipleAppLookupCheckboxControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/checkbox')\");\n\n\nexport class MultipleAppLookupCheckboxControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxcontroltype;\n\t}\n};\n\nMultipleAppLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleAppLookupCheckboxControl.prototype.fieldtype = MultipleAppLookupCheckboxField;\n\n\nclass MultipleAppLookupChoiceControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceControl;\n\t}\n};\n\nlet multipleapplookupchoicecontroltype = new MultipleAppLookupChoiceControlType(\"la\", \"MultipleAppLookupChoiceControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/choice')\");\n\n\nexport class MultipleAppLookupChoiceControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicecontroltype;\n\t}\n};\n\nMultipleAppLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleAppLookupChoiceControl.prototype.fieldtype = MultipleAppLookupChoiceField;\nMultipleAppLookupChoiceControl.prototype._cssclass_control = \"select\";\n\n\nclass GeoControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoControl;\n\t}\n};\n\nlet geocontroltype = new GeoControlType(\"la\", \"GeoControl\", \"A LivingApps geo field (type 'geo')\");\n\n\nexport class GeoControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geocontroltype;\n\t}\n};\n\nGeoControl.prototype.type = \"geo\";\nGeoControl.prototype.fieldtype = GeoField;\nGeoControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileControl;\n\t}\n};\n\nlet filecontroltype = new FileControlType(\"la\", \"FileControl\", \"A LivingApps upload field (type 'file')\");\n\n\nexport class FileControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filecontroltype;\n\t}\n};\n\nFileControl.prototype.type = \"file\";\nFileControl.prototype.fieldtype = FileField;\nFileControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileSignatureControlType extends FileControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureControl;\n\t}\n};\n\nlet filesignaturecontroltype = new FileSignatureControlType(\"la\", \"FileSignatureControl\", \"A LivingApps signature image field (type 'file/signature')\");\n\n\nexport class FileSignatureControl extends FileControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturecontroltype;\n\t}\n};\n\nFileSignatureControl.prototype.subtype = \"signature\";\nFileSignatureControl.prototype.fieldtype = FileSignatureField;\n\n\nclass ButtonControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonControl;\n\t}\n};\n\nlet buttoncontroltype = new ButtonControlType(\"la\", \"ButtonControl\", \"A submit button\");\n\n\nexport class ButtonControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttoncontroltype;\n\t}\n};\n\nButtonControl.prototype.type = \"button\";\n\n\nclass LookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupItem;\n\t}\n};\n\nlet lookupitemtype = new LookupItemType(\"la\", \"LookupItem\", \"An option in a lookup control/field\");\n\n\nexport class LookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupitemtype;\n\t}\n\n\tget label()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn this._label;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn this._label;\n\t\tlet label = view_lookupitem.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tget visible()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn true;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn true;\n\t\treturn view_lookupitem.visible;\n\t}\n\n\t_view_lookupitem()\n\t{\n\t\tlet identifier = this.control.identifier;\n\t\tlet active_view = this.control.app.active_view;\n\t\tif (active_view !== null && active_view.controls !== null)\n\t\t{\n\t\t\tlet view_control = active_view.controls.get(identifier);\n\t\t\tif (view_control !== undefined && view_control.lookupdata !== undefined && view_control.lookupdata !== null)\n\t\t\t{\n\t\t\t\tlet view_lookupitem = view_control.lookupdata.get(this.key);\n\t\t\t\tif (view_lookupitem !== undefined)\n\t\t\t\t\treturn view_lookupitem;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<LookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \"visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nLookupItem.prototype._ul4onattrs = [\"control\", \"key\", \"_label\"];\nLookupItem.prototype._ul4attrs = new Set([\"id\", \"control\", \"key\", \"label\"]);\n\n\nclass ViewLookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewLookupItem;\n\t}\n};\n\nlet viewlookupitemtype = new ViewLookupItemType(\"la\", \"ViewLookupItem\", \"View specific information about a lookup item\");\n\n\nexport class ViewLookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewlookupitemtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<ViewLookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \" visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nViewLookupItem.prototype._ul4onattrs = [\"key\", \"label\", \"visible\"];\nViewLookupItem.prototype._ul4attrs = new Set([\"key\", \"label\", \"visible\"]);\n\n\nclass LayoutControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LayoutControl;\n\t}\n};\n\nlet layoutcontroltype = new LayoutControlType(\"la\", \"LayoutControl\", \"A decoration in an input form\");\n\n\nexport class LayoutControl extends Base\n{\n\tLayoutControl()\n\t{\n\t\tthis.label = null;\n\t\tthis.identifier = null;\n\t\tthis.view = null;\n\t\tthis.top = null;\n\t\tthis.left = null;\n\t\tthis.width = null;\n\t\tthis.height = null;\n\t\tthis._visible = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn layoutcontroltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.view.globals;\n\t}\n\n\tget _sel_root()\n\t{\n\t\treturn \"#livingapps-form .llft-element.llft-id-\" + this.identifier;\n\t}\n\n\tget _dom_root()\n\t{\n\t\treturn document.querySelector(this._sel_root);\n\t}\n\n\tget visible()\n\t{\n\t\treturn this._visible ?? true;\n\t}\n\n\tset visible(value)\n\t{\n\t\tif (this.globals._in_form())\n\t\t\tthis._dom_root.hidden = !value;\n\t\tthis._visible = value;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"visible\")\n\t\t\tthis.visible = ul4._bool(value);\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\n\nLayoutControl.prototype._ul4onattrs = [\"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\"];\nLayoutControl.prototype._ul4attrs = new Set([\"id\", \"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\", \"visible\"]);\n\n\nclass HTMLLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLLayoutControl;\n\t}\n};\n\nlet htmllayoutcontroltype = new HTMLLayoutControlType(\"la\", \"HTMLLayoutControl\", \"HTML decoration in an input form\");\n\n\nexport class HTMLLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmllayoutcontroltype;\n\t}\n\n\tget value()\n\t{\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tthis._value = value;\n\t\tif (this.globals._in_form())\n\t\t\tthis._set_dom_value(this._value);\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_root.innerHTML = value;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = value;\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\n\nHTMLLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"_value\", \"_visible\"];\nHTMLLayoutControl.prototype._ul4attrs = new Set([...LayoutControl.prototype._ul4attrs, \"value\"]);\n\n\nclass ImageLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ImageLayoutControl;\n\t}\n};\n\nlet imagelayoutcontroltype = new ImageLayoutControlType(\"la\", \"ImageLayoutControl\", \"An image decoration in an input form\");\n\n\nexport class ImageLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn imagelayoutcontroltype;\n\t}\n\n\tget image()\n\t{\n\t\treturn this._image;\n\t}\n\n\tset image(image)\n\t{\n\t\tthis._image = image;\n\t\tif (this.globals._in_form())\n\t\t\tthis._set_dom_value(this._image);\n\t}\n\n\tget original()\n\t{\n\t\treturn this.image;\n\t}\n\n\tset original(original)\n\t{\n\t\tthis.image = image;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet img = this._dom_root.querySelector(\"img\");\n\t\tif (img !== null)\n\t\t{\n\t\t\tlet url = (value === null) ?\n\t\t\t\t\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" :\n\t\t\t\tthis.globals.scaled_url(value, this.width, this.height);\n\t\t\timg.setAttribute(\"src\", url);\n\t\t}\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"original\")\n\t\t\tthis.original = value;\n\t\telse if (name === \"image\")\n\t\t\tthis.image = value;\n\t\telse\n\t\t\tsuper[ul4.symbols.setattr](name, value);\n\t}\n};\n\nImageLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"_image\", \"_visible\"];\nImageLayoutControl.prototype._ul4attrs = new Set([...LayoutControl.prototype._ul4attrs, \"image\", \"original\"]);\n\n\nclass ButtonLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonLayoutControl;\n\t}\n};\n\nlet buttonlayoutcontroltype = new ButtonLayoutControlType(\"la\", \"ButtonLayoutControl\", \"A submit button in an input form\");\n\n\nexport class ButtonLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttonlayoutcontroltype;\n\t}\n};\n\nButtonLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"original\", \"scaled\", \"_visible\"];\n\n\nclass ViewControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewControl;\n\t}\n};\n\nlet viewcontroltype = new ViewControlType(\"la\", \"ViewControl\", \"Contains view specific information about a control\");\n\n\nexport class ViewControl extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewcontroltype;\n\t}\n\n\tget mode()\n\t{\n\t\treturn this._mode ? \"display\" : \"edit\";\n\t}\n};\n\nViewControl.prototype._ul4onattrs = [\"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"z_index\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"_mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"];\nViewControl.prototype._ul4attrs = new Set([\"id\", \"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"z_index\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"]);\n\n\nclass UserType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof User;\n\t}\n};\n\nlet usertype = new UserType(\"la\", \"User\", \"A LivingApps user/account\");\n\n\nexport class User extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn usertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<User id=\" + ul4._repr(this.id) + \" firstname=\" + ul4._repr(this.firstname) + \" surname=\" + ul4._repr(this.surname) + \" email=\" + ul4._repr(this.email) + \">\";\n\t}\n};\n\nUser.prototype._ul4onattrs = [\"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"image\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\", \"globals\"];\nUser.prototype._ul4attrs = new Set([\"id\", \"globals\", \"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"image\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\"]);\n\n\nclass FileType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof File;\n\t}\n};\n\nlet filetype = new FileType(\"la\", \"File\", \"An uploaded file\");\n\n\nexport class File extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<File url=\" + ul4._repr(this.url) + \" filename=\" + ul4._repr(this.filename) + \">\";\n\t}\n\n\tget url()\n\t{\n\t\treturn \"https://\" + this.globals.hostname + \"/files/\" + this.contextid + \"/\" + this.id;\n\t}\n\n\tget archive_url()\n\t{\n\t\tif (this.archive === null)\n\t\t\treturn this.url;\n\t\treturn this.archive.url + \"/\" + this.filename;\n\t}\n};\n\nFile.prototype._ul4onattrs = [\"globals\", \"filename\", \"mimetype\", \"width\", \"height\", \"internal_id\", \"createdat\", \"size\", \"duration\", \"geo\", \"recordedat\", \"storagefilename\", \"archive\", \"context_id\"];\nFile.prototype._ul4attrs = new Set([\"globals\", \"id\", \"internal_id\", \"url\", \"archive_url\", \"filename\", \"mimetype\", \"width\", \"height\", \"size\", \"duration\", \"geo\", \"recordedat\", \"archive\", \"createdat\", \"context_id\"]);\n\n\nclass GeoType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Geo;\n\t}\n};\n\nlet geotype = new GeoType(\"la\", \"Geo\", \"Geographical coordinates and location information\");\n\n\nexport class Geo extends Base\n{\n\tconstructor(globals, lat, long, info=null)\n\t{\n\t\tsuper(null);\n\t\tthis.globals = globals;\n\t\tthis.lat = lat;\n\t\tthis.long = long;\n\t\tthis.info = info;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geotype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Geo lat=\" + ul4._repr(this.lat) + \" long=\" + ul4._repr(this.long) + \" info=\" + ul4._repr(this.info) + \">\";\n\t}\n};\n\nGeo.prototype._ul4onattrs = [\"globals\", \"lat\", \"long\", \"info\"];\nGeo.prototype._ul4attrs = new Set([\"globals\", \"lat\", \"long\", \"info\"]);\n\n\nclass AttachmentType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Attachment;\n\t}\n};\n\nlet attachmenttype = new AttachmentType(\"la\", \"Attachment\", \"An attachment of a record\");\n\n\nexport class Attachment extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn attachmenttype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" label=\" + ul4._repr(this.label) + \">\";\n\t}\n};\n\nAttachment.prototype._ul4onattrs = [\"record\", \"label\", \"active\"];\nAttachment.prototype._ul4attrs = new Set([\"id\", \"record\", \"label\", \"active\"]);\n\n\nclass NoteAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NoteAttachment;\n\t}\n};\n\nlet noteattachmenttype = new NoteAttachmentType(\"la\", \"NoteAttachment\", \"A note attachment of a record\");\n\n\nexport class NoteAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn noteattachmenttype;\n\t}\n};\n\nNoteAttachment.prototype.type = \"noteattachment\";\nNoteAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nNoteAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass URLAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLAttachment;\n\t}\n};\n\nlet urlattachmenttype = new URLAttachmentType(\"la\", \"URLAttachment\", \"A URL attachment of a record\");\n\n\nexport class URLAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlattachmenttype;\n\t}\n};\n\nURLAttachment.prototype.type = \"urlattachment\";\nURLAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nURLAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass FileAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileAttachment;\n\t}\n};\n\nlet fileattachmenttype = new FileAttachmentType(\"la\", \"FileAttachment\", \"A file attachment of a record\");\n\n\nexport class FileAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fileattachmenttype;\n\t}\n};\n\nFileAttachment.prototype.type = \"fileattachment\";\nFileAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nFileAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass JSONAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof JSONAttachment;\n\t}\n};\n\nlet jsonattachmenttype = new JSONAttachmentType(\"la\", \"JSONAttachment\", \"A JSON attachment of a record\");\n\n\nexport class JSONAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn jsonattachmenttype;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"value\")\n\t\t\treturn ul4._asjson(this.value);\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = ul4._fromjson(value);\n\t\telse\n\t\t\tthis[name] = value\n\t}\n};\n\nJSONAttachment.prototype.type = \"jsonattachment\";\nJSONAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nJSONAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass InstallationType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Installation;\n\t}\n};\n\nlet installationtype = new InstallationType(\"la\", \"Installation\", \"The installation that created an app\");\n\n\nexport class Installation extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn installationtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Installation id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nInstallation.prototype._ul4onattrs = [\"name\"];\nInstallation.prototype._ul4attrs = new Set([\"id\", \"name\"]);\n\n\nclass CategoryType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Category;\n\t}\n};\n\nlet categorytype = new CategoryType(\"la\", \"Category\", \"A navigation category\");\n\n\nexport class Category extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn categorytype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [];\n\t\tlet category = this;\n\t\twhile (category !== null)\n\t\t{\n\t\t\tv.splice(0, 0, category.identifier);\n\t\t\tcategory = category.parent;\n\t\t}\n\t\treturn \"<Category id=\" + ul4._repr(this.id) + \" identifierpath=\" + ul4._repr(v.join(\"/\")) +  + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nCategory.prototype._ul4onattrs = [\"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"];\nCategory.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"]);\n\n\nclass KeyViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof KeyView;\n\t}\n};\n\nlet keyviewtype = new KeyViewType(\"la\", \"KeyView\", \"Object granting access to a view template\");\n\n\nexport class KeyView extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn keyviewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<KeyView id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nKeyView.prototype._ul4onattrs = [\"identifier\", \"name\", \"key\", \"user\"];\nKeyView.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"key\", \"user\"]);\n\n\nclass AppParameterType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppParameter;\n\t}\n};\n\nlet appparametertype = new AppParameterType(\"la\", \"AppParameter\", \"A parameter of a LivingApps application\");\n\n\nexport class AppParameter extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn appparametertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<AppParameter id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nAppParameter.prototype._ul4onattrs = [\"app\", \"appgroup\", \"parent\", \"type\", \"order\", \"identifier\", \"description\", \"value\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\"];\nAppParameter.prototype._ul4attrs = new Set([\"id\", \"app\", \"appgroup\", \"parent\", \"app\", \"type\", \"order\", \"identifier\", \"description\", \"value\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\"]);\n\n\nclass MutableAppParameterType extends AppParameterType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MutableAppParameter;\n\t}\n};\n\nlet mutableappparametertype = new MutableAppParameterType(\"la\", \"MutableAppParameter\", \"A mutable parameter of a LivingApps application\");\n\n\nexport class MutableAppParameter extends AppParameter\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn mutableappparametertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<MutableAppParameter id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nclass MenuItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MenuItem;\n\t}\n};\n\nlet menuitemtype = new MenuItemType(\"la\", \"MenuItem\", \"An additional menu item in an app that links to a target page.\");\n\n\nexport class MenuItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn menuitemtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<MenuItem id=\" + ul4._repr(this.id) + \"identifier=\" + ul4._repr(this.identifier) + \" label=\" + ul4._repr(this.label) + \" type=\" + ul4._repr(this.type) + \">\";\n\t}\n};\n\nMenuItem.prototype._ul4onattrs = [\"app\", \"identifier\", \"label\", \"type\", \"icon\", \"title\", \"target\", \"cssclass\", \"url\", \"order\", \"start_time\", \"end_time\", \"on_app_overview_page\", \"on_app_detail_page\", \"on_form_page\", \"on_iframe_page\", \"on_view_template\", \"on_custom_overview_page\", \"accessible\", \"children\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\"];\nMenuItem.prototype._ul4attrs = new Set([\"id\", \"app\", \"identifier\", \"label\", \"type\", \"icon\", \"title\", \"target\", \"cssclass\", \"url\", \"order\", \"start_time\", \"end_time\", \"on_app_overview_page\", \"on_app_detail_page\", \"on_form_page\", \"on_iframe_page\", \"on_view_template\", \"on_custom_overview_page\", \"accessible\", \"children\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\"]);\n\n\nclass PanelType extends MenuItemType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Panel;\n\t}\n};\n\nlet paneltype = new MenuItemType(\"la\", \"Panel\", \"An additional panel in an app that is displayed on various LivingApps pages and links to a target page.\");\n\n\nexport class Panel extends MenuItem\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn paneltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Panel id=\" + ul4._repr(this.id) + \"identifier=\" + ul4._repr(this.identifier) + \" label=\" + ul4._repr(this.label) + \" type=\" + ul4._repr(this.type) + \">\";\n\t}\n};\n\nPanel.prototype._ul4onattrs = [...MenuItem.prototype._ul4onattrs, \"description\", \"description_url\", \"image\", \"row\", \"column\", \"width\", \"height\", \"header_type\", \"header_background\", \"text_color\", \"background_color1\", \"background_color2\"];\nPanel.prototype._ul4attrs = new Set([...MenuItem.prototype._ul4attrs, \"description\", \"description_url\", \"image\", \"row\", \"column\", \"width\", \"height\"]);\n\n\nclass ViewTemplateInfoType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewTemplateInfo;\n\t}\n};\n\nlet viewtemplateinfotype = new UserType(\"la\", \"ViewTemplateInfo\", \"basic information about a view template\");\n\n\nexport class ViewTemplateInfo extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewtemplateinfotype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<ViewTemplateInfo id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nViewTemplateInfo.prototype._ul4onattrs = [\"app\", \"identifier\", \"name\", \"icon\", \"type\", \"mimetype\", \"permission_level\"];\nViewTemplateInfo.prototype._ul4attrs = new Set([\"app\", \"id\", \"identifier\", \"name\", \"icon\", \"type\", \"mimetype\", \"permission_level\"]);\n\n\nclass FormType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Form;\n\t}\n};\n\nlet formtype = new FormType(\"la\", \"Form\", \"The input form.\");\n\nexport class Form extends ul4.Proto\n{\n\tconstructor(globals, template)\n\t{\n\t\tsuper();\n\t\tthis.globals = globals;\n\t\tthis.template = template;\n\t\tthis._geo_wired = false;\n\n\t\tfor (let field of globals.record.fields.values())\n\t\t\tthis.wire_field(field);\n\t\tthis.render_template(null);\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn formtype;\n\t}\n\n\tget _dom_button()\n\t{\n\t\treturn document.querySelector(this._sel_form + \" \" + this._sel_button);\n\t}\n\n\tget enabled()\n\t{\n\t\treturn !this._dom_button.disabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tthis._dom_button.disabled = !value;\n\t}\n\n\t[ul4.symbols.getattr](key)\n\t{\n\t\tif (key === \"enabled\")\n\t\t\treturn this.enabled;\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, key);\n\t}\n\n\t[ul4.symbols.setattr](key, value)\n\t{\n\t\tif (key === \"enabled\")\n\t\t\tthis.enabled = ul4._bool(value);\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, key);\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" enabled=\" + ul4._repr(this.enabled) + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n\n\trender_template(identifier)\n\t{\n\t\tlet vars = {\n\t\t\t\"datasources\": this.globals.datasources,\n\t\t\t\"record\": this.globals.record,\n\t\t\t\"app\": this.globals.app,\n\t\t\t\"fields\": this.globals.record.fields,\n\t\t\t\"identifier\": identifier\n\t\t};\n\n\t\tlet globalVars = {\n\t\t\t\"globals\": this.globals,\n\t\t\t\"form\": this,\n\t\t\t\"la\": module\n\t\t};\n\n\t\tlet msg = \"LivingApps update template: \";\n\t\tif (identifier === null)\n\t\t\tmsg += \"Initialization\";\n\t\telse\n\t\t\tmsg += \"Value change in \" + ul4._repr(identifier);\n\n\t\tthis.globals.group_logging(msg, () => {\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.template.renders(vars, globalVars);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (console && console.error)\n\t\t\t\t{\n\t\t\t\t\tthis.globals._start_log_message();\n\t\t\t\t\tif (console.group)\n\t\t\t\t\t\tconsole.group(\"UL4 stacktrace\");\n\t\t\t\t\tul4.report_exc(exc);\n\t\t\t\t\tif (console.groupEnd)\n\t\t\t\t\t\tconsole.groupEnd();\n\n\t\t\t\t\tif (console.groupCollapsed)\n\t\t\t\t\t\tconsole.groupCollapsed(\"Javascript stacktrace\");\n\t\t\t\t\tconsole.error(exc);\n\t\t\t\t\tif (console.groupEnd)\n\t\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\twire_geo()\n\t{\n\t\tif (this._geo_wired)\n\t\t\treturn;\n\n\t\tif (this.globals.app.active_view !== null && navigator.geolocation)\n\t\t{\n\t\t\tlet use_geo = this.globals.app.active_view.use_geo;\n\t\t\tif (use_geo === \"once\" || use_geo === \"watch\")\n\t\t\t{\n\t\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\t\tthis.globals.mode = this.globals.mode.substring(0, this.globals.mode.lastIndexOf(\"/\") + 1) + \"geo\";\n\t\t\t\t\tthis.globals.set_current_geo(position);\n\t\t\t\t\tthis.render_template(null);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (use_geo === \"watch\")\n\t\t\t{\n\t\t\t\tnavigator.geolocation.watchPosition((position) => {\n\t\t\t\t\tthis.globals.mode = this.globals.mode.substring(0, this.globals.mode.lastIndexOf(\"/\") + 1) + \"geo\";\n\t\t\t\t\tthis.globals.set_current_geo(position);\n\t\t\t\t\tthis.render_template(null);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis._geo_wired = true;\n\t}\n\n\twire_field(field)\n\t{\n\t\tfor (let dom_node of field._dom_controls)\n\t\t{\n\t\t\tdom_node.addEventListener(field._inputevent, (event) => {\n\t\t\t\tthis.wire_geo();\n\t\t\t\tthis.globals.mode = this.globals.mode.substring(0, this.globals.mode.lastIndexOf(\"/\") + 1) + \"input\";\n\t\t\t\tthis.render_template(field.control.identifier);\n\t\t\t});\n\t\t}\n\t}\n};\n\nForm.prototype._ul4attrs = new Set([\"enabled\"]);\nForm.prototype._sel_form = \"#livingapps-form form\";\nForm.prototype._sel_button = \"[type=submit]\";\n\n\nlet classes = [\n\tGlobals,\n\tFlashMessage,\n\tApp,\n\tAppGroup,\n\tView,\n\tMenuItem,\n\tPanel,\n\tDataSource,\n\tDataSourceChildren,\n\tRecordChildren,\n\tRecord,\n\tBoolControl,\n\tIntControl,\n\tNumberControl,\n\tTextControl,\n\tEmailControl,\n\tURLControl,\n\tTelControl,\n\tTextAreaControl,\n\tDateControl,\n\tDatetimeMinuteControl,\n\tDatetimeSecondControl,\n\tLookupControl,\n\tLookupSelectControl,\n\tLookupRadioControl,\n\tLookupChoiceControl,\n\tAppLookupControl,\n\tAppLookupSelectControl,\n\tAppLookupRadioControl,\n\tAppLookupChoiceControl,\n\tMultipleLookupControl,\n\tMultipleLookupSelectControl,\n\tMultipleLookupCheckboxControl,\n\tMultipleLookupChoiceControl,\n\tMultipleAppLookupControl,\n\tMultipleAppLookupSelectControl,\n\tMultipleAppLookupCheckboxControl,\n\tMultipleAppLookupChoiceControl,\n\tGeoControl,\n\tFileControl,\n\tFileSignatureControl,\n\tButtonControl,\n\tField,\n\tBoolField,\n\tStringField,\n\tEmailField,\n\tURLField,\n\tTelField,\n\tTextAreaField,\n\tHTMLField,\n\tIntField,\n\tNumberField,\n\tGeoField,\n\tFileField,\n\tFileSignatureField,\n\tDateFieldBase,\n\tDateField,\n\tDatetimeMinuteField,\n\tDatetimeSecondField,\n\tLookupFieldBase,\n\tLookupField,\n\tMultipleLookupField,\n\tAppLookupFieldBase,\n\tAppLookupField,\n\tMultipleAppLookupField,\n\tLookupItem,\n\tViewLookupItem,\n\tLayoutControl,\n\tHTMLLayoutControl,\n\tImageLayoutControl,\n\tButtonLayoutControl,\n\tViewControl,\n\tUser,\n\tFile,\n\tGeo,\n\tNoteAttachment,\n\tURLAttachment,\n\tFileAttachment,\n\tJSONAttachment,\n\tInstallation,\n\tCategory,\n\tKeyView,\n\tAppParameter,\n\tMutableAppParameter,\n\tViewTemplateInfo\n];\n\nfor (let constructor of classes)\n{\n\tul4.register(\"de.livinglogic.livingapi.\" + constructor.name.toLowerCase(), constructor);\n}\n\nexport const module = new ul4.Module(\n\t\"la\",\n\t\"LivingAPI types\",\n\t{\n\t\tFlashMessage: FlashMessage,\n\t\tFile: File,\n\t\tGeo: Geo,\n\t\tUser: User,\n\t\tKeyView: KeyView,\n\t\tGlobals: Globals,\n\t\tApp: App,\n\t\tAppGroup: AppGroup,\n\t\tTextControl: TextControl,\n\t\tURLControl: URLControl,\n\t\tEmailControl: EmailControl,\n\t\tPasswordControl: PasswordControl,\n\t\tTelControl: TelControl,\n\t\tTextAreaControl: TextAreaControl,\n\t\tHTMLControl: HTMLControl,\n\t\tIntControl: IntControl,\n\t\tNumberControl: NumberControl,\n\t\tDateControl: DateControl,\n\t\tDatetimeMinuteControl: DatetimeMinuteControl,\n\t\tDatetimeSecondControl: DatetimeSecondControl,\n\t\tBoolControl: BoolControl,\n\t\tLookupSelectControl: LookupSelectControl,\n\t\tLookupRadioControl: LookupRadioControl,\n\t\tLookupChoiceControl: LookupChoiceControl,\n\t\tAppLookupSelectControl: AppLookupSelectControl,\n\t\tAppLookupRadioControl: AppLookupRadioControl,\n\t\tAppLookupChoiceControl: AppLookupChoiceControl,\n\t\tMultipleLookupSelectControl: MultipleLookupSelectControl,\n\t\tMultipleLookupCheckboxControl: MultipleLookupCheckboxControl,\n\t\tMultipleLookupChoiceControl: MultipleLookupChoiceControl,\n\t\tMultipleAppLookupSelectControl: MultipleAppLookupSelectControl,\n\t\tMultipleAppLookupCheckboxControl: MultipleAppLookupCheckboxControl,\n\t\tMultipleAppLookupChoiceControl: MultipleAppLookupChoiceControl,\n\t\tFileControl: FileControl,\n\t\tFileSignatureControl: FileSignatureControl,\n\t\tGeoControl: GeoControl,\n\t\tViewControl: ViewControl,\n\t\tRecordChildren: RecordChildren,\n\t\tRecord: Record,\n\t\tFileAttachment: FileAttachment,\n\t\tURLAttachment: URLAttachment,\n\t\tNoteAttachment: NoteAttachment,\n\t\tJSONAttachment: JSONAttachment,\n\t\tInstallation: Installation,\n\t\tHTMLLayoutControl: HTMLLayoutControl,\n\t\tImageLayoutControl: ImageLayoutControl,\n\t\tButtonLayoutControl: ButtonLayoutControl,\n\t\tView: View,\n\t\tDataSource: DataSource,\n\t\tDataSourceChildren: DataSourceChildren,\n\t\tLookupItem: LookupItem,\n\t\tViewLookupItem: ViewLookupItem,\n\t\tCategory: Category,\n\t\tAppParameter: AppParameter,\n\t\tMutableAppParameter: MutableAppParameter,\n\t\tMenuItem: MenuItem,\n\t\tPanel: Panel,\n\t\tViewTemplateInfo: ViewTemplateInfo\n\t}\n);\n"],"names":["element","name","dom_node","document","createElement","args","arg","appendChild","createTextNode","ismap","Map","isobject","ul4","_isobject","Object","entries","value","setAttribute","_append_param_to_url","urlparams","_islist","_isset","append","_str","url_with_params","url","URLSearchParams","params","param","length","prototype","toString","call","Proto","_typeof","__proto__","replace","Base","id","this","encoder","i","_ul4onattrs","dump","_dumpUL4ONAttr","decoder","iter","loadcontent","iteritem","next","done","_loadUL4ONAttr","_setDefaultUL4ONAttr","symbols","getattr","_ul4attrs","has","realvalue","bind","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","startsWith","hasOwnProperty","AttributeError","setattr","repr","constructor","Handler","record","globalstype","Type","obj","Globals","version","hostname","platform","user","lang","datasources","app","mode","groups","maxdbactions","maxtemplateruntime","flashmessages","view_template_id","email_template_id","handler","_log_stack","_current_geo","type","geo1","geo2","sqsin","x","Math","sin","sqcos","sqsos","cos","deg2rad","PI","flat","lat1","lat","long1","lat2","F","G","l","S","C","w","atan","sqrt","D","T","H2","image","width","height","enlarge","gravity","quality","rotate","blur","sharpen","format","cache","filename","File","archive_url","encodeURIComponent","result","rotatet","data","size","_repr","position","Geo","coords","latitude","longitude","msg_bool_true","msg_bool_false","messages","map","m","join","header","push","output","console","groupEnd","pop","callback","begin_logging","end_logging","level","group","message","_start_log_message","debug","_make_log_message","info","warn","error","Set","expose","log_debug","log_info","log_warning","log_error","dist","current_geo","scaled_url","flashmessagetype","FlashMessage","title","AppType","App","apptype","appgroup","values","globals","save","identifier","active_view","layout_controls","Record","_ismap","keys","fields","ArgumentError","_make_fields","TypeError","_list","dicttype","items","controls","substr","get","_active_view","view","views","ValueError","View","active_views","insert","template_url","new_embedded_url","new_standalone_url","appgrouptype","AppGroup","viewtype","datasourcetype","DataSource","DataSourceChildren","datasourcetypechildren","recordchildrentype","RecordChildren","recordtype","createdat","createdby","updatedat","updatedby","updatecount","_sparsevalues","_values","_fields","details","_children","attachments","errors","_sparsefielderrors","_sparsefieldlookupdata","_is_deleted","_is_new","maxlevel","control","priority","fieldvalue","value_as_text","label","msg_no_fields","defaults","lookupdata","field","fieldtype","set","_sparselookupdata","_in_form","v","is_empty","state","is_dirty","recordchildren","datasourcechildren","records","has_errors","key","edit_standalone_url","edit_embedded_url","display_standalone_url","display_embedded_url","search","fieldsearch","_bool","children","_get","update","FieldType","Field","_label","_description","_lookupdata","_value","_this4","_dirty","_enabled","_writable","_visible","_required","_in_text","_top","_left","_get_dom_value","oldvalue","change","_validate","_ne","_set_dom_value","_dom_label","textContent","_mode","_set_dom_label","description","top","_dom_root","style","left","searchvalue","_type","minlength","maxlength","_cssclass_root","_sel_root","_cssclass_control","querySelector","_sel_label","_sel_control","querySelectorAll","_dom_control","hidden","required","in_list","in_mobile_list","in_text","classList","contains","disabled","_dom_controls","toggle","s","visible","enabled","writable","_inputevent","boolfieldtype","BoolField","msg_field_required","msg_bool_truerequired","includes","toLowerCase","msg_field_wrong_type","checked","msg_bool","intfieldtype","IntField","test","parseInt","_parse","msg_number_format","round","testvalue","readonly","readOnly","numberfieldtype","NumberField","seps","commas","dots","c","convert","floatvalue","parseFloat","isNaN","_bound_value","precision","_round","minimum","maximum","toFixed","StringFieldType","StringField","stringfieldtype","msg_string_tooshort","msg_string_toolong","passwordfieldtype","PasswordField","emailfieldtype","EmailField","msg_email_format","urlfieldtype","URLField","URL","exc","msg_url_format","protocol","telfieldtype","TelField","msg_tel_format","textareafieldtype","TextAreaField","htmlfieldtype","HTMLField","geofieldtype","GeoField","endsWith","JSON","parse","geometry","coordinates","properties","formatted_address","dom_value","_asjson","FileFieldType","FileField","filefieldtype","filesignaturefieldtype","FileSignatureField","DateFieldBaseType","DateFieldBase","datefieldbasetype","_format","formatstring","year","month","day","hour","minute","second","ispm","_int","len","min","max","substring","Date","_convert","Date_","_date","formatstrings_parse","msg_date_format","date","datefieldtype","DateField","getFullYear","getMonth","getDate","datetimeminutefieldtype","DatetimeMinuteField","setSeconds","setMilliseconds","datetimesecondfieldtype","DatetimeSecondField","ChoiceFieldBase","selected","none_key","lookup_data","none_selected","getAttribute","add","new_children","_make_option","none_label","msg_nothing_selected","_make_label","replaceChildren","dom_input","dom_none_input","dom_label","display","innerText","LookupFieldBaseType","LookupFieldBase","lookupfieldbasetype","_set_dom_lookupdata","LookupItem","lookupitem","undefined","autoexpandable","search_lookupitem","msg_lookup_unknownkey","msg_lookup_wrongitem","LookupFieldType","LookupField","lookupfieldtype","_find_lookupitem","lookupradiofieldtype","LookupRadioField","node","_set_dom_lookupdata_input","lookupselectfieldtype","LookupSelectField","_set_dom_lookupdata_select","lookupchoicefieldtype","LookupChoiceField","MultipleLookupFieldType","MultipleLookupField","multiplelookupfieldtype","item","islist","newvalue","singlechange","multiplelookupcheckboxfieldtype","MultipleLookupCheckboxField","multiplelookupselectfieldtype","MultipleLookupSelectField","option","multiplelookupchoicefieldtype","MultipleLookupChoiceField","AppLookupFieldBaseType","AppLookupFieldBase","applookupfieldbasetype","lookup_app","as_text","lookup_controls","msg_applookup_unknownkey","msg_applookup_wrongrecord","AppLookupFieldType","AppLookupField","applookupfieldtype","_find_record","applookupselectfieldtype","AppLookupSelectField","applookupradiofieldtype","AppLookupRadioField","applookupchoicefieldtype","AppLookupChoiceField","_search_url","_search_param_name","_target_param_name","search_url","search_param_name","target_param_name","MultipleAppLookupFieldType","MultipleAppLookupField","multipleapplookupfieldtype","multipleapplookupcheckboxfieldtype","MultipleAppLookupCheckboxField","multipleapplookupselectfieldtype","MultipleAppLookupSelectField","multipleapplookupchoicefieldtype","MultipleAppLookupChoiceField","ControlType","Control","controltype","subtype","view_control","_view_control","_priority","_in_mobile_list","z_index","liveupdate","tabindex","_required_in_view","labelpos","labelwidth","autoalign","boolcontroltype","BoolControl","_logsearch","operator","intcontroltype","IntControl","PlaceholderControlType","PlaceholderControld","placeholdercontroltype","PlaceholderControl","placeholder","numbercontroltype","NumberControl","minvalue","maxvalue","StringControlType","StringControl","stringcontroltype","gender","firstname","surname","email","streetname","streetnumber","street","zip","phone","fax","company","city","summary","interests","personal_website","company_website","department","today","_user_placeholder","indexOf","textcontroltype","TextControl","passwordcontroltype","PasswordControl","emailcontroltype","EmailControl","urlcontroltype","URLControl","telcontroltype","TelControl","textareacontroltype","TextAreaControl","encrypted","htmlcontroltype","HTMLControl","DateControlType","DateControl","datecontroltype","_formatstrings","_formatstrings_parse","language","_suffixes","datetimeminutecontroltype","DatetimeMinuteControl","now","datetimesecondcontroltype","DatetimeSecondControl","LookupControlType","LookupControl","lookupcontroltype","lookupnonekey","lookupnonelabel","lookupselectcontroltype","LookupSelectControl","lookupradiocontroltype","LookupRadioControl","lookupchoicecontroltype","LookupChoiceControl","AppLookupControlType","AppLookupControl","applookupcontroltype","applookupselectcontroltype","AppLookupSelectControl","applookupradiocontroltype","AppLookupRadioControl","applookupchoicecontroltype","AppLookupChoiceControl","MultipleLookupControlType","MultipleLookupControl","multiplelookupcontroltype","defaultValue","multiplelookupcheckboxcontroltype","MultipleLookupCheckboxControl","multiplelookupselectcontroltype","MultipleLookupSelectControl","multiplelookupchoicecontroltype","MultipleLookupChoiceControl","MultipleAppLookupControlType","MultipleAppLookupControl","multipleapplookupcontroltype","multipleapplookupselectcontroltype","MultipleAppLookupSelectControl","multipleapplookupcheckboxcontroltype","MultipleAppLookupCheckboxControl","multipleapplookupchoicecontroltype","MultipleAppLookupChoiceControl","geocontroltype","GeoControl","FileControlType","FileControl","filecontroltype","filesignaturecontroltype","FileSignatureControl","buttoncontroltype","ButtonControl","lookupitemtype","view_lookupitem","_view_lookupitem","viewlookupitemtype","ViewLookupItem","LayoutControlType","LayoutControl","layoutcontroltype","htmllayoutcontroltype","HTMLLayoutControl","innerHTML","imagelayoutcontroltype","ImageLayoutControl","_image","original","img","buttonlayoutcontroltype","ButtonLayoutControl","viewcontroltype","ViewControl","UserType","User","usertype","filetype","contextid","archive","geotype","long","AttachmentType","Attachment","attachmenttype","noteattachmenttype","NoteAttachment","urlattachmenttype","URLAttachment","fileattachmenttype","FileAttachment","jsonattachmenttype","JSONAttachment","_fromjson","installationtype","Installation","categorytype","Category","category","splice","parent","keyviewtype","KeyView","AppParameterType","AppParameter","appparametertype","mutableappparametertype","MutableAppParameter","MenuItemType","MenuItem","menuitemtype","paneltype","Panel","viewtemplateinfotype","ViewTemplateInfo","formtype","Form","template","_geo_wired","wire_field","render_template","_sel_form","_sel_button","_dom_button","vars","globalVars","module","msg","group_logging","_this8","renders","report_exc","groupCollapsed","navigator","geolocation","use_geo","getCurrentPosition","_this9","lastIndexOf","set_current_geo","watchPosition","addEventListener","event","_this10","wire_geo","register","Module"],"mappings":"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b1oB,EACAyG,EACAG,EACAiC,EACAP,EACAuf,GACAG,GACAhf,EACAC,EACAG,EACA/B,EACAiW,GACAI,GACAO,GACA2B,GACAI,GACAE,GACAE,GACAE,GACAK,GACAO,GACAG,GACAE,GACAK,GACAE,GACAE,GACAE,GACAG,GACAE,GACAE,GACAE,GACAM,GACAF,GACAI,GACAE,GACAG,GACAE,GACAE,GACAE,GACAE,GACAG,GACAE,GACA7X,EACAyD,EACAmC,EACAO,EACAG,EACAM,EACAG,EACAE,EACA/C,EACAU,EACAuC,EACAW,EACAG,EACAE,GACAwB,GACAK,GACAI,GACAoB,GACAW,GACAa,GACAc,GACAQ,GACAgB,GACA3D,GACAuM,GACAE,GACAG,GACAG,GACAK,GACAE,GACAE,GACAjiB,GACAS,GACAmiB,GACAE,GACAE,GACAE,GACAG,GACAE,GACAK,GACAE,GACAG,GACAO,sBAID,KADSxoB,UAERxD,EAAI+tB,SAAS,4BAA8BvqB,GAAYnE,KAAK8U,cAAe3Q,QAG/DopB,GAAS,IAAI5sB,EAAIguB,OAC7B,KACA,kBACA,CACCzjB,aAAcA,EACd/C,KAAMA,GACNS,IAAKA,GACLwhB,KAAMA,GACN2B,QAASA,GACTtnB,QAASA,EACT4G,IAAKA,EACLiC,SAAUA,EACV+W,YAAaA,GACbM,WAAYA,GACZF,aAAcA,GACdF,gBAAiBA,GACjBM,WAAYA,GACZE,gBAAiBA,GACjBG,YAAaA,GACb/C,WAAYA,GACZO,cAAeA,GACf0C,YAAaA,GACbO,sBAAuBA,GACvBG,sBAAuBA,GACvB/D,YAAaA,GACbsE,oBAAqBA,GACrBE,mBAAoBA,GACpBE,oBAAqBA,GACrBK,uBAAwBA,GACxBE,sBAAuBA,GACvBE,uBAAwBA,GACxBQ,4BAA6BA,GAC7BF,8BAA+BA,GAC/BI,4BAA6BA,GAC7BK,+BAAgCA,GAChCE,iCAAkCA,GAClCE,+BAAgCA,GAChCI,YAAaA,GACbG,qBAAsBA,GACtBL,WAAYA,GACZ2B,YAAaA,GACbrc,eAAgBA,EAChB/B,OAAQA,EACRqf,eAAgBA,GAChBF,cAAeA,GACfF,eAAgBA,GAChBM,eAAgBA,GAChBG,aAAcA,GACdhC,kBAAmBA,GACnBG,mBAAoBA,GACpBK,oBAAqBA,GACrBjd,KAAMA,EACNU,WAAYA,EACZC,mBAAoBA,EACpBkP,WAAYA,GACZuM,eAAgBA,GAChBuC,SAAUA,GACVO,aAAcA,GACdG,oBAAqBA,GACrBE,SAAUA,GACVG,MAAOA,GACPE,iBAAkBA"}