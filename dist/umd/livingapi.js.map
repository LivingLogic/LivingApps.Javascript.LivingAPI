{"version":3,"file":"livingapi.js","sources":["../../src/livingapi.js"],"sourcesContent":["/*!\n * LivingAPI JavaScript Library\n * https://my.living-apps.de/docs/LivingAPI.html\n *\n * Copyright 2017-2022 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2017-2022 by Walter DÃ¶rwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\nimport * as ul4 from '@livinglogic/ul4';\n\n\nexport class Base extends ul4.Proto\n{\n\tconstructor(id)\n\t{\n\t\tsuper();\n\t\tthis.id = id;\n\t}\n\n\tget ul4onid()\n\t{\n\t\treturn this.id;\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let i = 0; i < this._ul4onattrs.length; ++i)\n\t\t\tencoder.dump(this._dumpUL4ONAttr(this._ul4onattrs[i]));\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\treturn this[name];\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet i = 0;\n\t\tfor (let iter = decoder.loadcontent(); ; ++i)\n\t\t{\n\t\t\tlet iteritem = iter.next();\n\t\t\tif (iteritem.done)\n\t\t\t\tbreak;\n\t\t\tif (i < this._ul4onattrs.length)\n\t\t\t\tthis._loadUL4ONAttr(this._ul4onattrs[i], iteritem.value);\n\t\t}\n\t\tfor (; i < this._ul4onattrs.length; ++i)\n\t\t\tthis._setDefaultUL4ONAttr(this._ul4onattrs[i]);\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tthis[name] = value;\n\t}\n\n\t_setDefaultUL4ONAttr(name)\n\t{\n\t\tthis[name] = null;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (this._ul4attrs.has(name))\n\t\t{\n\t\t\tlet value = this[name];\n\t\t\tif (typeof(value) === \"function\")\n\t\t\t{\n\t\t\t\tlet realvalue = value.bind(this);\n\t\t\t\trealvalue._ul4_name = value._ul4_name || value.name;\n\t\t\t\trealvalue._ul4_signature = value._ul4_signature;\n\t\t\t\trealvalue._ul4_needsobject = value._ul4_needsobject;\n\t\t\t\trealvalue._ul4_needscontext = value._ul4_needscontext;\n\t\t\t\treturn realvalue;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t\tthrow new ul4.AttributeError(this, name);\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n};\n\n\nexport class Handler\n{\n\tsave(record)\n\t{\n\t}\n\n\tdelete(record)\n\t{\n\t}\n};\n\n\nclass GlobalsType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Globals;\n\t}\n};\n\nlet globalstype = new GlobalsType(\"la\", \"Globals\", \"Global information\");\n\n\nexport class Globals extends Base\n{\n\tconstructor(id)\n\t{\n\t\tsuper(id);\n\t\tthis.version = null;\n\t\tthis.hostname = null;\n\t\tthis.platform = null;\n\t\tthis.user = null;\n\t\tthis.lang = null;\n\t\tthis.app = null;\n\t\tthis.record = null;\n\t\tthis.maxdbactions = null;\n\t\tthis.maxtemplateruntime = null;\n\t\tthis.flashmessages = null;\n\t\tthis.handler = new Handler();\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn globalstype;\n\t}\n\n\t// distance between two geo coordinates (see https://de.wikipedia.org/wiki/Orthodrome#Genauere_Formel_zur_Abstandsberechnung_auf_der_Erde)\n\tstatic geodist(geo1, geo2)\n\t{\n\t\tlet sqsin = function sqsin(x) {x = Math.sin(x); return x*x};\n\t\tlet sqcos = function sqsos(x) {x = Math.cos(x); return x*x};\n\t\tconst deg2rad = Math.PI/180; // Conversion factor degree -> radians\n\t\tconst radius = 6378.137; // Equatorial radius of earth in km\n\t\tconst flat = 1/298.257223563; // Earth flattening\n\n\t\tconst lat1 = geo1.lat * deg2rad;\n\t\tconst long1 = geo1.long * deg2rad;\n\t\tconst lat2 = geo2.lat * deg2rad;\n\t\tconst long2 = geo2.long * deg2rad;\n\t\tconst F = (lat1 + lat2)/2;\n\t\tconst G = (lat1 - lat2)/2;\n\t\tconst l = (long1 - long2)/2;\n\t\tconst S = sqsin(G) * sqcos(l) + sqcos(F) * sqsin(l);\n\t\tconst C = sqcos(G) * sqcos(l) + sqsin(F) * sqsin(l);\n\t\tconst w = Math.atan(Math.sqrt(S/C));\n\t\tconst D = 2 * w * radius;\n\t\tconst T = Math.sqrt(S*C)/w;\n\t\tconst H1 = (3*T-1)/(2*C);\n\t\tconst H2 = (3*T+1)/(2*S);\n\t\tconst s = D * (1 + flat * H1 * sqsin(F) * sqcos(G) - flat * H2 * sqcos(F) * sqsin(G));\n\t\treturn s;\n\t}\n\n\tscaledURL(url, width, height, type=\"fill\", enlarge=true, gravity=\"sm\", quality=null, rotate=null, blur=null, sharpen=null, format=null, cache=true)\n\t{\n\t\tlet filename = null;\n\n\t\tif (url instanceof File)\n\t\t{\n\t\t\turl = \"https://\" + this.hostname + url.url;\n\t\t\tfilename = encodeURIComponent(url.filename);\n\t\t\tif (filename != url.filename)\n\t\t\t\tfilename = null;\n\t\t}\n\n\t\tlet result = \"\";\n\n\t\tif (cache)\n\t\t\tresult += \"/imgproxycache/insecure\";\n\t\telse\n\t\t\tresult += \"/imgproxy/insecure\";\n\n\t\tif (type !== \"fit\")\n\t\t\tresult += \"/rt:\" + type;\n\n\t\tif (width !== null && width !== undefined)\n\t\t\tresult += \"/w:\" + width;\n\n\t\tif (height !== null && height !== undefined)\n\t\t\tresult += \"/h:\" + height;\n\n\t\tif (enlarge)\n\t\t\tresult += \"/el:1\";\n\n\t\tif (gravity !== null && gravity !== undefined)\n\t\t\tresult += \"/g:\" + gravity;\n\n\t\tif (quality !== null && quality !== undefined)\n\t\t\tresult += \"/q:\" + quality;\n\n\t\tif (rotate !== null && rotate % 360 != 0)\n\t\t\tresult += \"/rot:\" + rotatet;\n\n\t\tif (blur !== null && blur !== undefined)\n\t\t\tresult += \"/bl:\" + blur;\n\n\t\tif (sharpen !== null && sharpen !== undefined)\n\t\t\tresult += \"/sh:\" + sharpen;\n\n\t\tif (format !== null && format !== undefined)\n\t\t\tresult += \"/f:\" + format;\n\n\t\tif (filename !== null && filename !== undefined)\n\t\t\tresult += \"/fn:\" + filename;\n\n\t\tresult += \"/plain/\" + encodeURIComponent(url);\n\n\t\treturn result;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Globals version=\" + ul4._repr(this.version) + \">\";\n\t}\n};\n\nGlobals.prototype._ul4onattrs = [\"version\", \"platform\", \"user\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"lang\", \"datasources\", \"hostname\", \"app\", \"record\", \"mode\", \"view_template_id\", \"email_template_id\", \"view_id\"];\nGlobals.prototype._ul4attrs = new Set([\"version\", \"hostname\", \"platform\", \"user\", \"lang\", \"app\", \"record\", \"maxdbactions\", \"maxtemplateruntime\", \"flashmessages\", \"mode\"]);\n\n\nclass FlashMessageType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FlashMessage;\n\t}\n};\n\nlet flashmessagetype = new FlashMessageType(\"la\", \"FlashMessage\", \"A flash message in a web page\");\n\n\nexport class FlashMessage extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn flashmessagetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<FlashMessage type=\" + ul4._repr(this.type) + \" title=\" + ul4._repr(this.title) + \">\";\n\t}\n};\n\nFlashMessage.prototype._ul4onattrs = [\"timestamp\", \"type\", \"title\", \"message\"];\nFlashMessage.prototype._ul4attrs = new Set([\"timestamp\", \"type\", \"title\", \"message\"]);\n\n\nclass AppType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof App;\n\t}\n};\n\nlet apptype = new AppType(\"la\", \"App\", \"A LivingApps application\");\n\n\nexport class App extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn apptype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<App id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n\n\tinsert(values={})\n\t{\n\t\tlet record = this[ul4.symbols.call](values);\n\t\tthis.globals.handler.save(this);\n\t\treturn record;\n\t}\n\n\tget layout_controls()\n\t{\n\t\tif (this.active_view === null)\n\t\t\treturn new Map();\n\t\treturn this.active_view.layout_controls;\n\t}\n\n\t[ul4.symbols.call](values={})\n\t{\n\t\tlet record = new Record(null, this);\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let identifier of values.keys())\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, values, null, null);\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let identifier in values)\n\t\t\t{\n\t\t\t\tif (!record.fields.has(identifier))\n\t\t\t\t\tthrow new ul4.ArgumentError(ul4._repr(this) + \"() get an unexpected keyword argument \" + ul4._repr(identifier));\n\t\t\t}\n\t\t\trecord._make_fields(true, new Map(ul4._list(ul4.dicttype.items(values))), null, null);\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\t\treturn record;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t{\n\t\t\tif (!this.controls.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.controls.get(name.substr(2));\n\t\t}\n\t\telse if (name.startsWith(\"p_\") && this.params !== null)\n\t\t{\n\t\t\tif (!this.params.has(name.substr(2)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.params.get(name.substr(2));\n\t\t}\n\t\telse if (name.startsWith(\"pv_\") && this.params !== null)\n\t\t{\n\t\t\tif (!this.params.has(name.substr(3)))\n\t\t\t\tthrow new ul4.AttributeError(this, name);\n\t\t\treturn this.params.get(name.substr(3)).value;\n\t\t}\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n\n\tget active_view()\n\t{\n\t\treturn this._active_view;\n\t}\n\n\tset active_view(view)\n\t{\n\t\tif (view === null)\n\t\t\t;\n\t\telse if (typeof(view) === \"string\")\n\t\t{\n\t\t\tif (this.views !== null && this.views.has(view))\n\t\t\t\tview = this.views.get(view);\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" not found!\");\n\t\t}\n\t\telse if (view instanceof View)\n\t\t{\n\t\t\tif (view.app === this)\n\t\t\t\t;\n\t\t\telse\n\t\t\t\tthrow new ul4.ValueError(\"View \" + ul4._repr(view) + \" belongs to the wrong app!\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new ul4.TypeError(ul4._repr(view) + \" is not a view!\");\n\t\t}\n\n\t\tthis._active_view = view;\n\t}\n};\n\n\nApp.prototype._ul4onattrs = [\"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"basetable\", \"primarykey\", \"insertprocedure\", \"updateprocedure\", \"deleteprocedure\", \"templates\", \"createdat\", \"updatedat\", \"updatedby\", \"superid\", \"favorite\", \"_active_view\"];\nApp.prototype._ul4attrs = new Set([\"id\", \"globals\", \"name\", \"description\", \"lang\", \"startlink\", \"iconlarge\", \"iconsmall\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"controls\", \"records\", \"recordcount\", \"installation\", \"categories\", \"params\", \"views\", \"datamanagement_identifier\", \"insert\", \"favorite\", \"_active_view\"]);\nul4.expose(App.prototype[ul4.symbols.call], [\"**values\"], {\"needsobject\": true});\nul4.expose(App.prototype.insert, [\"**values\"], {\"needsobject\": true});\n\n\nclass ViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof View;\n\t}\n};\n\nlet viewtype = new ViewType(\"la\", \"View\", \"An input form for a LivingViews application\");\n\n\nexport class View extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<View id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nView.prototype._ul4onattrs = [\"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\"];\nView.prototype._ul4attrs = new Set([\"id\", \"name\", \"combined_type\", \"app\", \"order\", \"width\", \"height\", \"start\", \"end\", \"controls\", \"layout_controls\", \"lang\"]);\n\n\nclass DataSourceType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DataSource;\n\t}\n};\n\nlet datasourcetype = new DataSourceType(\"la\", \"DataSource\", \"The data resulting from a data source configuration\");\n\n\nexport class DataSource extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datasourcetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<DataSource id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nDataSource.prototype._ul4onattrs = [\"identifier\", \"app\", \"apps\"];\nDataSource.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"app\", \"apps\"]);\n\n\nclass RecordType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Record;\n\t}\n};\n\nlet recordtype = new RecordType(\"la\", \"Record\", \"A record of a LivingApp application\");\n\n\nexport class Record extends Base\n{\n\tconstructor(id, app)\n\t{\n\t\tsuper(id);\n\t\tthis.app = app;\n\t\tthis.createdat = null;\n\t\tthis.createdby = null;\n\t\tthis.updatedat = null;\n\t\tthis.updatedby = null;\n\t\tthis.updatecount = 0;\n\t\tthis._sparsevalues = new Map();\n\t\tthis._values = null;\n\t\tthis._fields = null;\n\t\tthis.children = new Map();\n\t\tthis.attachments = null;\n\t\tthis.errors = [];\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparsefieldlookupdata = null;\n\t\tthis._is_deleted = false;\n\t\tthis._is_new = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn recordtype;\n\t}\n\n\t_make_fields(defaults, values, errors, lookupdata)\n\t{\n\t\tlet fields = new Map();\n\n\t\tfor (let control of this.app.controls.values())\n\t\t{\n\t\t\tlet identifier = control.identifier;\n\t\t\tlet value = null;\n\t\t\tif (values !== null)\n\t\t\t{\n\t\t\t\tif (defaults && !values.has(identifier))\n\t\t\t\t\tvalue = control.default;\n\t\t\t\telse if (values.has(identifier))\n\t\t\t\t\tvalue = values.get(identifier);\n\t\t\t}\n\t\t\tlet field = new control.fieldtype(control, this, value);\n\t\t\tfields.set(identifier, field);\n\t\t\tif (errors !== null && errors.has(identifier))\n\t\t\t\tfield.errors = errors.get(identifier);\n\t\t\tif (lookupdata !== null && lookupdata.has(identifier))\n\t\t\t\tfield.lookupdata = lookupdata.get(identifier);\n\t\t}\n\n\t\tthis._fields = fields;\n\t\tthis._sparsevalues = null;\n\t\tthis._sparsefielderrors = null;\n\t\tthis._sparselookupdata = null;\n\t}\n\n\t_in_form()\n\t{\n\t\tlet globals = this.app.globals;\n\n\t\treturn globals.mode !== null && globals.mode.startsWith(\"form/\") && this === globals.record;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [\"<Record id=\", ul4._repr(this.id)];\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.control.priority && !field.is_empty())\n\t\t\t{\n\t\t\t\tv.push(\" v_\");\n\t\t\t\tv.push(field.control.identifier);\n\t\t\t\tv.push(\"=\");\n\t\t\t\tv.push(ul4._repr(field.value)); // FIXME: This might lead to infinite recursions\n\t\t\t}\n\t\t}\n\t\tv.push(\" state=\");\n\t\tv.push(ul4._repr(this.state));\n\t\tv.push(\">\");\n\t\treturn v.join(\"\");\n\t}\n\n\tget state()\n\t{\n\t\tif (this._is_deleted)\n\t\t\treturn \"deleted\";\n\t\telse if (this._is_new)\n\t\t\treturn \"new\";\n\t\telse if (this.is_dirty())\n\t\t\treturn \"dirty\";\n\t\telse\n\t\t\treturn \"saved\";\n\t}\n\n\tget values()\n\t{\n\t\tif (this._values === null)\n\t\t{\n\t\t\tthis._values = new Map();\n\t\t\tfor (let field of this.fields.values())\n\t\t\t{\n\t\t\t\tthis._values.set(field.control.identifier, field.value);\n\t\t\t}\n\t\t}\n\t\treturn this._values;\n\t}\n\n\tget fields()\n\t{\n\t\tif (this._fields === null)\n\t\t\tthis._make_fields(false, this._sparsevalues, this._sparsefielderrors, this._sparsefieldlookupdata)\n\t\treturn this._fields;\n\t}\n\n\tis_dirty()\n\t{\n\t\tif (this.id === null)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.is_dirty())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\thas_errors()\n\t{\n\t\tif (this.errors.length !== 0)\n\t\t\treturn true;\n\t\tfor (let field of this.fields.values())\n\t\t{\n\t\t\tif (field.has_errors())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\tlet result = this.app.globals.handler.delete(this);\n\t\tthis._is_deleted = true;\n\t\treturn result;\n\t}\n\n\tsave()\n\t{\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tupdate(values={})\n\t{\n\t\tif (ul4._ismap(values))\n\t\t{\n\t\t\tfor (let [key, value] of values.entries())\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\tfields.get(key).value = value;\n\t\t\t}\n\t\t}\n\t\telse if (ul4._isobject(values))\n\t\t{\n\t\t\tfor (let key in values)\n\t\t\t{\n\t\t\t\tif (!this.fields.has(key))\n\t\t\t\t\tthrow new ul4.ArgumentError(\"update() get an unexpected keyword argument \" + ul4._repr(key));\n\t\t\t\trecord.fields.get(key).value = values[key];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new ul4.TypeError(\"values must be an object or a Map\");\n\n\t\tthis.app.globals.handler.save(this);\n\t}\n\n\tsearch(search)\n\t{\n\t\tfor (let identifier in search)\n\t\t{\n\t\t\tlet fieldsearch = search[identifier];\n\t\t\tif (ul4._bool(fieldsearch))\n\t\t\t{\n\t\t\t\tif (!this.fields.get(identifier).search(fieldsearch))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._is_new = false;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"values\")\n\t\t\treturn this._sparsevalues;\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"values\")\n\t\t{\n\t\t\tthis._sparsevalues = value;\n\t\t\tthis._values = null;\n\t\t\tthis._fields = null;\n\t\t}\n\t\telse\n\t\t\tthis[name] = value;\n\t}\n\n\t[ul4.symbols.getattr](name)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\treturn this.children.get(name.substr(2))\n\t\telse if (name.startsWith(\"f_\"))\n\t\t\treturn this.fields.get(name.substr(2))\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\treturn this.values.get(name.substr(2))\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name.startsWith(\"c_\"))\n\t\t\tthis.children[name.substr(2)] = value;\n\t\telse if (name.startsWith(\"v_\"))\n\t\t\tthis.fields.get(name.substr(2)).value = value;\n\t\telse\n\t\t\tthrow new ul4.AttributeError(this, name);\n\t}\n};\n\nRecord.prototype._ul4onattrs = [\"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"_sparsevalues\", \"attachments\", \"children\", \"errors\", \"_sparsefielderrors\", \"_sparsefieldlookupdata\"];\nRecord.prototype._ul4attrs = new Set([\"id\", \"app\", \"createdat\", \"createdby\", \"updatedat\", \"updatedby\", \"updatecount\", \"values\", \"attachments\", \"children\", \"errors\"]);\nul4.expose(Record.prototype.is_dirty, []);\nul4.expose(Record.prototype.has_errors, []);\nul4.expose(Record.prototype.delete, []);\nul4.expose(Record.prototype.save, []);\nul4.expose(Record.prototype.update, [\"**values\"], {\"needsobject\": true});\n\n\nclass FieldType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Field;\n\t}\n};\n\nlet fieldtype = new FieldType(\"la\", \"Field\", \"Holds the value of a field of a record (and related information)\");\n\n\nexport class Field extends Base\n{\n\tconstructor(control, record, value)\n\t{\n\t\tsuper(null);\n\t\tthis.control = control;\n\t\tthis.record = record;\n\t\tthis._label = null;\n\t\tthis._lookupdate = null;\n\t\tthis.errors = [];\n\t\tthis._value = null;\n\t\tif (!this._in_form())\n\t\t\tthis.value = value;\n\t\tthis._dirty = false;\n\t\tthis._enabled = true;\n\t\tthis._writable = true;\n\t\tthis._visible = true;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fieldtype;\n\t}\n\n\tget value()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn this._get_dom_value();\n\t\treturn this._value;\n\t}\n\n\tset value(value)\n\t{\n\t\tlet oldvalue = this._value;\n\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\n\t\tif (ul4._ne(oldvalue, change.value))\n\t\t{\n\t\t\tthis.record.values.set(this.control.identifier, change.value);\n\t\t\tthis._value = change.value;\n\t\t\tthis._dirty = true;\n\t\t}\n\t\tthis.errors = change.errors;\n\t\tif (this._in_form())\n\t\t\tthis._set_dom_value(this._value);\n\t}\n\n\t_validate(change)\n\t{\n\t\t// Do nothing, i.e. accept the value unchanged and without errors\n\t}\n\n\t_set_dom_label()\n\t{\n\t\tif (this._in_form())\n\t\t\tthis._dom_label.textContent = this.label;\n\t}\n\n\tget label()\n\t{\n\t\tif (this._label !== null)\n\t\t\treturn this._label;\n\t\treturn this.control.label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t\tthis._set_dom_label();\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.control.globals;\n\t}\n\n\tis_empty()\n\t{\n\t\treturn this._value === null || (ul4._islist(this._value) && this._value.length === 0);\n\t}\n\n\tis_dirty()\n\t{\n\t\treturn this._dirty;\n\t}\n\n\thas_errors()\n\t{\n\t\treturn this.errors.length !== 0;\n\t}\n\n\tsearch(searchvalue)\n\t{\n\t\treturn this.control.search(this.value, searchvalue);\n\t}\n\n\tmsg_field_required(value)\n\t{\n\t\tswitch (this.globals.lang)\n\t\t{\n\t\t\tcase \"de\":\n\t\t\t\treturn `\"${this.label}\" wird benÃ¶tigt!`;\n\t\t\tdefault:\n\t\t\t\treturn `\"${this.label}\" is required!`;\n\t\t}\n\t}\n\n\tmsg_field_wrong_type(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support the type ${ul4._type(value).name}!`;\n\t}\n\n\tmsg_bool_truerequired(value)\n\t{\n\t\treturn `\"${this.label}\" only accepts \"Yes\"!`;\n\t}\n\n\tmsg_string_tooshort(value)\n\t{\n\t\treturn `\"${this.label}\" is too short. You must use at least ${this.control.minlength} characters!`;\n\t}\n\n\tmsg_string_toolong(value)\n\t{\n\t\treturn `\"${this.label}\" is too long. You may use at most ${this.control.maxlength} characters!`;\n\t}\n\n\tmsg_email_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid email address!`;\n\t}\n\n\tmsg_url_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid URL!`;\n\t}\n\n\tmsg_tel_format(value)\n\t{\n\t\treturn `\"${this.label}\" must be a valid phone number!`;\n\t}\n\n\tmsg_date_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this date format!`;\n\t}\n\n\tmsg_number_format(value)\n\t{\n\t\treturn `\"${this.label}\" doesn't support this number format!`;\n\t}\n\n\tmsg_lookup_wrongitem(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" doesn't belong to this lookup!`;\n\t}\n\n\tmsg_lookup_unknownkey(value)\n\t{\n\t\treturn `The option ${ul4._repr(value)} for \"${this.label}\" is unknown!`;\n\t}\n\n\tmsg_applookup_wrongrecord(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" doesn't belong to the correct app!`;\n\t}\n\n\tmsg_applookup_unknownkey(value)\n\t{\n\t\treturn `The record ${ul4._repr(value)} for \"${this.label}\" can't be found!`;\n\t}\n\n\t/*\n\tThe following methods are used in the input form.\n\n\tI.e. the are expected to be executed inside a browser.\n\t**/\n\t_in_form()\n\t{\n\t\treturn this.record._in_form();\n\t}\n\n\tget _sel_root()\n\t{\n\t\treturn \"#livingapps-form .\" + this.control._cssclass_root + \".llft-id-\" + this.control.identifier;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label span\";\n\t}\n\n\tget _sel_control()\n\t{\n\t\treturn this._sel_root + \" \" + this.control._cssclass_control;\n\t}\n\n\tget _dom_root()\n\t{\n\t\treturn document.querySelector(this._sel_root);\n\t}\n\n\tget _dom_label()\n\t{\n\t\treturn document.querySelector(this._sel_label);\n\t}\n\n\tget _dom_control()\n\t{\n\t\treturn document.querySelector(this._sel_control);\n\t}\n\n\tget _dom_controls()\n\t{\n\t\treturn document.querySelectorAll(this._sel_control);\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.value = value;\n\t}\n\n\t_show()\n\t{\n\t\tlet el = this._dom_root;\n\t\tel.style.transition = \"height 0.2s ease\";\n\t\tel.style.overflowY = \"hidden\";\n\t\tel.style.height = el.scrollHeight + \"px\";\n\t}\n\n\t_hide()\n\t{\n\t\tlet el = this._dom_root;\n\t\tel.style.transition = \"height 0.2s ease\";\n\t\tel.style.overflowY = \"hidden\";\n\t\tel.style.height = 0 + \"px\";\n\t}\n\n\tget visible()\n\t{\n\t\treturn this._visible;\n\t}\n\n\tset visible(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tif (value)\n\t\t\t\tthis._show();\n\t\t\telse\n\t\t\t\tthis._hide();\n\t\t}\n\t\tthis._visible = value;\n\t}\n\n\tget enabled()\n\t{\n\t\tif (this._in_form())\n\t\t\treturn !this._dom_root.classList.contains(\"llft-control-readonly\");\n\t\telse\n\t\t\treturn this._enabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tconsole.log(this._in_form(), this._dom_root, this._dom_root.classList);\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet disabled = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.disabled = disabled;\n\t\t\tthis._dom_root.classList.toggle(\"llft-control-readonly\", disabled);\n\t\t\tconsole.log(this._in_form(), this._dom_root, this._dom_root.classList);\n\t\t}\n\t\tthis._enabled = value;\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tthis._writable = value;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet s = \"<Field identifier=\";\n\t\ts += ul4._repr(this.control.identifier)\n\t\tif (this._dirty)\n\t\t\ts += \" is_dirty()=True\";\n\t\tif (this.errors.length > 0)\n\t\t\ts += \" has_errors()=True\";\n\t\ts += \">\"\n\t\treturn s;\n\t}\n\n\t[ul4.symbols.setattr](name, value)\n\t{\n\t\tif (name === \"visible\")\n\t\t\tthis.visible = ul4._bool(value);\n\t\telse if (name === \"enaabled\")\n\t\t\tthis.visible = ul4._bool(value);\n\t\telse\n\t\t\treturn super[ul4.symbols.getattr](name);\n\t}\n};\n\nField.prototype._ul4onattrs = [\"control\", \"record\", \"label\", \"value\", \"errors\", \"enabled\", \"writable\", \"_visible\"];\nField.prototype._ul4attrs = new Set([\"control\", \"record\", \"label\", \"value\", \"errors\", \"enabled\", \"writable\", \"visible\"]);\n\n\nclass BoolFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolField;\n\t}\n};\n\nlet boolfieldtype = new BoolFieldType(\"la\", \"BoolField\", \"Holds the value of a bool field of a record (and related information)\");\n\n\nexport class BoolField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"boolean\")\n\t\t{\n\t\t\tif (this.control.required && !change.value)\n\t\t\t\tchange.errors.push(this.msg_bool_truerequired(change.value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\treturn this._dom_control.checked;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tthis._dom_control.checked = value;\n\t}\n};\n\n\nclass IntFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntField;\n\t}\n};\n\nlet intfieldtype = new IntFieldType(\"la\", \"IntField\", \"Holds the value of an int field of a record (and related information)\");\n\n\nexport class IntField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (/^\\s*[-+]?\\d+\\s*$/.test(value))\n\t\t\treturn parseInt(value);\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = value;\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tif (Math.round(change.value) !== change.value)\n\t\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\t\t// Keep original floating point number\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tlet testvalue = this._parse(value);\n\t\t\tif (testvalue !== null)\n\t\t\t\tvalue = testvalue;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tsuper._set_dom_value(value + \"\");\n\t}\n};\n\n\nclass NumberFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberField;\n\t}\n};\n\nlet numberfieldtype = new NumberFieldType(\"la\", \"NumberField\", \"Holds the value of a number field of a record (and related information)\");\n\n\nexport class NumberField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numberfieldtype;\n\t}\n\n\t_parse(value)\n\t{\n\t\tif (value === null)\n\t\t\treturn null;\n\n\t\t// Try to ignore thousands separators and return the value as a number\n\t\tlet testvalue = value;\n\t\t// Count decimal delimiters\n\t\tlet seps = \"\";\n\t\tlet commas = 0;\n\t\tlet dots = 0\n\t\tfor (let i = 0; i < value.length; ++i)\n\t\t{\n\t\t\tlet c = value[i];\n\t\t\tif (c == \",\")\n\t\t\t{\n\t\t\t\tcommas++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t\telse if (c == \".\")\n\t\t\t{\n\t\t\t\tdots++;\n\t\t\t\tseps += c;\n\t\t\t}\n\t\t}\n\t\tlet convert = null;\n\t\tif (commas == 0)\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\t; // nothing to do\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse if (commas == 1)\n\t\t{\n\t\t\tif (dots == 1)\n\t\t\t\tconvert = (seps == \".,\") ? \"de\" : \"en\";\n\t\t\telse\n\t\t\t\tconvert = \"de\";\n\t\t}\n\t\telse // commas > 1\n\t\t{\n\t\t\tif (dots <= 1)\n\t\t\t\tconvert = \"en\";\n\t\t\telse\n\t\t\t\treturn null; // We can't guess what the user meant\n\t\t}\n\n\t\tif (convert === \"de\")\n\t\t\ttestvalue = testvalue.replace(/\\./g, \"\").replace(/,/g, \".\");\n\t\telse if (convert === \"en\")\n\t\t\ttestvalue = testvalue.replace(/,/g, \"\");\n\t\tlet floatvalue = parseFloat(testvalue);\n\t\tif (isNaN(floatvalue))\n\t\t\treturn value;\n\t\treturn floatvalue;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = this._parse(change.value);\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tchange.value = value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_number_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse if (typeof(change.value) === \"number\")\n\t\t{\n\t\t\tvalue = this._bound_value(value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\tchange.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_bound_value(value)\n\t{\n\t\tif (this.control.minimum !== null)\n\t\t{\n\t\t\tif (value < this.control.minimum)\n\t\t\t\tvalue = this.control.minimum;\n\t\t}\n\t\tif (this.control.maximum !== null)\n\t\t{\n\t\t\tif (value > this.control.maximum)\n\t\t\t\tvalue = this.control.maximum;\n\t\t}\n\t\treturn value;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (typeof(value) == \"string\")\n\t\t\t{\n\t\t\t\tlet testvalue = this._parse(value);\n\t\t\t\tif (testvalue !== null)\n\t\t\t\t\tvalue = testvalue;\n\t\t\t}\n\t\t\tif (typeof(value) === \"number\")\n\t\t\t{\n\t\t\t\tif (this.control.precision !== null)\n\t\t\t\t\tvalue = ul4._round(value, this.control.precision);\n\t\t\t\tvalue = this._bound_value(value);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (typeof(value) === \"number\")\n\t\t{\n\t\t\tvalue = this._bound_value(value);\n\t\t\tif (this.control.precision !== null)\n\t\t\t\tvalue = value.toFixed(this.control.precision);\n\t\t}\n\t\tvalue += \"\";\n\t\tif (this.globals.lang == \"de\" && this.control.precision === null)\n\t\t\tvalue = value.replace(\".\", \",\");\n\t\tsuper._set_dom_value(value);\n\t}\n};\n\n\nclass StringFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringField;\n\t}\n};\n\nlet stringfieldtype = new StringFieldType(\"la\", \"StringField\", \"Holds the value of a string field of a record (and related information)\");\n\n\nexport class StringField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet minlength = this.control.minlength;\n\t\t\tlet maxlength = this.control.maxlength;\n\t\t\tif (minlength !== null && change.value.length < minlength)\n\t\t\t\tchange.errors.push(this.msg_string_tooshort(change.value))\n\t\t\tif (maxlength !== null && change.value.length > maxlength)\n\t\t\t\tchange.errors.push(this.msg_string_toolong(change.value))\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\tget writable()\n\t{\n\t\treturn this._writable;\n\t}\n\n\tset writable(value)\n\t{\n\t\tif (this._in_form())\n\t\t{\n\t\t\tlet readonly = !value;\n\t\t\tfor (let node of this._dom_controls)\n\t\t\t\tnode.readOnly = readonly;\n\t\t}\n\t\tsuper.writable = value;\n\t}\n};\n\n\nclass EmailFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailField;\n\t}\n};\n\nlet emailfieldtype = new EmailFieldType(\"la\", \"EmailField\", \"Holds the value of a string/email field of a record (and related information)\");\n\n\nexport class EmailField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_email_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass URLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLField;\n\t}\n};\n\nlet urlfieldtype = new URLFieldType(\"la\", \"URLField\", \"Holds the value of a string/url field of a record (and related information)\");\n\n\nexport class URLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tlet url = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\turl = new URL(change.value);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t\tif (url !== null && url.protocol !== \"http:\" && url.protocol !== \"https:\")\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_url_format(change.value));\n\t\t\t}\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TelFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelField;\n\t}\n};\n\nlet telfieldtype = new TelFieldType(\"la\", \"TelField\", \"Holds the value of a string/tel field of a record (and related information)\");\n\n\nexport class TelField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (typeof(change.value) === \"string\" && change.value.length > 0)\n\t\t{\n\t\t\tconst re = /^\\\\+?[0-9 /()-]+$/;\n\t\t\tif (!re.test(change.value))\n\t\t\t\tchange.errors.push(this.msg_tel_format(change.value));\n\t\t}\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass TextAreaFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaField;\n\t}\n};\n\nlet textareafieldtype = new TextAreaFieldType(\"la\", \"TextAreaField\", \"Holds the value of a string/textarea field of a record (and related information)\");\n\n\nexport class TextAreaField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareafieldtype;\n\t}\n};\n\n\nclass HTMLFieldType extends StringFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLField;\n\t}\n};\n\nlet htmlfieldtype = new HTMLFieldType(\"la\", \"HTMLField\", \"Holds the value of a string/html field of a record (and related information)\");\n\n\nexport class HTMLField extends StringField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlfieldtype;\n\t}\n};\n\n\nclass GeoFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoField;\n\t}\n};\n\nlet geofieldtype = new GeoFieldType(\"la\", \"GeoField\", \"Holds the value of a geo field of a record (and related information)\");\n\n\nexport class GeoField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geofieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof Geo))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass FileFieldType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileField;\n\t}\n};\n\nlet filefieldtype = new FileFieldType(\"la\", \"FileField\", \"Holds the value of a file field of a record (and related information)\");\n\n\nexport class FileField extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (!(change.value instanceof File))\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\t// Always return `null``\n\t\treturn null;\n\t}\n\n\t_set_dom_value()\n\t{\n\t\t// Do nothing\n\t}\n};\n\n\nclass FileSignatureFieldType extends FileFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureField;\n\t}\n};\n\nlet filesignaturefieldtype = new FileSignatureFieldType(\"la\", \"FileSignatureField\", \"Holds the value of a file/signature field of a record (and related information)\");\n\n\nexport class FileSignatureField extends FileField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturefieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\t// FIXME: Implement handling of data URLs.\n\t\tsuper._validate(change);\n\t}\n};\n\n\nclass DateFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateFieldBase;\n\t}\n};\n\nlet datefieldbasetype = new DateFieldBaseType(\"la\", \"DateFieldBase\", \"Holds the value of a date field of a record (and related information)\");\n\n\nexport class DateFieldBase extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldbasetype;\n\t}\n\n\t_parse(value, format)\n\t{\n\t\tlet year = null, month = null, day = null, hour = 0, minute = 0, second = 0, ispm = null;\n\n\t\tfunction _int(v, len, min, max)\n\t\t{\n\t\t\tv = v.substring(0, len);\n\t\t\tif (v.length != len)\n\t\t\t\treturn null;\n\t\t\tv = parseInt(v, 10);\n\t\t\tif (isNaN(v) || v < min || v > max)\n\t\t\t\treturn null;\n\t\t\treturn v;\n\t\t}\n\n\t\twhile (value)\n\t\t{\n\t\t\t// Are both `value` and `format` not `null`,\n\t\t\t// i.e. neither `value` nor `format` is exhaused?\n\t\t\tif (!format)\n\t\t\t\treturn null;\n\t\t\tif (format.startsWith(\"%Y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 4);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(4);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%y\"))\n\t\t\t{\n\t\t\t\tyear = _int(value, 2);\n\t\t\t\tif (year === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%m\"))\n\t\t\t{\n\t\t\t\tmonth = _int(value, 2);\n\t\t\t\tif (month === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%d\"))\n\t\t\t{\n\t\t\t\tday = _int(value, 2);\n\t\t\t\tif (day === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%H\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%I\"))\n\t\t\t{\n\t\t\t\thour = _int(value, 2);\n\t\t\t\tif (hour === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%M\"))\n\t\t\t{\n\t\t\t\tminute = _int(value, 2);\n\t\t\t\tif (minute === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%S\"))\n\t\t\t{\n\t\t\t\tsecond = _int(value, 2);\n\t\t\t\tif (second === null)\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%p\"))\n\t\t\t{\n\t\t\t\tif (value.toLowerCase().startsWith(\"pm\"))\n\t\t\t\t\tispm = true;\n\t\t\t\telse if (value.toLowerCase().startsWith(\"am\"))\n\t\t\t\t\tispm = false;\n\t\t\t\telse\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(2);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse if (format.startsWith(\"%%\"))\n\t\t\t{\n\t\t\t\tif (!value.startsWith(\"%\"))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(2);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!value.startsWith(format.substring(0, 1)))\n\t\t\t\t\treturn null;\n\t\t\t\tvalue = value.substring(1);\n\t\t\t\tformat = format.substring(1);\n\t\t\t}\n\t\t}\n\t\t// Are both `value` and `format` `null`?\n\t\t// I.e. both `value` and `format` must be exhausted, otherwise ...\n\t\tif (format)\n\t\t\t// ... `format` has remaining content that the value didn't provide\n\t\t\treturn null;\n\n\t\t// Check existance of values and their range\n\t\tif (year === null)\n\t\t\treturn null;\n\t\tif (month === null || month < 1 || month > 12)\n\t\t\treturn null;\n\t\tif (day === null || day < 1 || day > 31) // FIXME: Use the actuall number of days\n\t\t\treturn null;\n\t\tif (ispm === null)\n\t\t{\n\t\t\tif (hour < 0 || hour > 23)\n\t\t\t\treturn null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (hour < 0 || hour > 11)\n\t\t\t\treturn null;\n\t\t\tif (ispm)\n\t\t\t\thour += 12;\n\t\t}\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (minute < 0 || minute > 59)\n\t\t\treturn null;\n\t\tif (second < 0 || second > 60)\n\t\t\treturn null;\n\t\treturn new Date(year, month-1, day, hour, minute, second);\n\t}\n\n\t_validate(change)\n\t{\n\t\tif (change.value === null || change.value === \"\")\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse if (change.value instanceof Date)\n\t\t{\n\t\t\tchange.value = this._convert(change.value);\n\t\t}\n\t\telse if (change.value instanceof ul4.Date_)\n\t\t{\n\t\t\tchange.value = this._convert(change.value._date);\n\t\t}\n\t\telse if (typeof(change.value) === \"string\")\n\t\t{\n\t\t\tlet value = null;\n\t\t\tfor (let format of this.control.formatstrings_parse())\n\t\t\t{\n\t\t\t\tvalue = this._parse(change.value, format);\n\t\t\t\tif (value !== null)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (value !== null)\n\t\t\t\tchange.value = this._convert(value);\n\t\t\telse\n\t\t\t\tchange.errors.push(this.msg_date_format(change.value));\n\t\t\t\t// Keep original invalid string\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(change.value));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (!value)\n\t\t\treturn null;\n\n\t\tfor (let format of this.control.formatstrings_parse())\n\t\t{\n\t\t\tlet date = this._parse(value, format);\n\t\t\tif (date !== null)\n\t\t\t\treturn this._convert(date);\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.control.formatstring(), this.globals.lang);\n\t\tsuper._set_dom_value(value);\n\t}\n};\n\n\nclass DateFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateField;\n\t}\n};\n\nlet datefieldtype = new DateFieldType(\"la\", \"DateField\", \"Holds the value of a date/date field of a record (and related information)\");\n\n\nexport class DateField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\treturn new ul4.Date_(date.getFullYear(), date.getMonth()+1, date.getDate());\n\t}\n};\n\n\nclass DatetimeMinuteFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteField;\n\t}\n};\n\nlet datetimeminutefieldtype = new DatetimeMinuteFieldType(\"la\", \"DatetimeMinuteField\", \"Holds the value of a date/datetimeminute field of a record (and related information)\");\n\n\nexport class DatetimeMinuteField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutefieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of seconds and milliseconds\n\t\tdate.setSeconds(0);\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n\nclass DatetimeSecondFieldType extends DateFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondField;\n\t}\n};\n\nlet datetimesecondfieldtype = new DatetimeSecondFieldType(\"la\", \"DatetimeSecondField\", \"Holds the value of a date/datetimesecond field of a record (and related information)\");\n\n\nexport class DatetimeSecondField extends DateFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondfieldtype;\n\t}\n\n\t_convert(date)\n\t{\n\t\t// Get rid of milliseconds\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t}\n};\n\n\nclass LookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupFieldBase;\n\t}\n};\n\nlet lookupfieldbasetype = new LookupFieldBaseType(\"la\", \"LookupFieldBase\", \"Base type of LookupField and MultipleLookupField\");\n\n\nexport class LookupFieldBase extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdate !== null)\n\t\t\treturn this._lookupdate;\n\t\telse\n\t\t\treturn this.control.lookupdata;\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tthis._lookupdate = value;\n\t}\n\n\t_find_lookupitem(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\t// If `lookupdata` is `null`, this probably an interface,\n\t\t\t// so we can't validate anything (note that interfaces will however go\n\t\t\t// away in the future)\n\t\t\tif (this.lookupdata === null)\n\t\t\t\treturn;\n\t\t\tlet lookupitem = this.control.lookupdata.get(v);\n\t\t\tif (lookupitem === undefined)\n\t\t\t{\n\t\t\t\t// If the lookup control is auto expandable,\n\t\t\t\t// the user may have given us a label\n\t\t\t\tif (this.control.autoexpandable)\n\t\t\t\t{\n\t\t\t\t\t// Search for the LookupItem with that label\n\t\t\t\t\tfor (let search_lookupitem of this.lookupdata.values())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (v === search_lookupitem.label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchange.value = search_lookupitem;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If we couldn't find the label, keep the label as it is.\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchange.errors.push(this.msg_lookup_unknownkey(v))\n\t\t\t\t\tchange.value = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = lookupitem;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof LookupItem)\n\t\t{\n\t\t\tlet value = this.control.lookupdata.get(v.key);\n\t\t\tif (value !== v)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_lookup_wrongitem(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass LookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupField;\n\t}\n};\n\nlet lookupfieldtype = new LookupFieldType(\"la\", \"LookupField\", \"Holds the value of a lookup field of a record (and related information)\");\n\n\nexport class LookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (v === null || v === \"\" || this.control.nonekey === v)\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t}\n\t}\n};\n\n\nclass LookupRadioFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioField;\n\t}\n};\n\nlet lookupradiofieldtype = new LookupRadioFieldType(\"la\", \"LookupRadioField\", \"Holds the value of a lookup/radio field of a record (and related information)\");\n\n\nexport class LookupRadioField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiofieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\treturn this.control.lookupdata.get(key);\n\t\t\t}\n\n\t\t}\n\t\treturn null;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tif (value instanceof LookupItem)\n\t\t\tvalue = value.key;\n\t\tif (value === null)\n\t\t\tvalue = this.control.nonekey;\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = node.getAttribute(\"value\") === value;\n\t}\n};\n\n\nclass LookupSelectFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectField;\n\t}\n};\n\nlet lookupselectfieldtype = new LookupSelectFieldType(\"la\", \"LookupSelectField\", \"Holds the value of a lookup/select field of a record (and related information)\");\n\n\nexport class LookupSelectField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\t\tif (value)\n\t\t{\n\t\t\tif (value === this.control.nonekey)\n\t\t\t\tvalue = null;\n\t\t\telse\n\t\t\t\tvalue = this.control.lookupdata.get(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.key : this.control.nonekey);\n\t}\n};\n\n\nclass LookupChoiceFieldType extends LookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceField;\n\t}\n};\n\nlet lookupchoicefieldtype = new LookupChoiceFieldType(\"la\", \"LookupChoiceField\", \"Holds the value of a lookup/choice field of a record (and related information)\");\n\n\nexport class LookupChoiceField extends LookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicefieldtype;\n\t}\n};\n\n\nclass MultipleLookupFieldType extends LookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupField;\n\t}\n};\n\nlet multiplelookupfieldtype = new MultipleLookupFieldType(\"la\", \"MultipleLookupField\", \"Holds the value of a multiple lookup field of a record (and related information)\");\n\n\nexport class MultipleLookupField extends LookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.nonekey === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_lookupitem(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_lookupitem(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleLookupCheckboxFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxField;\n\t}\n};\n\nlet multiplelookupcheckboxfieldtype = new MultipleLookupCheckboxFieldType(\"la\", \"MultipleLookupCheckboxField\", \"Holds the value of a multiplelookup/radio field of a record (and related information)\");\n\n\nexport class MultipleLookupCheckboxField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxfieldtype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let node of this._dom_controls)\n\t\t{\n\t\t\tif (node.checked)\n\t\t\t{\n\t\t\t\tlet key = node.getAttribute(\"value\");\n\t\t\t\tvalue.push(this.control.lookupdata.get(key));\n\t\t\t}\n\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\n\t\tfor (let node of this._dom_controls)\n\t\t\tnode.checked = values.has(node.getAttribute(\"value\"));\n\t}\n};\n\n\nclass MultipleLookupSelectFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectField;\n\t}\n};\n\nlet multiplelookupselectfieldtype = new MultipleLookupSelectFieldType(\"la\", \"MultipleLookupSelectField\", \"Holds the value of a multiplelookup/select field of a record (and related information)\");\n\nexport class MultipleLookupSelectField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = [];\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t{\n\t\t\tif (option.selected)\n\t\t\t\tvalue.push(this.control.lookupdata.get(option.getAttribute(\"value\")));\n\t\t}\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tlet values = new Set();\n\t\tfor (let value of change.value)\n\t\t\tvalues.add(value.key);\n\t\tfor (let option of this._dom_control.querySelectorAll(\"option\"))\n\t\t\toption.selected = values.has(option.getAttribute(\"value\"));\n\t}\n};\n\n\nclass MultipleLookupChoiceFieldType extends MultipleLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceField;\n\t}\n};\n\nlet multiplelookupchoicefieldtype = new MultipleLookupChoiceFieldType(\"la\", \"MultipleLookupChoiceField\", \"Holds the value of a multiplelookup/choice field of a record (and related information)\");\n\n\nexport class MultipleLookupChoiceField extends MultipleLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicefieldtype;\n\t}\n};\n\n\nclass AppLookupFieldBaseType extends FieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupFieldBase;\n\t}\n};\n\nlet applookupfieldbasetype = new AppLookupFieldBaseType(\"la\", \"AppLookupFieldBase\", \"Base type of AppLookupField and MultipleAppLookupField\");\n\n\nexport class AppLookupFieldBase extends Field\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldbasetype;\n\t}\n\n\tget lookupdata()\n\t{\n\t\tif (this._lookupdata !== null)\n\t\t\treturn this._lookupdata;\n\t\telse\n\t\t{\n\t\t\tif (this.control.lookup_app.records !== null)\n\t\t\t\treturn this.control.lookup_app.records;\n\t\t}\n\t\treturn new Map();\n\t}\n\n\tset lookupdata(value)\n\t{\n\t\tthis._lookupdata = value;\n\t}\n\n\t_find_record(change)\n\t{\n\t\tlet v = change.value;\n\t\tif (typeof(v) === \"string\")\n\t\t{\n\t\t\tlet record = this.control.lookup_app.records !== null ?\n\t\t\t\tthis.control.lookup_app.records.get(v) :\n\t\t\t\tundefined\n\t\t\t;\n\n\t\t\tif (record === undefined)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_unknownkey(v))\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tchange.value = record;\n\t\t\t}\n\t\t}\n\t\telse if (v instanceof Record)\n\t\t{\n\t\t\tif (v.app !== this.control.lookup_app)\n\t\t\t{\n\t\t\t\tchange.errors.push(this.msg_applookup_wrongrecord(v));\n\t\t\t\tchange.value = null;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange.errors.push(this.msg_field_wrong_type(v));\n\t\t\tchange.value = null;\n\t\t}\n\t}\n};\n\n\nclass AppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupField;\n\t}\n};\n\nlet applookupfieldtype = new AppLookupFieldType(\"la\", \"AppLookupField\", \"Holds the value of a applookup field of a record (and related information)\");\n\n\nexport class AppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tthis._find_record(change);\n\t}\n};\n\n\nclass AppLookupSelectFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectField;\n\t}\n};\n\nlet applookupselectfieldtype = new AppLookupSelectFieldType(\"la\", \"AppLookupSelectField\", \"Holds the value of a `applookup`/`select` field of a record (and related information)\");\n\n\nexport class AppLookupSelectField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectfieldtype;\n\t}\n\n\t_get_dom_value()\n\t{\n\t\tlet value = super._get_dom_value();\n\n\t\tif (this.control.lookup_app.records !== null)\n\t\t{\n\t\t\tvalue = this.control.lookup_app.records.get(value);\n\t\t\tif (value === undefined)\n\t\t\t\tvalue = null;\n\t\t}\n\t\telse\n\t\t\tvalue = null;\n\t\treturn value;\n\t}\n\n\t_set_dom_value(value)\n\t{\n\t\tlet change = {value: value, errors: []};\n\t\tthis._validate(change);\n\t\tsuper._set_dom_value(change.value != null ? change.value.id : this.control.nonekey);\n\t}\n};\n\n\nclass AppLookupRadioFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioField;\n\t}\n};\n\nlet applookupradiofieldtype = new AppLookupRadioFieldType(\"la\", \"AppLookupRadioField\", \"Holds the value of a `applookup`/`radio` field of a record (and related information)\");\n\n\nexport class AppLookupRadioField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiofieldtype;\n\t}\n};\n\n\nclass AppLookupChoiceFieldType extends AppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceField;\n\t}\n};\n\nlet applookupchoicefieldtype = new AppLookupChoiceFieldType(\"la\", \"AppLookupChoiceField\", \"Holds the value of a `applookup`/`choice` field of a record (and related information)\");\n\n\nexport class AppLookupChoiceField extends AppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicefieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupFieldType extends AppLookupFieldBaseType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupField;\n\t}\n};\n\nlet multipleapplookupfieldtype = new MultipleAppLookupFieldType(\"la\", \"MultipleAppLookupField\", \"Holds the value of a multiple applookup field of a record (and related information)\");\n\n\nexport class MultipleAppLookupField extends AppLookupFieldBase\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupfieldtype;\n\t}\n\n\t_validate(change)\n\t{\n\t\tlet v = change.value;\n\t\tlet islist = (Object.prototype.toString.call(v) === \"[object Array]\");\n\n\t\tif (v === null || v === \"\" || this.control.nonekey === v || (islist && v.length === 0))\n\t\t{\n\t\t\tif (this.control.required)\n\t\t\t\tchange.errors.push(this.msg_field_required(v));\n\t\t\tchange.value = [];\n\t\t}\n\t\telse if (islist)\n\t\t{\n\t\t\tlet newvalue = [];\n\t\t\tfor (let item of v)\n\t\t\t{\n\t\t\t\tlet singlechange = {value: item, errors: []};\n\t\t\t\tthis._find_record(singlechange);\n\t\t\t\tif (singlechange.errors.length > 0)\n\t\t\t\t\tchange.errors = [...change.errors, ...singlechange.errors];\n\t\t\t\telse\n\t\t\t\t\tnewvalue.push(singlechange.value);\n\t\t\t}\n\t\t\tchange.value = newvalue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._find_record(change);\n\t\t\tif (change.errors.length > 0)\n\t\t\t\tchange.value = [];\n\t\t\telse\n\t\t\t\tchange.value = [change.value];\n\t\t}\n\t}\n};\n\n\nclass MultipleAppLookupCheckboxFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxField;\n\t}\n};\n\nlet multipleapplookupcheckboxfieldtype = new MultipleAppLookupCheckboxFieldType(\"la\", \"MultipleAppLookupCheckboxField\", \"Holds the value of a `multipleapplookup`/`checkbox` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupCheckboxField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxfieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupSelectFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectField;\n\t}\n};\n\nlet multipleapplookupselectfieldtype = new MultipleAppLookupSelectFieldType(\"la\", \"MultipleAppLookupSelectField\", \"Holds the value of a `multipleapplookup`/`select` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupSelectField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectfieldtype;\n\t}\n};\n\n\nclass MultipleAppLookupChoiceFieldType extends MultipleAppLookupFieldType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceField;\n\t}\n};\n\nlet multipleapplookupchoicefieldtype = new MultipleAppLookupChoiceFieldType(\"la\", \"MultipleAppLookupChoiceField\", \"Holds the value of a `multipleapplookup`/`choice` field of a record (and related information)\");\n\n\nexport class MultipleAppLookupChoiceField extends MultipleAppLookupField\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicefieldtype;\n\t}\n};\n\n\nclass ControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Control;\n\t}\n};\n\nlet controltype = new ControlType(\"la\", \"Control\", \"Metainformation about a field in a LivingApps application\");\n\n\nexport class Control extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn controltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n\n\tget globals()\n\t{\n\t\treturn this.app.globals;\n\t}\n\n\tget fulltype()\n\t{\n\t\treturn this.subtype ? this.type + \"/\" + this.subtype : this.type;\n\t}\n\n\tget label()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn this._label;\n\t\tlet label = view_control.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tset label(value)\n\t{\n\t\tthis._label = value;\n\t}\n\n\tget default()\n\t{\n\t\treturn null;\n\t}\n\n\tget top()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.top : null;\n\t}\n\n\tget left()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.left : null;\n\t}\n\n\tget width()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.width : null;\n\t}\n\n\tget height()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.height : null;\n\t}\n\n\tget liveupdate()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.liveupdate : false;\n\t}\n\n\tget tabindex()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.tabindex : null;\n\t}\n\n\tget required()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.required : false;\n\t}\n\n\tget mode()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (this.app._active_view !== null && view_control === null)\n\t\t\treturn null;\n\t\tif (this.app.globals.mode === null)\n\t\t\treturn \"display\";\n\t\treturn view_control !== null ? view_control.mode : \"edit\";\n\t}\n\n\tget labelpos()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelpos : \"left\";\n\t}\n\n\tget labelwidth()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.labelwidth : null;\n\t}\n\n\tget autoalign()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null ? view_control.autoalign : true;\n\t}\n\n\tget in_active_view()\n\t{\n\t\tlet view_control = this._view_control();\n\t\treturn view_control !== null;\n\t}\n\n\t_view_control()\n\t{\n\t\tif (this.app._active_view === null)\n\t\t\treturn null;\n\t\tlet view_control = this.app._active_view.controls.get(this.identifier);\n\t\treturn view_control ?? null;\n\t}\n\n\t_logsearch(value, search)\n\t{\n\t\t//console.log(\"Searching for \" + ul4._repr(search.value) + \" in \" + ul4._repr(this) + \" with operator \" + search.operator + \" in value \" + ul4._repr(value));\n\t}\n\n\t// base implemntation, always returns ``false`` (i.e. \"not found\")\n\t// ``value`` is the value of the field\n\t// ``search`` is an object with information what we're searching for\n\t// keys in ``search`` are: ``operator`` (and ``value`` (if required by the operator))\n\tsearch(value, search)\n\t{\n\t\treturn false;\n\t}\n};\n\nControl.prototype.type = null;\nControl.prototype.subtype = null;\nControl.prototype._ul4onattrs = [\"identifier\", \"fieldname\", \"app\", \"_label\", \"priority\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\"];\nControl.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"fieldname\", \"app\", \"priority\", \"order\", \"ininsertprocedure\", \"inupdateprocedure\", \"fulltype\", \"label\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"tabindex\", \"required\", \"mode\", \"labelpos\", \"autoalign\", \"in_active_view\"]);\nControl.prototype._cssclass_root = \"llft-control\";\nControl.prototype._cssclass_control = \"input\";\n\n\nclass BoolControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof BoolControl;\n\t}\n};\n\nlet boolcontroltype = new BoolControlType(\"la\", \"BoolControl\", \"A LivingApps boolean field (type 'bool')\");\n\n\nexport class BoolControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn boolcontroltype;\n\t}\n\n\t// ``search`` must by ``null``, ``false`` or ``true``\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nBoolControl.prototype.type = \"bool\";\nBoolControl.prototype.fieldtype = BoolField;\n\n\nclass IntControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof IntControl;\n\t}\n};\n\nlet intcontroltype = new IntControlType(\"la\", \"IntControl\", \"A LivingApps integer field (type 'int')\");\n\n\nexport class IntControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn intcontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nIntControl.prototype.type = \"int\";\nIntControl.prototype.fieldtype = IntField;\n\n\nclass PlaceholderControldType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof PlaceholderControld;\n\t}\n};\n\nlet placeholdercontroldtype = new PlaceholderControldType(\"la\", \"PlaceholderControld\", \"A LivingApps field that has a placeholder\");\n\n\nclass PlaceholderControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn placeholdercontroldtype;\n\t}\n\n\tget placeholder()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.placeholder;\n\t}\n};\n\nPlaceholderControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"placeholder\"]);\n\n\nclass NumberControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NumberControl;\n\t}\n};\n\nlet numbercontroltype = new NumberControlType(\"la\", \"NumberControl\", \"A LivingApps number field (type 'number')\");\n\n\nexport class NumberControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn numbercontroltype;\n\t}\n\n\t// ``search.value`` must by ``null`` or an integer\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"range\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn false;\n\t\t\treturn (search.minvalue === null || search.minvalue <= value) && (search.maxvalue === null || value < search.maxvalue);\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nNumberControl.prototype.type = \"number\";\nNumberControl.prototype.fieldtype = NumberField;\nNumberControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"precision\", \"minimum\", \"maximum\"];\nNumberControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"precision\", \"minimum\", \"maximum\"]);\n\n\nclass StringControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof StringControl;\n\t}\n};\n\nlet stringcontroltype = new StringControlType(\"la\", \"StringControl\", \"A LivingApps number field (type 'string')\");\n\n\nexport class StringControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn stringcontroltype;\n\t}\n\n\t_user_placeholder(user, placeholder)\n\t{\n\t\tif (placeholder === null)\n\t\t\treturn null;\n\t\tswitch (placeholder)\n\t\t{\n\t\t\tcase \"{gender}\":\n\t\t\t\treturn user !== null ? user.gender : null;\n\t\t\tcase \"{title}\":\n\t\t\t\treturn user !== null ? user.title : null;\n\t\t\tcase \"{firstname}\":\n\t\t\t\treturn user !== null ? user.firstname : null;\n\t\t\tcase \"{surname}\":\n\t\t\t\treturn user !== null ? user.surname : null;\n\t\t\tcase \"{account}\":\n\t\t\t\treturn user !== null ? user.email : null;\n\t\t\tcase \"{streetname}\":\n\t\t\t\treturn user !== null ? user.streetname : null;\n\t\t\tcase \"{streetnumber}\":\n\t\t\t\treturn user !== null ? user.streetnumber : null;\n\t\t\tcase \"{street}\":\n\t\t\t\tif (user === null)\n\t\t\t\t\treturn null;\n\t\t\t\telse if (user.street === null)\n\t\t\t\t\treturn user.streetnumber;\n\t\t\t\telse if (user.streetnumber === null)\n\t\t\t\t\treturn user.street;\n\t\t\t\telse\n\t\t\t\t\treturn user.street + \" \" + user.streetnumber;\n\t\t\tcase \"{zip}\":\n\t\t\t\treturn user !== null ? user.zip : null;\n\t\t\tcase \"{phone}\":\n\t\t\t\treturn user !== null ? user.phone : null;\n\t\t\tcase \"{fax}\":\n\t\t\t\treturn user !== null ? user.fax : null;\n\t\t\tcase \"{company}\":\n\t\t\t\treturn user !== null ? user.company : null;\n\t\t\tcase \"{city}\":\n\t\t\t\treturn user !== null ? user.city : null;\n\t\t\tcase \"{summary}\":\n\t\t\t\treturn user !== null ? user.summary : null;\n\t\t\tcase \"{interests}\":\n\t\t\t\treturn user !== null ? user.interests : null;\n\t\t\tcase \"{personal_website}\":\n\t\t\t\treturn user !== null ? user.personal_website : null;\n\t\t\tcase \"{company_website}\":\n\t\t\t\treturn user !== null ? user.company_website : null;\n\t\t\tcase \"{position}\":\n\t\t\t\treturn user !== null ? user.position : null;\n\t\t\tcase \"{department}\":\n\t\t\t\treturn user !== null ? user.department : null;\n\t\t\tcase \"{today}\":\n\t\t\t\treturn ul4.today();\n\t\t\tdefault:\n\t\t\t\treturn placeholder;\n\t\t}\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this._user_placeholder(this.app.globals.user, view_control.default);\n\t}\n\n\tget minlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 0;\n\t\tlet minlength = view_control.minlength;\n\t\tif (minlength === null || minlength < 0)\n\t\t\treturn 0;\n\t\treturn minlength;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn 4000;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength === null || maxlength < 0 || maxlength > 4000)\n\t\t\treturn 4000;\n\t\treturn maxlength;\n\t}\n\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\t\tif (search.operator === \"equals\")\n\t\t\treturn search.value === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (search.value === null || value === null)\n\t\t\t\treturn search.value === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(search.value.toLowerCase()) >= 0;\n\t\t}\n\t}\n};\n\nStringControl.prototype.type = \"string\";\n\n\nclass TextControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextControl;\n\t}\n};\n\nlet textcontroltype = new TextControlType(\"la\", \"TextControl\", \"A LivingApps text field (type 'string/text')\");\n\n\nexport class TextControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textcontroltype;\n\t}\n};\n\nTextControl.prototype.subtype = \"text\";\nTextControl.prototype.fieldtype = StringField;\n\n\nclass EmailControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof EmailControl;\n\t}\n};\n\nlet emailcontroltype = new EmailControlType(\"la\", \"EmailControl\", \"A LivingApps email field (type 'string/email')\");\n\n\nexport class EmailControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn emailcontroltype;\n\t}\n};\n\nEmailControl.prototype.subtype = \"email\";\nEmailControl.prototype.fieldtype = EmailField;\n\n\nclass URLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLControl;\n\t}\n};\n\nlet urlcontroltype = new URLControlType(\"la\", \"URLControl\", \"A LivingApps URL field (type 'string/url')\");\n\n\nexport class URLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlcontroltype;\n\t}\n};\n\nURLControl.prototype.subtype = \"url\";\nURLControl.prototype.fieldtype = URLField;\n\n\nclass TelControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TelControl;\n\t}\n};\n\nlet telcontroltype = new TelControlType(\"la\", \"TelControl\", \"A LivingApps phone number field (type 'string/tel')\");\n\n\nexport class TelControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn telcontroltype;\n\t}\n};\n\nTelControl.prototype.subtype = \"tel\";\nTelControl.prototype.fieldtype = TelField;\n\n\nclass TextAreaControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TextAreaControl;\n\t}\n};\n\nlet textareacontroltype = new TextAreaControlType(\"la\", \"TextAreaControl\", \"A LivingApps textarea field (type 'string/textarea')\");\n\n\nexport class TextAreaControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn textareacontroltype;\n\t}\n\n\tget maxlength()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\t// We only get the encrypted text in encryption mode, so we can't check its length\n\t\tif (this.encrypted !== null)\n\t\t\treturn null;\n\t\tlet maxlength = view_control.maxlength;\n\t\tif (maxlength < 0)\n\t\t\treturn null;\n\t\treturn maxlength;\n\t}\n};\n\nTextAreaControl.prototype.subtype = \"textarea\";\nTextAreaControl.prototype.fieldtype = TextAreaField;\nTextAreaControl.prototype._ul4onattrs = [...StringControl.prototype._ul4onattrs, \"encrypted\"];\nTextAreaControl.prototype._ul4attrs = new Set([...StringControl.prototype._ul4attrs, \"encrypted\"]);\nTextAreaControl.prototype._cssclass_control = \"textarea\";\n\n\nclass HTMLControlType extends StringControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLControl;\n\t}\n};\n\nlet htmlcontroltype = new HTMLControlType(\"la\", \"HTMLControl\", \"A LivingApps HTML field (type 'string/html')\");\n\n\nexport class HTMLControl extends StringControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmlcontroltype;\n\t}\n};\n\nHTMLControl.prototype.subtype = \"html\";\nHTMLControl.prototype.fieldtype = HTMLField;\n\n\nclass DateControlType extends PlaceholderControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DateControl;\n\t}\n};\n\nlet datecontroltype = new DateControlType(\"la\", \"DateControl\", \"A LivingApps date field (type 'date/date')\");\n\n\nexport class DateControl extends PlaceholderControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn view_control.default === \"{today}\" ? ul4.today() : null;\n\t}\n\n\tformatstring(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\t\treturn this._formatstrings[lang];\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeMinuteControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeMinuteControl.prototype._formatstrings[\"intl\"],\n\t\t\tDatetimeSecondControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeSecondControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n\n\t// searchvalue must be ``null``, a ``Date`` object or a string\n\tsearch(value, search)\n\t{\n\t\tthis._logsearch(value, search);\n\n\t\tlet searchvalue = search.value;\n\t\tif (Object.prototype.toString.call(searchvalue) == \"[object Date]\")\n\t\t\tsearchvalue = ul4._format(searchvalue, this.formatstring(), this.app.language);\n\t\tif (value !== null)\n\t\t\tvalue = ul4._format(value, this.formatstring(), this.app.language);\n\n\t\tif (search.operator === \"equals\")\n\t\t\treturn searchvalue === value;\n\t\telse if (search.operator === \"contains\")\n\t\t{\n\t\t\tif (searchvalue === null || value === null)\n\t\t\t\treturn searchvalue === value;\n\t\t\telse\n\t\t\t\treturn value.toLowerCase().indexOf(searchvalue.toLowerCase()) >= 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nDateControl.prototype.type = \"date\";\nDateControl.prototype.subtype = \"date\";\nDateControl.prototype.fieldtype = DateField;\nDateControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y\",\n\t\"fr\": \"%d.%m.%Y\",\n\t\"it\": \"%d.%m.%Y\",\n\t\"en\": \"%m/%d/%Y\",\n\t\"intl\": [\"%Y-%m-%d\"]\n};\n\n\nclass DatetimeMinuteControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeMinuteControl;\n\t}\n};\n\nlet datetimeminutecontroltype = new DatetimeMinuteControlType(\"la\", \"DatetimeMinuteControl\", \"A LivingApps date field (type 'date/datetimeminute')\");\n\n\nexport class DatetimeMinuteControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimeminutecontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setSeconds(0);\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeSecondControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeSecondControl.prototype._formatstrings[\"intl\"],\n\t\t\tDateControl.prototype._formatstrings[lang],\n\t\t\t...DateControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n};\n\nDatetimeMinuteControl.prototype.subtype = \"datetimeminute\";\nDatetimeMinuteControl.prototype.fieldtype = DatetimeMinuteField;\nDatetimeMinuteControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M\",\n\t\"fr\": \"%d.%m.%Y %H:%M\",\n\t\"it\": \"%d.%m.%Y %H:%M\",\n\t\"en\": \"%m/%d/%Y %H:%M\",\n\t\"intl\": [\"%Y-%m-%dT%H:%M\", \"%Y-%m-%d %H:%M\"]\n};\n\n\nclass DatetimeSecondControlType extends DateControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof DatetimeSecondControl;\n\t}\n};\n\nlet datetimesecondcontroltype = new DatetimeSecondControlType(\"la\", \"DatetimeSecondControl\", \"A LivingApps date field (type 'date/datetimesecond')\");\n\n\nexport class DatetimeSecondControl extends DateControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn datetimesecondcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tif (view_control.default === \"{today}\")\n\t\t{\n\t\t\tlet now = new Date();\n\t\t\tnow.setMilliseconds(0);\n\t\t\treturn now;\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t}\n\n\tformatstrings_parse(lang)\n\t{\n\t\tlang = lang || this.globals.lang;\n\t\tif (lang !== \"de\" && lang !== \"fr\" && lang !== \"it\")\n\t\t\tlang = \"en\";\n\n\t\treturn [\n\t\t\tthis._formatstrings[lang],\n\t\t\t...this._formatstrings[\"intl\"],\n\t\t\tDatetimeMinuteControl.prototype._formatstrings[lang],\n\t\t\t...DatetimeMinuteControl.prototype._formatstrings[\"intl\"],\n\t\t\tDateControl.prototype._formatstrings[lang],\n\t\t\t...DateControl.prototype._formatstrings[\"intl\"]\n\t\t];\n\t}\n};\n\nDatetimeSecondControl.prototype.subtype = \"datetimesecond\";\nDatetimeSecondControl.prototype.fieldtype = DatetimeSecondField;\nDatetimeSecondControl.prototype._formatstrings = {\n\t\"de\": \"%d.%m.%Y %H:%M:%S\",\n\t\"fr\": \"%d.%m.%Y %H:%M:%S\",\n\t\"it\": \"%d.%m.%Y %H:%M:%S\",\n\t\"en\": \"%m/%d/%Y %H:%M:%S\",\n\t\"intl\": [\"%Y-%m-%dT%H:%M:%S\", \"%Y-%m-%d %H:%M:%S\"]\n};\n\n\nclass LookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupControl;\n\t}\n};\n\nlet lookupcontroltype = new LookupControlType(\"la\", \"LookupControl\", \"A LivingApps date field (type 'lookup')\");\n\n\nexport class LookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\treturn this.lookupdata.get(view_control) ?? null;\n\t}\n\n\tget autoexpandable()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn false;\n\t\treturn view_control.autoexpandable;\n\t}\n\n\tget nonekey()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget nonelabel()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (value === null)\n\t\t\t\treturn search.value === null;\n\t\t\telse\n\t\t\t\treturn value.key === search.value;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nLookupControl.prototype.type = \"lookup\";\nLookupControl.prototype.fieldtype = LookupField;\nLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookupdata\"];\nLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookupdata\"]);\n\n\nclass LookupSelectControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupSelectControl;\n\t}\n};\n\nlet lookupselectcontroltype = new LookupSelectControlType(\"la\", \"LookupSelectControl\", \"A LivingApps lookup field (type 'lookup/select')\");\n\n\nexport class LookupSelectControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupselectcontroltype;\n\t}\n};\n\nLookupSelectControl.prototype.subtype = \"select\";\nLookupSelectControl.prototype.fieldtype = LookupSelectField;\nLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass LookupRadioControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupRadioControl;\n\t}\n};\n\nlet lookupradiocontroltype = new LookupRadioControlType(\"la\", \"LookupRadioControl\", \"A LivingApps lookup field (type 'lookup/radio')\");\n\n\nexport class LookupRadioControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupradiocontroltype;\n\t}\n};\n\nLookupRadioControl.prototype.subtype = \"radio\";\nLookupRadioControl.prototype.fieldtype = LookupRadioField;\nLookupRadioControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass LookupChoiceControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupChoiceControl;\n\t}\n};\n\nlet lookupchoicecontroltype = new LookupChoiceControlType(\"la\", \"LookupChoiceControl\", \"A LivingApps lookup field (type 'lookup/choice')\");\n\n\nexport class LookupChoiceControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupchoicecontroltype;\n\t}\n};\n\nLookupChoiceControl.prototype.subtype = \"choice\";\nLookupChoiceControl.prototype.fieldtype = LookupChoiceField;\n\n\nclass AppLookupControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupControl;\n\t}\n};\n\nlet applookupcontroltype = new AppLookupControlType(\"la\", \"AppLookupControl\", \"A LivingApps lookup field (type 'applookup')\");\n\n\nexport class AppLookupControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupcontroltype;\n\t}\n\n\tget nonekey()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonekey;\n\t}\n\n\tget nonelabel()\n\t{\n\t\tlet view_control = this._view_control();\n\t\tif (view_control === null)\n\t\t\treturn null;\n\t\treturn view_control.lookupnonelabel;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (value === null || search.value === null)\n\t\t\treturn value === search.value;\n\t\telse\n\t\t\treturn value.search(search);\n\t}\n};\n\nAppLookupControl.prototype.type = \"applookup\";\nAppLookupControl.prototype.fieldtype = AppLookupField;\nAppLookupControl.prototype._ul4onattrs = [...Control.prototype._ul4onattrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"];\nAppLookupControl.prototype._ul4attrs = new Set([...Control.prototype._ul4attrs, \"lookup_app\", \"lookup_controls\", \"local_master_control\", \"local_detail_controls\", \"remote_master_control\"]);\n\n\nclass AppLookupSelectControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupSelectControl;\n\t}\n};\n\nlet applookupselectcontroltype = new AppLookupSelectControlType(\"la\", \"AppLookupSelectControl\", \"A LivingApps applookup field (type 'applookup/select')\");\n\n\nexport class AppLookupSelectControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupselectcontroltype;\n\t}\n};\n\nAppLookupSelectControl.prototype.subtype = \"select\";\nAppLookupSelectControl.prototype.fieldtype = AppLookupSelectField;\nAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass AppLookupRadioControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupRadioControl;\n\t}\n};\n\nlet applookupradiocontroltype = new AppLookupRadioControlType(\"la\", \"AppLookupRadioControl\", \"A LivingApps applookup field (type 'applookup/radio')\");\n\n\nexport class AppLookupRadioControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupradiocontroltype;\n\t}\n};\n\nAppLookupRadioControl.prototype.subtype = \"radio\";\nAppLookupRadioControl.prototype.fieldtype = AppLookupRadioField;\n\n\nclass AppLookupChoiceControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppLookupChoiceControl;\n\t}\n};\n\nlet applookupchoicecontroltype = new AppLookupChoiceControlType(\"la\", \"AppLookupChoiceControl\", \"A LivingApps applookup field (type 'applookup/choice')\");\n\n\nexport class AppLookupChoiceControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn applookupchoicecontroltype;\n\t}\n};\n\nAppLookupChoiceControl.prototype.subtype = \"choice\";\nAppLookupChoiceControl.prototype.fieldtype = AppLookupChoiceField;\n\n\nclass MultipleLookupControlType extends LookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupControl;\n\t}\n};\n\nlet multiplelookupcontroltype = new MultipleLookupControlType(\"la\", \"MultipleLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleLookupControl extends LookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcontroltype;\n\t}\n\n\tget default()\n\t{\n\t\tlet view_control = this._view_control();\n\n\t\tif (view_control === null)\n\t\t\treturn null;\n\n\t\tlet defaultValue = this.lookupdata.get(view_control)\n\n\t\treturn (defaultValue !== undefined) ? [defaultValue] : [];\n\t}\n\n\t// search.value must be ``null`` or a ``LookupItem`` key\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tfor (let item of value)\n\t\t\t{\n\t\t\t\tif (item.key === search.value)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleLookupControl.prototype.type = \"multiplelookup\";\nMultipleLookupControl.prototype.fieldtype = MultipleLookupField;\n\n\nclass MultipleLookupCheckboxControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupCheckboxControl;\n\t}\n};\n\nlet multiplelookupcheckboxcontroltype = new MultipleLookupCheckboxControlType(\"la\", \"MultipleLookupCheckboxControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/checkbox')\");\n\n\nexport class MultipleLookupCheckboxControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupcheckboxcontroltype;\n\t}\n\n\tget _sel_label()\n\t{\n\t\treturn this._sel_root + \" label:not([for]) > span\";\n\t}\n};\n\nMultipleLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleLookupCheckboxControl.prototype.fieldtype = MultipleLookupCheckboxField;\nMultipleLookupCheckboxControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass MultipleLookupSelectControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupSelectControl;\n\t}\n};\n\nlet multiplelookupselectcontroltype = new MultipleLookupSelectControlType(\"la\", \"MultipleLookupSelectControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/select')\");\n\n\nexport class MultipleLookupSelectControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupselectcontroltype;\n\t}\n};\n\nMultipleLookupSelectControl.prototype.subtype = \"select\";\nMultipleLookupSelectControl.prototype.fieldtype = MultipleLookupSelectField;\nMultipleLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleLookupChoiceControlType extends MultipleLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleLookupChoiceControl;\n\t}\n};\n\nlet multiplelookupchoicecontroltype = new MultipleLookupChoiceControlType(\"la\", \"MultipleLookupChoiceControl\", \"A LivingApps multiplelookup field (type 'multiplelookup/choice')\");\n\n\nexport class MultipleLookupChoiceControl extends MultipleLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multiplelookupchoicecontroltype;\n\t}\n};\n\nMultipleLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleLookupChoiceControl.prototype.fieldtype = MultipleLookupChoiceField;\n\n\nclass MultipleAppLookupControlType extends AppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupControl;\n\t}\n};\n\nlet multipleapplookupcontroltype = new MultipleAppLookupControlType(\"la\", \"MultipleAppLookupControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup')\");\n\n\nexport class MultipleAppLookupControl extends AppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcontroltype;\n\t}\n\n\t// ``search.value`` must be an object containing the search criteria for the referenced record\n\tsearch(value, search)\n\t{\n\t\tif (search.operator === \"equals\")\n\t\t{\n\t\t\tif (search.value === null)\n\t\t\t\treturn value.length === 0;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (let item of value)\n\t\t\t\t{\n\t\t\t\t\tif (item.search(search.value))\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n};\n\nMultipleAppLookupControl.prototype.type = \"multipleapplookup\";\nMultipleAppLookupControl.prototype.fieldtype = MultipleAppLookupField;\n\n\nclass MultipleAppLookupSelectControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupSelectControl;\n\t}\n};\n\nlet multipleapplookupselectcontroltype = new MultipleAppLookupSelectControlType(\"la\", \"MultipleAppLookupSelectControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/select')\");\n\n\nexport class MultipleAppLookupSelectControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupselectcontroltype;\n\t}\n};\n\nMultipleAppLookupSelectControl.prototype.subtype = \"select\";\nMultipleAppLookupSelectControl.prototype.fieldtype = MultipleAppLookupSelectField;\nMultipleAppLookupSelectControl.prototype._cssclass_control = \"select\";\n\n\nclass MultipleAppLookupCheckboxControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupCheckboxControl;\n\t}\n};\n\nlet multipleapplookupcheckboxcontroltype = new MultipleAppLookupCheckboxControlType(\"la\", \"MultipleAppLookupCheckboxControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/checkbox')\");\n\n\nexport class MultipleAppLookupCheckboxControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupcheckboxcontroltype;\n\t}\n};\n\nMultipleAppLookupCheckboxControl.prototype.subtype = \"checkbox\";\nMultipleAppLookupCheckboxControl.prototype.fieldtype = MultipleAppLookupCheckboxField;\n\n\nclass MultipleAppLookupChoiceControlType extends MultipleAppLookupControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MultipleAppLookupChoiceControl;\n\t}\n};\n\nlet multipleapplookupchoicecontroltype = new MultipleAppLookupChoiceControlType(\"la\", \"MultipleAppLookupChoiceControl\", \"A LivingApps multiple applookup field (type 'multipleapplookup/choice')\");\n\n\nexport class MultipleAppLookupChoiceControl extends MultipleAppLookupControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn multipleapplookupchoicecontroltype;\n\t}\n};\n\nMultipleAppLookupChoiceControl.prototype.subtype = \"choice\";\nMultipleAppLookupChoiceControl.prototype.fieldtype = MultipleAppLookupChoiceField;\n\n\nclass GeoControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof GeoControl;\n\t}\n};\n\nlet geocontroltype = new GeoControlType(\"la\", \"GeoControl\", \"A LivingApps geo field (type 'geo')\");\n\n\nexport class GeoControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geocontroltype;\n\t}\n};\n\nGeoControl.prototype.type = \"geo\";\nGeoControl.prototype.fieldtype = GeoField;\nGeoControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileControl;\n\t}\n};\n\nlet filecontroltype = new FileControlType(\"la\", \"FileControl\", \"A LivingApps upload field (type 'file')\");\n\n\nexport class FileControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filecontroltype;\n\t}\n};\n\nFileControl.prototype.type = \"file\";\nFileControl.prototype.fieldtype = FileField;\nFileControl.prototype._cssclass_root = \"llft-element\";\n\n\nclass FileSignatureControlType extends FileControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileSignatureControl;\n\t}\n};\n\nlet filesignaturecontroltype = new FileSignatureControlType(\"la\", \"FileSignatureControl\", \"A LivingApps signature image field (type 'file/signature')\");\n\n\nexport class FileSignatureControl extends FileControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filesignaturecontroltype;\n\t}\n};\n\nFileSignatureControl.prototype.subtype = \"signature\";\nFileSignatureControl.prototype.fieldtype = FileSignatureField;\n\n\nclass ButtonControlType extends ControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonControl;\n\t}\n};\n\nlet buttoncontroltype = new ButtonControlType(\"la\", \"ButtonControl\", \"A submit button\");\n\n\nexport class ButtonControl extends Control\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttoncontroltype;\n\t}\n};\n\nButtonControl.prototype.type = \"button\";\n\n\nclass LookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LookupItem;\n\t}\n};\n\nlet lookupitemtype = new LookupItemType(\"la\", \"LookupItem\", \"An option in a lookup control/field\");\n\n\nexport class LookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn lookupitemtype;\n\t}\n\n\tget label()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn this._label;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn this._label;\n\t\tlet label = view_lookupitem.label;\n\t\tif (label === null)\n\t\t\treturn this._label;\n\t\treturn label;\n\t}\n\n\tget visible()\n\t{\n\t\tif (this.control === null)\n\t\t\treturn true;\n\t\tlet view_lookupitem = this._view_lookupitem();\n\t\tif (view_lookupitem === null)\n\t\t\treturn true;\n\t\treturn view_lookupitem.visible;\n\t}\n\n\t_view_lookupitem()\n\t{\n\t\tlet identifier = this.control.identifier;\n\t\tlet active_view = this.control.app.active_view;\n\t\tif (active_view !== null && active_view.controls !== null)\n\t\t{\n\t\t\tlet view_control = active_view.controls.get(identifier);\n\t\t\tif (view_control !== undefined && view_control.lookupdata !== undefined && view_control.lookupdata !== null)\n\t\t\t{\n\t\t\t\tlet view_lookupitem = view_control.lookupdata.get(this.key);\n\t\t\t\tif (view_lookupitem !== undefined)\n\t\t\t\t\treturn view_lookupitem;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<LookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \"visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nLookupItem.prototype._ul4onattrs = [\"control\", \"key\", \"_label\"];\nLookupItem.prototype._ul4attrs = new Set([\"id\", \"control\", \"key\", \"label\"]);\n\n\nclass ViewLookupItemType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewLookupItem;\n\t}\n};\n\nlet viewlookupitemtype = new ViewLookupItemType(\"la\", \"ViewLookupItem\", \"View specific information about a lookup item\");\n\n\nexport class ViewLookupItem extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewlookupitemtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet repr = \"<ViewLookupItem key=\" + ul4._repr(this.key) + \" label=\" + ul4._repr(this.label);\n\t\tif (!this.visible)\n\t\t\trepr += \" visible=False\"\n\t\treturn repr + \">\";\n\t}\n};\n\nViewLookupItem.prototype._ul4onattrs = [\"key\", \"label\", \"visible\"];\nViewLookupItem.prototype._ul4attrs = new Set([\"key\", \"label\", \"visible\"]);\n\n\nclass LayoutControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof LayoutControl;\n\t}\n};\n\nlet layoutcontroltype = new LayoutControlType(\"la\", \"LayoutControl\", \"A decoration in an input form\");\n\n\nexport class LayoutControl extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn layoutcontroltype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nLayoutControl.prototype._ul4onattrs = [\"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\"];\nLayoutControl.prototype._ul4attrs = new Set([\"id\", \"label\", \"identifier\", \"view\", \"top\", \"left\", \"width\", \"height\"]);\n\n\nclass HTMLLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof HTMLLayoutControl;\n\t}\n};\n\nlet htmllayoutcontroltype = new HTMLLayoutControlType(\"la\", \"HTMLLayoutControl\", \"HTML decoration in an input form\");\n\n\nexport class HTMLLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn htmllayoutcontroltype;\n\t}\n};\n\nHTMLLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"value\"];\nHTMLLayoutControl.prototype._ul4attrs = new Set([LayoutControl.prototype._ul4attrs, \"value\"]);\n\n\nclass ImageLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ImageLayoutControl;\n\t}\n};\n\nlet imagelayoutcontroltype = new ImageLayoutControlType(\"la\", \"ImageLayoutControl\", \"An image decoration in an input form\");\n\n\nexport class ImageLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn imagelayoutcontroltype;\n\t}\n};\n\nImageLayoutControl.prototype._ul4onattrs = [...LayoutControl.prototype._ul4onattrs, \"original\", \"scaled\"];\nImageLayoutControl.prototype._ul4attrs = new Set([LayoutControl.prototype._ul4attrs, \"original\", \"scaled\"]);\n\n\nclass ButtonLayoutControlType extends LayoutControlType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ButtonLayoutControl;\n\t}\n};\n\nlet buttonlayoutcontroltype = new ButtonLayoutControlType(\"la\", \"ButtonLayoutControl\", \"A submit button in an input form\");\n\n\nexport class ButtonLayoutControl extends LayoutControl\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn buttonlayoutcontroltype;\n\t}\n};\n\n\nclass ViewControlType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ViewControl;\n\t}\n};\n\nlet viewcontroltype = new ViewControlType(\"la\", \"ViewControl\", \"Contains view specific information about a control\");\n\n\nexport class ViewControl extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn viewcontroltype;\n\t}\n\n\tget mode()\n\t{\n\t\treturn this._mode ? \"display\" : \"edit\";\n\t}\n};\n\nViewControl.prototype._ul4onattrs = [\"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"_mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"];\nViewControl.prototype._ul4attrs = new Set([\"id\", \"view\", \"control\", \"top\", \"left\", \"width\", \"height\", \"liveupdate\", \"default\", \"tabindex\", \"minlength\", \"maxlength\", \"required\", \"placeholder\", \"mode\", \"labelpos\", \"lookupnonekey\", \"lookupnonelabel\", \"label\", \"autoalign\", \"labelwidth\", \"lookupdata\", \"autoexpandable\"]);\n\n\nclass UserType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof User;\n\t}\n};\n\nlet usertype = new UserType(\"la\", \"User\", \"A LivingApps user/account\");\n\n\nexport class User extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn usertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<User id=\" + ul4._repr(this.id) + \" firstname=\" + ul4._repr(this.firstname) + \" surname=\" + ul4._repr(this.surname) + \" email=\" + ul4._repr(this.email) + \">\";\n\t}\n};\n\nUser.prototype._ul4onattrs = [\"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"avatarsmall\", \"avatarlarge\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\"];\nUser.prototype._ul4attrs = new Set([\"id\", \"_id\", \"gender\", \"title\", \"firstname\", \"surname\", \"initials\", \"email\", \"streetname\", \"streetnumber\", \"zip\", \"city\", \"phone\", \"fax\", \"lang\", \"avatarsmall\", \"avatarlarge\", \"summary\", \"interests\", \"personalwebsite\", \"companywebsite\", \"company\", \"position\", \"department\", \"keyviews\"]);\n\n\nclass FileType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof File;\n\t}\n};\n\nlet filetype = new FileType(\"la\", \"File\", \"An uploaded file\");\n\n\nexport class File extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn filetype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<File id=\" + ul4._repr(this.id) + \" url=\" + ul4._repr(this.url) + \" filename=\" + ul4._repr(this.filename) + \">\";\n\t}\n\n\tget archive_url()\n\t{\n\t\tif (this.archive ==- null)\n\t\t\treturn this.url;\n\t\treturn this.archive.url + \"/\" + this.filename;\n\t}\n};\n\nFile.prototype._ul4onattrs = [\"url\", \"filename\", \"mimetype\", \"width\", \"height\", \"internalid\", \"createdat\", \"size\", \"archive\"];\nFile.prototype._ul4attrs = new Set([\"id\", \"url\", \"archive_url\", \"filename\", \"mimetype\", \"width\", \"height\", \"size\", \"archive\", \"createdat\"]);\n\n\nclass GeoType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Geo;\n\t}\n};\n\nlet geotype = new GeoType(\"la\", \"Geo\", \"Geographical coordinates and location information\");\n\n\nexport class Geo extends Base\n{\n\tconstructor(lat, long, info)\n\t{\n\t\tsuper(null);\n\t\tthis.lat = lat;\n\t\tthis.long = long;\n\t\tthis.info = info;\n\t}\n\n\t[ul4.symbols.type]()\n\t{\n\t\treturn geotype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Geo lat=\" + ul4._repr(this.lat) + \" long=\" + ul4._repr(this.long) + \" info=\" + ul4._repr(this.info) + \">\";\n\t}\n};\n\nGeo.prototype._ul4onattrs = [\"lat\", \"long\", \"info\"];\nGeo.prototype._ul4attrs = new Set([\"lat\", \"long\", \"info\"]);\n\n\nclass AttachmentType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Attachment;\n\t}\n};\n\nlet attachmenttype = new AttachmentType(\"la\", \"Attachment\", \"An attachment of a record\");\n\n\nexport class Attachment extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn attachmenttype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" id=\" + ul4._repr(this.id) + \" label=\" + ul4._repr(this.label) + \">\";\n\t}\n};\n\nAttachment.prototype._ul4onattrs = [\"record\", \"label\", \"active\"];\nAttachment.prototype._ul4attrs = new Set([\"id\", \"record\", \"label\", \"active\"]);\n\n\nclass NoteAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof NoteAttachment;\n\t}\n};\n\nlet noteattachmenttype = new NoteAttachmentType(\"la\", \"NoteAttachment\", \"A note attachment of a record\");\n\n\nexport class NoteAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn noteattachmenttype;\n\t}\n};\n\nNoteAttachment.prototype.type = \"noteattachment\";\nNoteAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nNoteAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass URLAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof URLAttachment;\n\t}\n};\n\nlet urlattachmenttype = new URLAttachmentType(\"la\", \"URLAttachment\", \"A URL attachment of a record\");\n\n\nexport class URLAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn urlattachmenttype;\n\t}\n};\n\nURLAttachment.prototype.type = \"urlattachment\";\nURLAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nURLAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass FileAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof FileAttachment;\n\t}\n};\n\nlet fileattachmenttype = new FileAttachmentType(\"la\", \"FileAttachment\", \"A file attachment of a record\");\n\n\nexport class FileAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn fileattachmenttype;\n\t}\n};\n\nFileAttachment.prototype.type = \"fileattachment\";\nFileAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nFileAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass ImageAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof ImageAttachment;\n\t}\n};\n\nlet imageattachmenttype = new ImageAttachmentType(\"la\", \"ImageAttachment\", \"An image attachment of a record\");\n\n\nexport class ImageAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn imageattachmenttype;\n\t}\n};\n\nImageAttachment.prototype.type = \"imageattachment\";\nImageAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"original\", \"thumb\", \"small\", \"medium\",\"large\"];\nImageAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"original\", \"thumb\", \"small\", \"medium\", \"large\"]);\n\n\nclass JSONAttachmentType extends AttachmentType\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof JSONAttachment;\n\t}\n};\n\nlet jsonattachmenttype = new JSONAttachmentType(\"la\", \"JSONAttachment\", \"A JSON attachment of a record\");\n\n\nexport class JSONAttachment extends Attachment\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn jsonattachmenttype;\n\t}\n\n\t_dumpUL4ONAttr(name)\n\t{\n\t\tif (name === \"value\")\n\t\t\treturn ul4._asjson(this.value);\n\t\telse\n\t\t\treturn this[name];\n\t}\n\n\t_loadUL4ONAttr(name, value)\n\t{\n\t\tif (name === \"value\")\n\t\t\tthis.value = ul4._fromjson(value);\n\t\telse\n\t\t\tthis[name] = value\n\t}\n};\n\nJSONAttachment.prototype.type = \"jsonattachment\";\nJSONAttachment.prototype._ul4onattrs = [...Attachment.prototype._ul4onattrs, \"value\"];\nJSONAttachment.prototype._ul4attrs = new Set([...Attachment.prototype._ul4onattrs, \"value\"]);\n\n\nclass InstallationType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Installation;\n\t}\n};\n\nlet installationtype = new InstallationType(\"la\", \"Installation\", \"The installation that created an app\");\n\n\nexport class Installation extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn installationtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<Installation id=\" + ul4._repr(this.id) + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nInstallation.prototype._ul4onattrs = [\"name\"];\nInstallation.prototype._ul4attrs = new Set([\"id\", \"name\"]);\n\n\nclass CategoryType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Category;\n\t}\n};\n\nlet categorytype = new CategoryType(\"la\", \"Category\", \"A navigation category\");\n\n\nexport class Category extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn categorytype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\tlet v = [];\n\t\tlet category = this;\n\t\twhile (category !== null)\n\t\t{\n\t\t\tv.splice(0, 0, category.identifier);\n\t\t\tcategory = category.parent;\n\t\t}\n\t\treturn \"<Category id=\" + ul4._repr(this.id) + \" identifierpath=\" + ul4._repr(v.join(\"/\")) +  + \" name=\" + ul4._repr(this.name) + \">\";\n\t}\n};\n\nCategory.prototype._ul4onattrs = [\"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"];\nCategory.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"order\", \"parent\", \"children\", \"apps\"]);\n\n\nclass KeyViewType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof KeyView;\n\t}\n};\n\nlet keyviewtype = new KeyViewType(\"la\", \"KeyView\", \"Object granting access to a view template\");\n\n\nexport class KeyView extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn keyviewtype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<KeyView id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nKeyView.prototype._ul4onattrs = [\"identifier\", \"name\", \"key\", \"user\"];\nKeyView.prototype._ul4attrs = new Set([\"id\", \"identifier\", \"name\", \"key\", \"user\"]);\n\n\nclass AppParameterType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AppParameter;\n\t}\n};\n\nlet appparametertype = new AppParameterType(\"la\", \"AppParameter\", \"A parameter of a LivingApps application\");\n\n\nexport class AppParameter extends Base\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn appparametertype;\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<AppParameter id=\" + ul4._repr(this.id) + \" identifier=\" + ul4._repr(this.identifier) + \">\";\n\t}\n};\n\nAppParameter.prototype._ul4onattrs = [\"app\", \"identifier\", \"description\", \"value\"];\nAppParameter.prototype._ul4attrs = new Set([\"id\", \"app\", \"identifier\", \"description\", \"value\"]);\n\n\nclass FormType extends ul4.Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Form;\n\t}\n};\n\nlet formtype = new FormType(\"la\", \"Form\", \"The input form.\");\n\nexport class Form extends ul4.Proto\n{\n\t[ul4.symbols.type]()\n\t{\n\t\treturn formtype;\n\t}\n\n\tget enabled()\n\t{\n\t\treturn !document.querySelector(this._sel_form).disabled;\n\t}\n\n\tset enabled(value)\n\t{\n\t\tdocument.querySelector(this._sel_form).disabled = ul4._not(value);\n\t}\n\n\t[ul4.symbols.repr]()\n\t{\n\t\treturn \"<\" + this.constructor.name + \" enabled=\" + ul4._repr(this.enabled) + \">\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[ul4.symbols.repr]();\n\t}\n};\n\nForm.prototype._ul4attrs = new Set([\"enabled\"]);\nForm.prototype._sel_form = \"#livingapps-form form [type=submit]\";\n\n\nlet classes = [\n\tGlobals,\n\tFlashMessage,\n\tApp,\n\tView,\n\tDataSource,\n\tRecord,\n\tBoolControl,\n\tIntControl,\n\tNumberControl,\n\tTextControl,\n\tEmailControl,\n\tURLControl,\n\tTelControl,\n\tTextAreaControl,\n\tDateControl,\n\tDatetimeMinuteControl,\n\tDatetimeSecondControl,\n\tLookupControl,\n\tLookupSelectControl,\n\tLookupRadioControl,\n\tLookupChoiceControl,\n\tAppLookupControl,\n\tAppLookupSelectControl,\n\tAppLookupRadioControl,\n\tAppLookupChoiceControl,\n\tMultipleLookupControl,\n\tMultipleLookupSelectControl,\n\tMultipleLookupCheckboxControl,\n\tMultipleLookupChoiceControl,\n\tMultipleAppLookupControl,\n\tMultipleAppLookupSelectControl,\n\tMultipleAppLookupCheckboxControl,\n\tMultipleAppLookupChoiceControl,\n\tGeoControl,\n\tFileControl,\n\tFileSignatureControl,\n\tButtonControl,\n\tField,\n\tBoolField,\n\tStringField,\n\tEmailField,\n\tURLField,\n\tTelField,\n\tTextAreaField,\n\tHTMLField,\n\tIntField,\n\tNumberField,\n\tGeoField,\n\tFileField,\n\tFileSignatureField,\n\tDateFieldBase,\n\tDateField,\n\tDatetimeMinuteField,\n\tDatetimeSecondField,\n\tLookupFieldBase,\n\tLookupField,\n\tMultipleLookupField,\n\tAppLookupFieldBase,\n\tAppLookupField,\n\tMultipleAppLookupField,\n\tLookupItem,\n\tViewLookupItem,\n\tLayoutControl,\n\tHTMLLayoutControl,\n\tImageLayoutControl,\n\tButtonLayoutControl,\n\tViewControl,\n\tUser,\n\tFile,\n\tGeo,\n\tNoteAttachment,\n\tURLAttachment,\n\tFileAttachment,\n\tImageAttachment,\n\tJSONAttachment,\n\tInstallation,\n\tCategory,\n\tKeyView,\n\tAppParameter\n];\n\nfor (let constructor of classes)\n{\n\tul4.register(\"de.livinglogic.livingapi.\" + constructor.name.toLowerCase(), constructor);\n}\n"],"names":["Base","id","this","encoder","i","_ul4onattrs","length","dump","_dumpUL4ONAttr","name","decoder","iter","loadcontent","iteritem","next","done","_loadUL4ONAttr","value","_setDefaultUL4ONAttr","ul4","symbols","getattr","_ul4attrs","has","realvalue","bind","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","AttributeError","repr","constructor","Proto","Handler","record","globalstype","obj","Globals","Type","version","hostname","platform","user","lang","app","maxdbactions","maxtemplateruntime","flashmessages","handler","type","url","width","height","enlarge","gravity","quality","rotate","blur","sharpen","format","cache","filename","File","encodeURIComponent","result","rotatet","_repr","geo1","geo2","sqsin","x","Math","sin","sqcos","sqsos","cos","deg2rad","PI","flat","lat1","lat","long1","lat2","F","G","l","S","C","w","atan","sqrt","D","T","H2","prototype","Set","flashmessagetype","FlashMessage","title","apptype","App","values","call","globals","save","active_view","Map","layout_controls","Record","_ismap","keys","identifier","fields","ArgumentError","_make_fields","_isobject","TypeError","_list","dicttype","items","startsWith","controls","substr","get","params","_active_view","view","views","ValueError","View","expose","insert","viewtype","datasourcetype","DataSource","recordtype","createdat","createdby","updatedat","updatedby","updatecount","_sparsevalues","_values","_fields","children","attachments","errors","_sparsefielderrors","_sparsefieldlookupdata","_is_deleted","_is_new","defaults","lookupdata","control","field","fieldtype","set","_sparselookupdata","mode","v","priority","is_empty","push","state","join","is_dirty","has_errors","entries","key","search","fieldsearch","_bool","setattr","update","FieldType","Field","_label","_lookupdate","_value","_this4","_in_form","_dirty","_enabled","_writable","_visible","_get_dom_value","oldvalue","change","_validate","_ne","_set_dom_value","_dom_label","textContent","label","_set_dom_label","_islist","searchvalue","_type","minlength","maxlength","_cssclass_root","_sel_root","_cssclass_control","document","querySelector","_sel_label","_sel_control","querySelectorAll","_dom_control","el","_dom_root","style","transition","overflowY","scrollHeight","_show","_hide","classList","contains","console","log","disabled","_dom_controls","toggle","s","visible","boolfieldtype","BoolField","required","msg_field_required","msg_bool_truerequired","msg_field_wrong_type","checked","intfieldtype","IntField","test","parseInt","_parse","msg_number_format","round","testvalue","numberfieldtype","NumberField","seps","commas","dots","c","convert","replace","floatvalue","parseFloat","isNaN","_bound_value","precision","_round","minimum","maximum","toFixed","StringFieldType","StringField","stringfieldtype","msg_string_tooshort","msg_string_toolong","readonly","readOnly","emailfieldtype","EmailField","msg_email_format","urlfieldtype","URLField","URL","exc","msg_url_format","protocol","telfieldtype","TelField","msg_tel_format","textareafieldtype","TextAreaField","htmlfieldtype","HTMLField","geofieldtype","GeoField","Geo","FileFieldType","FileField","filefieldtype","filesignaturefieldtype","FileSignatureField","DateFieldBaseType","DateFieldBase","datefieldbasetype","year","month","day","hour","minute","second","ispm","_int","len","min","max","substring","toLowerCase","Date","_convert","Date_","_date","formatstrings_parse","msg_date_format","date","_format","formatstring","datefieldtype","DateField","getFullYear","getMonth","getDate","datetimeminutefieldtype","DatetimeMinuteField","setSeconds","setMilliseconds","datetimesecondfieldtype","DatetimeSecondField","LookupFieldBaseType","LookupFieldBase","lookupfieldbasetype","lookupitem","undefined","autoexpandable","search_lookupitem","msg_lookup_unknownkey","LookupItem","msg_lookup_wrongitem","LookupFieldType","LookupField","lookupfieldtype","nonekey","_find_lookupitem","lookupradiofieldtype","LookupRadioField","node","getAttribute","lookupselectfieldtype","LookupSelectField","lookupchoicefieldtype","LookupChoiceField","MultipleLookupFieldType","MultipleLookupField","multiplelookupfieldtype","islist","Object","toString","newvalue","singlechange","multiplelookupcheckboxfieldtype","MultipleLookupCheckboxField","add","multiplelookupselectfieldtype","MultipleLookupSelectField","option","selected","multiplelookupchoicefieldtype","MultipleLookupChoiceField","AppLookupFieldBaseType","AppLookupFieldBase","applookupfieldbasetype","_lookupdata","lookup_app","records","msg_applookup_unknownkey","msg_applookup_wrongrecord","AppLookupFieldType","AppLookupField","applookupfieldtype","_find_record","applookupselectfieldtype","AppLookupSelectField","applookupradiofieldtype","AppLookupRadioField","applookupchoicefieldtype","AppLookupChoiceField","MultipleAppLookupFieldType","MultipleAppLookupField","multipleapplookupfieldtype","multipleapplookupcheckboxfieldtype","MultipleAppLookupCheckboxField","multipleapplookupselectfieldtype","MultipleAppLookupSelectField","multipleapplookupchoicefieldtype","MultipleAppLookupChoiceField","ControlType","Control","controltype","subtype","view_control","_view_control","top","left","liveupdate","tabindex","labelpos","labelwidth","autoalign","boolcontroltype","BoolControl","_logsearch","operator","intcontroltype","IntControl","placeholdercontroldtype","PlaceholderControld","PlaceholderControl","placeholder","numbercontroltype","PlaceholderControlType","NumberControl","minvalue","maxvalue","StringControlType","StringControl","stringcontroltype","gender","firstname","surname","email","streetname","streetnumber","street","zip","phone","fax","company","city","summary","interests","personal_website","company_website","position","department","today","_user_placeholder","indexOf","textcontroltype","TextControl","emailcontroltype","EmailControl","urlcontroltype","URLControl","telcontroltype","TelControl","textareacontroltype","TextAreaControl","encrypted","htmlcontroltype","HTMLControl","DateControlType","DateControl","datecontroltype","_formatstrings","DatetimeMinuteControl","DatetimeSecondControl","language","datetimeminutecontroltype","now","datetimesecondcontroltype","LookupControlType","LookupControl","lookupcontroltype","lookupnonekey","lookupnonelabel","lookupselectcontroltype","LookupSelectControl","lookupradiocontroltype","LookupRadioControl","lookupchoicecontroltype","LookupChoiceControl","AppLookupControlType","AppLookupControl","applookupcontroltype","applookupselectcontroltype","AppLookupSelectControl","applookupradiocontroltype","AppLookupRadioControl","applookupchoicecontroltype","AppLookupChoiceControl","MultipleLookupControlType","MultipleLookupControl","multiplelookupcontroltype","defaultValue","multiplelookupcheckboxcontroltype","MultipleLookupCheckboxControl","multiplelookupselectcontroltype","MultipleLookupSelectControl","multiplelookupchoicecontroltype","MultipleLookupChoiceControl","MultipleAppLookupControlType","MultipleAppLookupControl","multipleapplookupcontroltype","multipleapplookupselectcontroltype","MultipleAppLookupSelectControl","multipleapplookupcheckboxcontroltype","MultipleAppLookupCheckboxControl","multipleapplookupchoicecontroltype","MultipleAppLookupChoiceControl","geocontroltype","GeoControl","FileControlType","FileControl","filecontroltype","filesignaturecontroltype","FileSignatureControl","buttoncontroltype","ButtonControl","lookupitemtype","view_lookupitem","_view_lookupitem","viewlookupitemtype","ViewLookupItem","LayoutControlType","LayoutControl","layoutcontroltype","htmllayoutcontroltype","HTMLLayoutControl","imagelayoutcontroltype","ImageLayoutControl","buttonlayoutcontroltype","ButtonLayoutControl","viewcontroltype","ViewControl","_mode","usertype","User","filetype","archive","geotype","long","info","AttachmentType","Attachment","attachmenttype","noteattachmenttype","NoteAttachment","urlattachmenttype","URLAttachment","fileattachmenttype","FileAttachment","imageattachmenttype","ImageAttachment","jsonattachmenttype","JSONAttachment","_asjson","_fromjson","installationtype","Installation","categorytype","Category","category","splice","parent","keyviewtype","KeyView","appparametertype","AppParameter","formtype","Form","_sel_form","_not","enabled","register"],"mappings":"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"}