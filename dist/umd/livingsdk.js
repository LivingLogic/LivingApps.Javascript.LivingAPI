!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/es6.array.last-index-of"),require("core-js/modules/es6.array.sort"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.regexp.replace"),require("core-js/modules/es6.array.index-of"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/es6.date.to-string"),require("core-js/modules/es6.function.name"),require("core-js/modules/es6.regexp.match"),require("core-js/modules/es6.set"),require("core-js/modules/es6.array.for-each"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es6.array.iterator"),require("core-js/modules/es6.string.iterator"),require("core-js/modules/es6.map"),require("core-js/modules/es6.object.define-property"),require("core-js/modules/es6.regexp.search"),require("core-js/modules/es6.date.now"),require("core-js/modules/es6.promise"),require("axios"),require("https")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es6.array.last-index-of","core-js/modules/es6.array.sort","core-js/modules/es6.regexp.split","core-js/modules/es6.regexp.replace","core-js/modules/es6.array.index-of","core-js/modules/es6.regexp.to-string","core-js/modules/es6.date.to-string","core-js/modules/es6.function.name","core-js/modules/es6.regexp.match","core-js/modules/es6.set","core-js/modules/es6.array.for-each","core-js/modules/web.dom.iterable","core-js/modules/es6.array.iterator","core-js/modules/es6.string.iterator","core-js/modules/es6.map","core-js/modules/es6.object.define-property","core-js/modules/es6.regexp.search","core-js/modules/es6.date.now","core-js/modules/es6.promise","axios","https"],t):t(e.livingsdk={},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e.axios,e.https)}(this,function(e,t,r,n,i,o,s,a,u,l,_,c,h,f,p,d,m,g,v,b,y,S){"use strict";function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y=y&&y.hasOwnProperty("default")?y.default:y;var k={},w={};if(k.version="41",w._registry={},w._havemap="function"==typeof Map&&"function"==typeof Map.prototype.forEach,w._havemapconstructor=!1,w._havemap)try{1==new Map([[1,2]]).size&&(w._havemapconstructor=!0)}catch(e){}if(w._haveset="function"==typeof Set&&"function"==typeof Set.prototype.forEach,w._havesetconstructor=!1,w._haveset)try{2==new Set([1,2]).size&&(w._havesetconstructor=!0)}catch(e){}w._makemap=function(){for(var e=new Map,t=0;t<arguments.length;++t){var r=arguments[t];e.set(r[0],r[1])}return e},w._emptymap=function(){return w._havemap?new Map:{}},w._havemap?w._setmap=function(e,t,r){e.__proto__===Map.prototype?e.set(t,r):e[t]=r}:w._setmap=function(e,t,r){e[t]=r},w._haveset?w._makeset=function(){for(var e=this._haveset?new Set:k._Set.create(),t=0;t<arguments.length;++t)e.add(arguments[t]);return e}:w._makeset=function(){for(var e=k._Set.create(),t=0;t<arguments.length;++t)e.add(arguments[t]);return e},w.register=function(e,t){t.ul4onname=e,w._registry[e]=function(){return t.create()}},w.dumps=function(e,t){var r=w.Encoder.create(t);return r.dump(e),r.finish()},w.loads=function(e,t){return w.Decoder.create(e,t).load()},w.Encoder={create:function(e){var t=k._clone(this);return t.indent=e||null,t.data=[],t._level=0,t._strings2index={},t._ids2index={},t._backrefs=0,t},_line:function(e){var t,r;if(null!==this.indent)for(t=0;t<this._level;++t)this.data.push(this.indent);else this.data.length&&this.data.push(" ");if(this.data.push(e),1<arguments.length){for(r=this.indent,this.indent=null,t=1;t<arguments.length;++t)this.dump(arguments[t]);this.indent=r}null!==this.indent&&this.data.push("\n")},finish:function(){return this.data.join("")},dump:function(e){if(null===e)this._line("n");else if("boolean"==typeof e)this._line(e?"bT":"bF");else if("number"==typeof e){var t=Math.round(e)==e?"i":"f";this._line(t+e)}else if("string"==typeof e){void 0!==(r=this._strings2index[e])?this._line("^"+r):(this._strings2index[e]=this._backrefs++,this._line("S"+k._str_repr(e)))}else if(k._iscolor(e))this._line("c",e.r(),e.g(),e.b(),e.a());else if(k._isdate(e))this._line("z",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),1e3*e.getMilliseconds());else if(k._istimedelta(e))this._line("t",e.days(),e.seconds(),e.microseconds());else if(k._ismonthdelta(e))this._line("m",e.months());else if("object"===A(e)&&"function"==typeof e.isa&&e.isa(k.slice))this._line("r",e.start,e.stop);else if(e.ul4onname&&e.ul4ondump){var r;if(e.__id__)if(void 0!==(r=this._ids2index[e.__id__]))return void this._line("^"+r);e.__id__&&(this._ids2index[e.__id__]=this._backrefs++),this._line("O",e.ul4onname),++this._level,e.ul4ondump(this),--this._level,this._line(")")}else if(k._islist(e)){for(var n in this._line("l"),++this._level,e)this.dump(e[n]);--this._level,this._line("]")}else if(k._ismap(e))this._line("e"),++this._level,e.forEach(function(e,t){this.dump(t),this.dump(e)},this),--this._level,this._line("}");else if(k._isdict(e)){for(var i in this._line("d"),++this._level,e)this.dump(i),this.dump(e[i]);--this._level,this._line("}")}else{if(!k._isset(e))throw"can't handle object";this._line("y"),++this._level,e.forEach(function(e){this.dump(e)},this),--this._level,this._line("}")}}},w.Decoder={create:function(e,t){var r=k._clone(this);return r.data=e,r.pos=0,r.backrefs=[],r.registry=void 0===t?null:t,r},readchar:function(){if(this.pos>=this.data.length)throw"UL4 decoder at EOF";return this.data.charAt(this.pos++)},readcharoreof:function(){return this.pos>=this.data.length?null:this.data.charAt(this.pos++)},readblackchar:function(){for(var e=/\s/;;){if(this.pos>=this.data.length)throw"UL4 decoder at EOF";var t=this.data.charAt(this.pos++);if(!t.match(e))return t}},read:function(e){this.pos+e>this.length&&(e=this.length-this.pos);var t=this.data.substring(this.pos,this.pos+e);return this.pos+=e,t},backup:function(){--this.pos},readnumber:function(){for(var e=/[-+0123456789.eE]/,t="";;){var r=this.readcharoreof();if(null===r||!r.match(e)){var n=parseFloat(t);if(NaN==n)throw"invalid number, got "+k._repr("value")+" at position "+this.pos;return n}t+=r}},_beginfakeloading:function(){var e=this.backrefs.length;return this.backrefs.push(null),e},_endfakeloading:function(e,t){this.backrefs[e]=t},_readescape:function(e,t){var r=this.read(t);if(r.length!=t)throw"broken escape "+k._repr("\\"+e+r)+" at position "+this.pos;var n=parseInt(r,16);if(isNaN(n))throw"broken escape "+k._repr("\\"+e+r)+" at position "+this.pos;return String.fromCharCode(n)},load:function(){var e,t=this.readblackchar();switch(t){case"^":return this.backrefs[this.readnumber()];case"n":case"N":return"N"===t&&this.backrefs.push(null),null;case"b":case"B":if("T"===(e=this.readchar()))e=!0;else{if("F"!==e)throw"wrong value for boolean, expected 'T' or 'F', got "+k._repr(e)+" at position "+this.pos;e=!1}return"B"===t&&this.backrefs.push(e),e;case"i":case"I":case"f":case"F":return e=this.readnumber(),"I"!==t&&"F"!==t||this.backrefs.push(e),e;case"s":case"S":e=[];for(var r=this.readblackchar();;){var n=this.readchar();if(n==r)break;if("\\"==n){var i=this.readchar();"\\"==i?e.push("\\"):"n"==i?e.push("\n"):"r"==i?e.push("\r"):"t"==i?e.push("\t"):"f"==i?e.push("\f"):"b"==i?e.push("\b"):"a"==i?e.push(""):"'"==i?e.push("'"):'"'==i?e.push('"'):"x"==i?e.push(this._readescape("x",2)):"u"==i?e.push(this._readescape("u",4)):"U"==i?e.push(this._readescape("U",8)):e.push("\\"+i)}else e.push(n)}return e=e.join(""),"S"===t&&this.backrefs.push(e),e;case"c":case"C":return e=k.Color.create(),"C"===t&&this.backrefs.push(e),e._r=this.load(),e._g=this.load(),e._b=this.load(),e._a=this.load(),e;case"z":case"Z":return(e=new Date).setFullYear(this.load()),e.setDate(1),e.setMonth(this.load()-1),e.setDate(this.load()),e.setHours(this.load()),e.setMinutes(this.load()),e.setSeconds(this.load()),e.setMilliseconds(this.load()/1e3),"Z"===t&&this.backrefs.push(e),e;case"t":case"T":return(e=k.TimeDelta.create())._days=this.load(),e._seconds=this.load(),e._microseconds=this.load(),"T"===t&&this.backrefs.push(e),e;case"r":case"R":return e=k.slice.create(),"R"===t&&this.backrefs.push(e),e.start=this.load(),e.stop=this.load(),e;case"m":case"M":return e=k.MonthDelta.create(),"M"===t&&this.backrefs.push(e),e._months=this.load(),e;case"l":case"L":for(e=[],"L"===t&&this.backrefs.push(e);;){if("]"===(t=this.readblackchar()))return e;this.backup(),e.push(this.load())}return e;case"d":case"D":case"e":case"E":if(!w._havemap&&("e"==t||"E"==t))throw"ordered dictionaries are not supported!";for(e=w._emptymap(),"D"!==t&&"E"!==t||this.backrefs.push(e);;){if("}"===(t=this.readblackchar()))return e;this.backup();var o=this.load(),s=this.load();w._setmap(e,o,s)}return e;case"y":case"Y":for(e=w._makeset(),"Y"===t&&this.backrefs.push(e);;){if("}"===(t=this.readblackchar()))return e;this.backup(),e.add(this.load())}return e;case"o":case"O":var a;"O"===t&&(a=this._beginfakeloading());var u,l=this.load();if(null!==this.registry?void 0===(u=this.registry[l])&&(u=w._registry[l]):u=w._registry[l],void 0===u)throw"can't load object of type "+k._repr(l);if(e=u(),"O"===t&&this._endfakeloading(a,e),e.ul4onload(this),")"!==(t=this.readblackchar()))throw"object terminator ')' for object of type '"+l+"' expected, got "+k._repr(t)+" at position "+this.pos;return e;default:throw"unknown typecode "+k._repr(t)+" at position "+this.pos}},loadcontent:function(e){var t=this;return{next:function(){var e=t.readblackchar();return t.backup(),")"==e?{done:!0}:{done:!1,value:t.load()}}}}},k._rvalidchars=/^[\],:{}\s]*$/,k._rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k._rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,k._rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,k._simpleclone=function(e){function t(){}return t.prototype=e,new t},k._clone=function(e){var t=k._simpleclone(e);return t.__prototype__=e,t.__id__=k.Proto._nextid++,t},k._extend=function(e,t){for(var r in t)e[r]=t[r];return e},k._simpleinherit=function(e,t){return k._extend(k._simpleclone(e),t)},k._inherit=function(e,t){return k._extend(k._clone(e),t)},k._map2object=function(e){if(k._ismap(e)){var r={};return e.forEach(function(e,t){if("string"!=typeof t)throw k.TypeError.create("keys must be strings");r[t]=e}),r}return e},k._bound=function(e,t){return e<0?0:t<e?t:e},k._stacktrace=function(e){var t=k._type(e),r=e.toString();return r&&(t+=": "+r),e.cause&&(t+="\n\n"+k._stacktrace(e.cause)),t},k._internal_call=function(e,t,r,n,i,o,s,a,u){var l;if(s)if(null===i){if(a.length)throw k.ArgumentError.create(k._repr(t)+" doesn't support positional arguments!");l=[u]}else l=[i.bindObject(r,a,u)];else{if(null===i)throw k.ArgumentError.create(k._repr(t)+" doesn't support positional arguments!");l=i.bindArray(r,a,u)}return o&&l.unshift(e),t.apply(n,l)},k._callfunction=function(e,t,r,n){var i=t._ul4_name||t.name;if(void 0===t._ul4_signature||void 0===t._ul4_needsobject||void 0===t._ul4_needscontext)throw k.TypeError.create("call","function "+k.repr(t)+" is not callable by UL4");return k._internal_call(e,t,i,k,t._ul4_signature,t._ul4_needscontext,t._ul4_needsobject,r,n)},k._callobject=function(e,t,r,n){if(void 0===t._ul4_callsignature||void 0===t._ul4_callneedsobject||void 0===t._ul4_callneedscontext)throw k.TypeError.create("call",k.type(t)+" object is not callable by UL4");return k._internal_call(e,t.__call__,t.name,t,t._ul4_callsignature,t._ul4_callneedscontext,t._ul4_callneedsobject,r,n)},k._callrender=function(e,t,r,n){if(void 0===t._ul4_rendersignature||void 0===t._ul4_renderneedsobject||void 0===t._ul4_renderneedscontext)throw k.TypeError.create("render",k.type(t)+" object is not renderable by UL4");return k._internal_call(e,t.__render__,t.name,t,t._ul4_rendersignature,t._ul4_renderneedscontext,t._ul4_renderneedsobject,r,n)},k._call=function(e,t,r,n){if("function"==typeof t)return k._callfunction(e,t,r,n);if(t&&"function"==typeof t.__call__)return k._callobject(e,t,r,n);throw k.TypeError.create("call",k._type(t)+" is not callable")},k._unpackvar=function(e,t){if(k._islist(e)){for(var r=[],n=k._iter(t),i=0;;++i){var o=n.next();if(o.done){if(i===e.length)break;throw k.ValueError.create("need "+e.length+" value"+(1===e.length?"":"s")+" to unpack, got "+i)}if(!(i<e.length))throw k.ValueError.create("too many values to unpack (expected "+e.length+")");r=r.concat(k._unpackvar(e[i],o.value))}return r}return[[e,t]]},k._formatsource=function(e){for(var t=[],r=0,n=!1,i=0;i<e.length;++i)if("number"==typeof e[i])r+=e[i],n=!0;else{if(n){t.push("\n");for(var o=0;o<r;++o)t.push("\t");n=!1}t.push(e[i])}return n&&t.push("\n"),t.join("")},k._eq=function(r,n){var e=["boolean","number"];if(r&&"function"==typeof r.__eq__)return r.__eq__(n);if(n&&"function"==typeof n.__eq__)return n.__eq__(r);if(null===r)return null===n;if(-1!=e.indexOf(A(r)))return-1!=e.indexOf(A(n))&&r==n;if("string"==typeof r)return"string"==typeof n&&r==n;if(k._isdate(r))return!!k._isdate(n)&&r.getTime()==n.getTime();if(k._islist(r)){if(k._islist(n)){if(r===n)return!0;if(r.length!=n.length)return!1;for(var t=0;t<r.length;++t)if(!k._eq(r[t],n[t]))return!1;return!0}return!1}if(k._isobject(r)){if(k._isobject(n)){if(r===n)return!0;for(var i in r){if(!n.hasOwnProperty(i))return!1;if(!k._eq(r[i],n[i]))return!1}for(var i in n)if(!r.hasOwnProperty(i))return!1;return!0}if(k._ismap(n)){for(var i in r){if(!n.has(i))return!1;if(!k._eq(r[i],n.get(i)))return!1}var o=!0;return n.forEach(function(e,t){r.hasOwnProperty(t)||(o=!1)}),o}return!1}if(k._ismap(r)){if(k._isobject(n)){o=!0;if(r.forEach(function(e,t){o&&(n.hasOwnProperty(t)&&k._eq(r.get(t),n[t])||(o=!1))}),!o)return!1;for(var i in n)if(!r.has(i))return!1;return!0}if(k._ismap(n)){if(r===n)return!0;if(r.size!=n.size)return!1;o=!0;return r.forEach(function(e,t){o&&(n.has(t)&&k._eq(r.get(t),n.get(t))||(o=!1))}),o}return!1}if(k._isset(r)){if(k._isset(n)){if(r===n)return!0;if(r.size!=n.size)return!1;o=!0;return r.forEach(function(e){o&&(n.has(e)||(o=!1))}),o}return!1}return r===n},k._ne=function(e,t){return e&&"function"==typeof e.__ne__?e.__ne__(t):t&&"function"==typeof t.__ne__?t.__ne__(e):!k._eq(e,t)},k._unorderable=function(e,t,r){throw k.TypeError.create(e,"unorderable types: "+k._type(t)+" "+e+" "+k._type(r))},k._cmp=function(e,t,r){var n=["boolean","number"];if(-1!=n.indexOf(A(t))){if(-1!=n.indexOf(A(r)))return(r<t)-(t<r)}else if("string"==typeof t){if("string"==typeof r)return(r<t)-(t<r)}else if(k._isdate(t)){if(k._isdate(r)){var i=t.getTime(),o=r.getTime();return(o<i)-(i<o)}}else if(k._islist(t)){if(k._islist(r)){if(t===r)return 0;for(var s=0;s<t.length;++s){if(s>=r.length)return 1;var a=k._cmp(e,t[s],r[s]);if(a)return a}return r.length>t.length?-1:0}}else{if(k._isset(t)||k._isul4set(t)){var u=!1,l=!1;if(k._isset(r)){if(k._isset(r))t.forEach(function(e){r.has(e)||(u=!0)}),r.forEach(function(e){t.has(e)||(l=!0)});else if(k._isul4set(r))for(var _ in t.forEach(function(e){r.items[e]||(u=!0)}),r.items)if(!t.has(_)){l=!0;break}}else if(k._isul4set(r)){if(k._isset(r)){for(var _ in t.items)if(!r.has(_)){u=!0;break}r.forEach(function(e){t.items[e]||(l=!0)})}else if(k._isul4set(r)){for(var _ in t.items)if(!r.items[_]){u=!0;break}for(var _ in r.items)if(!t.items[_]){l=!0;break}}}else k._unorderable(e,t,r);return u?l?null:1:l?-1:0}k._unorderable(e,t,r)}},k._lt=function(t,r){var e=["boolean","number"];if(t&&"function"==typeof t.__lt__)return t.__lt__(r);if(-1!=e.indexOf(A(t))){if(-1!=e.indexOf(A(r)))return t<r}else if("string"==typeof t){if("string"==typeof r)return t<r}else if(k._isdate(t)){if(k._isdate(r))return t.getTime()<r.getTime()}else if(k._islist(t)){if(k._islist(r)){if(t===r)return!1;for(var n=0;n<t.length;++n){if(n>=r.length)return!1;if(!k._eq(t[n],r[n]))return k._lt(t[n],r[n])}return t.length<r.length}}else if(k._isset(t)){if(k._isset(r)){if(k._isset(r))t.forEach(function(e){r.has(e)||(in1only=!0)}),r.forEach(function(e){t.has(e)||(in2only=!0)});else if(k._isul4set(r))for(var i in t.forEach(function(e){r.items[e]||(in1only=!0)}),r.items)if(!t.has(i)){in2only=!0;break}}else if(k._isul4set(r)){if(k._isset(r)){for(var i in t.items)if(!r.has(i)){in1only=!0;break}r.forEach(function(e){t.items[e]||(in2only=!0)})}else if(k._isul4set(r)){for(var i in t.items)if(!r.items[i]){in1only=!0;break}for(var i in r.items)if(!t.items[i]){in2only=!0;break}}}else k._unorderable(operator,t,r);return in1only?in2only?null:1:in2only?-1:0}k._unorderable("<",t,r)},k._le=function(t,r){var e=["boolean","number"];if(t&&"function"==typeof t.__le__)return t.__le__(r);if(-1!=e.indexOf(A(t))){if(-1!=e.indexOf(A(r)))return t<=r}else if("string"==typeof t){if("string"==typeof r)return t<=r}else if(k._isdate(t)){if(k._isdate(r))return t.getTime()<=r.getTime()}else if(k._islist(t)){if(k._islist(r)){if(t===r)return!0;for(var n=0;n<t.length;++n){if(n>=r.length)return!1;if(!k._eq(t[n],r[n]))return k._lt(t[n],r[n])}return t.length<=r.length}}else if(k._isset(t)||k._isul4set(t)){var i=!1,o=!1;if(k._isset(r)){if(k._isset(r))t.forEach(function(e){r.has(e)||(i=!0)}),r.forEach(function(e){t.has(e)||(o=!0)});else if(k._isul4set(r))for(var s in t.forEach(function(e){r.items[e]||(i=!0)}),r.items)if(!t.has(s)){o=!0;break}}else if(k._isul4set(r)){if(k._isset(r)){for(var s in t.items)if(!r.has(s)){i=!0;break}r.forEach(function(e){t.items[e]||(o=!0)})}else if(k._isul4set(r)){for(var s in t.items)if(!r.items[s]){i=!0;break}for(var s in r.items)if(!t.items[s]){o=!0;break}}}else k._unorderable(operator,t,r);return i?o?null:1:o?-1:0}k._unorderable("<=",t,r)},k._gt=function(t,r){var e=["boolean","number"];if(t&&"function"==typeof t.__gt__)return t.__gt__(r);if(-1!=e.indexOf(A(t))){if(-1!=e.indexOf(A(r)))return r<t}else if("string"==typeof t){if("string"==typeof r)return r<t}else if(k._isdate(t)){if(k._isdate(r))return t.getTime()>r.getTime()}else if(k._islist(t)){if(k._islist(r)){if(t===r)return!1;for(var n=0;n<t.length;++n){if(n>=r.length)return!0;if(!k._eq(t[n],r[n]))return k._gt(t[n],r[n])}return t.length>r.length}}else if(k._isset(t)||k._isul4set(t)){var i=!1,o=!1;if(k._isset(r)){if(k._isset(r))t.forEach(function(e){r.has(e)||(i=!0)}),r.forEach(function(e){t.has(e)||(o=!0)});else if(k._isul4set(r))for(var s in t.forEach(function(e){r.items[e]||(i=!0)}),r.items)if(!t.has(s)){o=!0;break}}else if(k._isul4set(r)){if(k._isset(r)){for(var s in t.items)if(!r.has(s)){i=!0;break}r.forEach(function(e){t.items[e]||(o=!0)})}else if(k._isul4set(r)){for(var s in t.items)if(!r.items[s]){i=!0;break}for(var s in r.items)if(!t.items[s]){o=!0;break}}}else k._unorderable(operator,t,r);return i?o?null:1:o?-1:0}k._unorderable(">",t,r)},k._ge=function(t,r){var e=["boolean","number"];if(t&&"function"==typeof t.__ge__)return t.__ge__(r);if(-1!=e.indexOf(A(t))){if(-1!=e.indexOf(A(r)))return r<=t}else if("string"==typeof t){if("string"==typeof r)return r<=t}else if(k._isdate(t)){if(k._isdate(r))return t.getTime()>=r.getTime()}else if(k._islist(t)){if(k._islist(r)){if(t===r)return!0;for(var n=0;n<t.length;++n){if(n>=r.length)return!0;if(!k._eq(t[n],r[n]))return k._gt(t[n],r[n])}return t.length>=r.length}}else if(k._isset(t)||k._isul4set(t)){var i=!1,o=!1;if(k._isset(r)){if(k._isset(r))t.forEach(function(e){r.has(e)||(i=!0)}),r.forEach(function(e){t.has(e)||(o=!0)});else if(k._isul4set(r))for(var s in t.forEach(function(e){r.items[e]||(i=!0)}),r.items)if(!t.has(s)){o=!0;break}}else if(k._isul4set(r)){if(k._isset(r)){for(var s in t.items)if(!r.has(s)){i=!0;break}r.forEach(function(e){t.items[e]||(o=!0)})}else if(k._isul4set(r)){for(var s in t.items)if(!r.items[s]){i=!0;break}for(var s in r.items)if(!t.items[s]){o=!0;break}}}else k._unorderable(operator,t,r);return i?o?null:1:o?-1:0}k._unorderable(">=",t,r)},k._iter=function(e){if("string"==typeof e||k._islist(e))return{index:0,next:function(){return this.index<e.length?{value:e[this.index++],done:!1}:{done:!0}}};if(k._isiter(e))return e;if(null!==e&&"function"==typeof e.__iter__)return e.__iter__();if(k._ismap(e)){var r=[];return e.forEach(function(e,t){r.push(t)}),{index:0,next:function(){return this.index>=r.length?{done:!0}:{value:r[this.index++],done:!1}}}}if(k._isset(e)){var n=[];return e.forEach(function(e,t){n.push(e)}),{index:0,next:function(){return this.index>=n.length?{done:!0}:{value:n[this.index++],done:!1}}}}if(k._isul4set(e))return k._iter(e.items);if(k._isobject(e)){r=[];for(var t in e)r.push(t);return{index:0,next:function(){return this.index>=r.length?{done:!0}:{value:r[this.index++],done:!1}}}}throw k.TypeError.create("iter",k._type(e)+" object is not iterable")},k._str_repr=function(e,t){for(var r="",n=!1,i=!1,o=0;o<e.length;++o){if('"'==(a=e[o])){if(i=!0,n)break}else if("'"==a&&(n=!0,i))break}var s=n&&!i?'"':"'";for(o=0;o<e.length;++o){var a;switch(a=e[o]){case'"':r+=s==a?'\\"':a;break;case"'":r+=s==a?"\\'":a;break;case"\\":r+="\\\\";break;case"\t":r+="\\t";break;case"\n":r+="\\n";break;case"\r":r+="\\r";break;default:var u,l=e.charCodeAt(o);r+=0===(u=l<32?2:l<127?0:t||/[\u007f-\u00a0\u00ad\u0378-\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557-\u0558\u0560\u0588\u058b-\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c-\u061d\u06dd\u070e-\u070f\u074b-\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e-\u082f\u083f\u085c-\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d-\u098e\u0991-\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba-\u09bb\u09c5-\u09c6\u09c9-\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4-\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11-\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a-\u0a3b\u0a3d\u0a43-\u0a46\u0a49-\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba-\u0abb\u0ac6\u0aca\u0ace-\u0acf\u0ad1-\u0adf\u0ae4-\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d-\u0b0e\u0b11-\u0b12\u0b29\u0b31\u0b34\u0b3a-\u0b3b\u0b45-\u0b46\u0b49-\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64-\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce-\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64-\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba-\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4-\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b-\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64-\u0d65\u0d76-\u0d78\u0d80-\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe-\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85-\u0e86\u0e89\u0e8b-\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8-\u0ea9\u0eac\u0eba\u0ebe-\u0ebf\u0ec5\u0ec7\u0ece-\u0ecf\u0eda-\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce-\u10cf\u1249\u124e-\u124f\u1257\u1259\u125e-\u125f\u1289\u128e-\u128f\u12b1\u12b6-\u12b7\u12bf\u12c1\u12c6-\u12c7\u12d7\u1311\u1316-\u1317\u135b-\u135c\u137d-\u137f\u139a-\u139f\u13f6-\u13f7\u13fe-\u13ff\u1680\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de-\u17df\u17ea-\u17ef\u17fa-\u17ff\u180e-\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e-\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c-\u1a1d\u1a5f\u1a7d-\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16-\u1f17\u1f1e-\u1f1f\u1f46-\u1f47\u1f4e-\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e-\u1f7f\u1fb5\u1fc5\u1fd4-\u1fd5\u1fdc\u1ff0-\u1ff1\u1ff5\u1fff-\u200f\u2028-\u202f\u205f-\u206f\u2072-\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74-\u2b75\u2b96-\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e-\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u3000\u3040\u3097-\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae-\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e-\uaa4f\uaa5a-\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07-\uab08\uab0f-\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee-\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e-\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90-\ufd91\ufdc8-\ufdef\ufdfe-\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8-\uffc9\uffd0-\uffd1\uffd8-\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe-\uffff]/.test(a)?l<=255?2:l<=65535?4:8:0)?a:2===u?"\\x"+k._lpad(l.toString(16),"0",2):4===u?"\\u"+k._lpad(l.toString(16),"0",4):"\\U"+k._lpad(l.toString(16),"0",8)}}return s+r+s},k._date_repr=function(e,t){var r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds(),l="@("+r+"-"+k._lpad(n.toString(),"0",2)+"-"+k._lpad(i.toString(),"0",2);return(o||s||a||u)&&(l+="T"+k._lpad(o.toString(),"0",2)+":"+k._lpad(s.toString(),"0",2)+":"+k._lpad(a.toString(),"0",2),u&&(l+="."+k._lpad(u.toString(),"0",3)+"000")),l+=")"},k._map_repr=function(e,r){var n=[];n.push("{");var i=0;return e.forEach(function(e,t){i++&&n.push(", "),n.push(k._repr_internal(t,r)),n.push(": "),n.push(k._repr_internal(e,r))}),n.push("}"),n.join("")},k._list_repr=function(e,t){var r=[];r.push("[");for(var n=0;n<e.length;++n)0!==n&&r.push(", "),r.push(k._repr_internal(e[n],t));return r.push("]"),r.join("")},k._set_repr=function(e,r){var n=[];if(n.push("{"),e.size){var i=0;e.forEach(function(e,t){i++&&n.push(", "),n.push(k._repr_internal(e,r))})}else n.push("/");return n.push("}"),n.join("")},k._object_repr=function(e,t){var r=[];r.push("{");var n=0;for(var i in e)e.hasOwnProperty(i)&&(n++&&r.push(", "),r.push(k._repr_internal(i,t)),r.push(": "),r.push(k._repr_internal(e[i],t)));return r.push("}"),r.join("")},k._repr_internal=function(e,t){return null===e?"None":!1===e?"False":!0===e?"True":"string"==typeof e?k._str_repr(e,t):"number"==typeof e?""+e:"function"==typeof e?e._ul4_name||e.name?"<function "+(e._ul4_name||e.name)+">":"<anonymous function>":k._isdate(e)?k._date_repr(e,t):void 0===e?"<undefined>":"object"===A(e)&&"function"==typeof e.__repr__?e.__repr__():k._islist(e)?k._list_repr(e,t):k._ismap(e)?k._map_repr(e,t):k._isset(e)?k._set_repr(e,t):k._isobject(e)?k._object_repr(e,t):"?"},k._repr=function(e){return k._repr_internal(e,!1)},k._ascii=function(e){return k._repr_internal(e,!0)},k._date_str=function(e){var t=e.getFullYear(),r=e.getMonth()+1,n=e.getDate(),i=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),a=e.getMilliseconds(),u=t+"-"+k._lpad(r.toString(),"0",2)+"-"+k._lpad(n.toString(),"0",2)+" "+k._lpad(i.toString(),"0",2)+":"+k._lpad(o.toString(),"0",2)+":"+k._lpad(s.toString(),"0",2);return a&&(u+="."+k._lpad(a.toString(),"0",3)+"000"),u},k._str=function(e){return void 0===e?"":null===e?"":!1===e?"False":!0===e?"True":"string"==typeof e?e:"number"==typeof e?e.toString():k._isdate(e)?k._date_str(e):k._islist(e)?k._list_repr(e):k._isset(e)?k._set_repr(e):k._ismap(e)?k._map_repr(e):"object"===A(e)&&"function"==typeof e.__str__?e.__str__():"object"===A(e)&&"function"==typeof e.__repr__?e.__repr__():k._isobject(e)?k._object_repr(e):"?"},k._bool=function(e){if(null==e||!1===e||0===e||""===e)return!1;if(A(e),"function"==typeof e.__bool__)return e.__bool__();if(k._islist(e))return 0!==e.length;if(k._ismap(e)||k._isset(e))return 0!=e.size;if(k._isobject(e)){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}return!0},k._int=function(e,t){var r;if(null!==t){if("string"!=typeof e||!k._isint(t))throw k.TypeError.create("int()","int() requires a string and an integer");if("NaN"==(r=parseInt(e,t)).toString())throw k.TypeError.create("int()","invalid literal for int()");return r}if("string"==typeof e){if("NaN"==(r=parseInt(e)).toString())throw k.TypeError.create("int()","invalid literal for int()");return r}if("number"==typeof e)return Math.floor(e);if(!0===e)return 1;if(!1===e)return 0;throw k.TypeError.create("int()","int() argument must be a string or a number")},k._float=function(e){if("string"==typeof e)return parseFloat(e);if("number"==typeof e)return e;if(!0===e)return 1;if(!1===e)return 0;throw k.TypeError.create("float()","float() argument must be a string or a number")},k._list=function(e){for(var t=k._iter(e),r=[];;){var n=t.next();if(n.done)return r;r.push(n.value)}},k._set=function(e){for(var t=k._iter(e),r=w._haveset?new Set:k._Set.create();;){var n=t.next();if(n.done)return r;r.add(n.value)}},k._len=function(e){if("string"==typeof e||k._islist(e))return e.length;if(k._ismap(e)||k._isset(e))return e.size;if(k._isobject(e)){var t=0;for(var r in e)++t;return t}throw k.TypeError.create("len","object of type '"+k._type(e)+"' has no len()")},k._type=function(e){return null===e?"none":!1===e||!0===e?"bool":void 0===e?"undefined":"string"==typeof e?"str":"number"==typeof e?Math.round(e)==e?"int":"float":k._islist(e)?"list":k._isset(e)?"set":k._isdate(e)?"date":void 0!==e.__type__?e.__type__:k._istimedelta(e)?"timedelta":k._isdict(e)?"dict":k._istemplate(e)?"template":k._isfunction(e)?"function":null},k._any=function(e){if("string"==typeof e){for(var t=0;t<e.length;++t)if("\0"!==e[t])return!0;return!1}for(var r=k._iter(e);;){var n=r.next();if(n.done)return!1;if(k._bool(n.value))return!0}},k._all=function(e){if("string"==typeof e){for(var t=0;t<e.length;++t)if("\0"===e[t])return!1;return!0}for(var r=k._iter(e);;){var n=r.next();if(n.done)return!0;if(!k._bool(n.value))return!1}},k._isundefined=function(e){return void 0===e},k._isdefined=function(e){return void 0!==e},k._isnone=function(e){return null===e},k._isbool=function(e){return"boolean"==typeof e},k._isint=function(e){return"number"==typeof e&&Math.round(e)==e},k._isfloat=function(e){return"number"==typeof e&&Math.round(e)!=e},k._isstr=function(e){return"string"==typeof e},k._isdate=function(e){return"[object Date]"==Object.prototype.toString.call(e)},k._iscolor=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.isa&&e.isa(k.Color)},k._istimedelta=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.isa&&e.isa(k.TimeDelta)},k._ismonthdelta=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.isa&&e.isa(k.MonthDelta)},k._istemplate=function(e){return"[object Object]"==Object.prototype.toString.call(e)&&("ul4.Template"===e.__type__||"ul4.TemplateClosure"===e.__type__)},k._isfunction=function(e){return"function"==typeof e||"[object Object]"==Object.prototype.toString.call(e)&&("ul4.Template"===e.__type__||"ul4.TemplateClosure"===e.__type__)},k._islist=function(e){return"[object Array]"==Object.prototype.toString.call(e)},k._isset=function(e){return"[object Set]"==Object.prototype.toString.call(e)},k._isexception=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.isa&&e.isa(k.Error)},k._isul4set=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.isa&&e.isa(k._Set)},k._isiter=function(e){return null!==e&&"object"===A(e)&&"function"==typeof e.next},k._isobject=function(e){return"[object Object]"==Object.prototype.toString.call(e)&&void 0===e.__type__},k._ismap=function(e){return!!w._havemap&&(null!==e&&"object"===A(e)&&"object"===A(e.__proto__)&&e.__proto__===Map.prototype)},k._isdict=function(e){return k._isobject(e)||k._ismap(e)},k._str_repeat=function(e,t){for(var r="";0<t;--t)r+=e;return r},k._list_repeat=function(e,t){for(var r=[];0<t;--t)for(var n=0;n<e.length;++n)r.push(e[n]);return r},k._str_json=function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];switch(n){case"\r":t+="\\r";break;case"\n":t+="\\n";break;case"\t":t+="\\t";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:var i=e.charCodeAt(r);t+=32<=i&&i<128?n:"\\u"+k._lpad(i.toString(16),"0",4)}}return'"'+t+'"'},k._asjson=function(e){if(null===e)return"null";if(void 0===e)return"{}.undefined";if(!1===e)return"false";if(!0===e)return"true";if("string"==typeof e)return k._str_json(e);if("number"==typeof e)return""+e;if(k._islist(e)){(n=[]).push("[");for(var r=0;r<e.length;++r)0!=r&&n.push(", "),n.push(k._asjson(e[r]));return n.push("]"),n.join("")}if(k._ismap(e)){(n=[]).push("{");r=0;return e.forEach(function(e,t){r++&&n.push(", "),n.push(k._asjson(t)),n.push(": "),n.push(k._asjson(e))}),n.push("}"),n.join("")}if(k._isobject(e)){var n;(n=[]).push("{");r=0;for(var t in e)r++&&n.push(", "),n.push(k._asjson(t)),n.push(": "),n.push(k._asjson(e[t]));return n.push("}"),n.join("")}if(k._isdate(e))return"new Date("+e.getFullYear()+", "+e.getMonth()+", "+e.getDate()+", "+e.getHours()+", "+e.getMinutes()+", "+e.getSeconds()+", "+e.getMilliseconds()+")";if(k._istimedelta(e))return"ul4.TimeDelta.create("+e.days+", "+e.seconds+", "+e.microseconds+")";if(k._ismonthdelta(e))return"ul4.MonthDelta.create("+e.months+")";if(k._iscolor(e))return"ul4.Color.create("+e._r+", "+e._g+", "+e._b+", "+e._a+")";if(k._istemplate(e))return"ul4.Template.loads("+k._repr(e.dumps())+")";throw k.TypeError.create("asjson()","asjson() requires a serializable object")},k._fromjson=function(e){if(e=k._strip(e,null),root.JSON&&root.JSON.parse)return root.JSON.parse(e);if(k._rvalidchars.test(e.replace(k._rvalidescape,"@").replace(k._rvalidtokens,"]").replace(k._rvalidbraces,"")))return new Function("return "+e)();throw k.TypeError.create("fromjson()","invalid JSON")},k._asul4on=function(e){return w.dumps(e)},k._fromul4on=function(e){return w.loads(e)},k._format_date=function(e,t,r){for(var n={de:{ms:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],ml:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],ws:["So","Mo","Di","Mi","Do","Fr","Sa"],wl:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},en:{ms:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ml:["January","February","March","April","May","June","July","August","September","October","November","December"],ws:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wl:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xf:"%m/%d/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %I:%M:%S %p "},fr:{ms:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],ml:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],ws:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wl:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},es:{ms:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],ml:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],ws:["dom","lun","mar","mié","jue","vie","sáb"],wl:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],xf:"%d/%m/%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},it:{ms:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],ml:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],ws:["dom","lun","mar","mer","gio","ven","sab"],wl:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},da:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],ws:["søn","man","tir","ons","tor","fre","lør"],wl:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sv:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],ws:["sön","mån","tis","ons","tor","fre","lör"],wl:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%a %d %b %Y %H.%M.%S"},nl:{ms:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],ws:["zo","ma","di","wo","do","vr","za"],wl:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],xf:"%d-%m-%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},pt:{ms:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],ml:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],ws:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],wl:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},cs:{ms:["led","úno","bře","dub","kvě","čen","čec","srp","zář","říj","lis","pro"],ml:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],ws:["Ne","Po","Út","St","Čt","Pá","So"],wl:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d. %B %Y, %H:%M:%S"},sk:{ms:["jan","feb","mar","apr","máj","jún","júl","aug","sep","okt","nov","dec"],ml:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"],ws:["Ne","Po","Ut","St","Št","Pi","So"],wl:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d. %B %Y, %H:%M:%S"},pl:{ms:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],ml:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],ws:["nie","pon","wto","śro","czw","pią","sob"],wl:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a, %d %b %Y, %H:%M:%S"},hr:{ms:["Sij","Vel","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],ml:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],ws:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],wl:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sr:{ms:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец"],ml:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],ws:["нед","пон","уто","сре","чет","пет","суб"],wl:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],xf:"%d.%m.%Y.",Xf:"%H:%M:%S",cf:"%A, %d. %B %Y. %H:%M:%S"},ro:{ms:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","nov","dec"],ml:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],ws:["Du","Lu","Ma","Mi","Jo","Vi","Sb"],wl:["duminică","luni","marţi","miercuri","joi","vineri","sâmbătă"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},hu:{ms:["jan","febr","márc","ápr","máj","jún","júl","aug","szept","okt","nov","dec"],ml:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],ws:["v","h","k","sze","cs","p","szo"],wl:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%Y. %b. %d., %A, %H.%M.%S"},tr:{ms:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],ml:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],ws:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],wl:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},ru:{ms:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],ml:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],ws:["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],wl:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},zh:{ms:[" 1月"," 2月"," 3月"," 4月"," 5月"," 6月"," 7月"," 8月"," 9月","10月","11月","12月"],ml:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ws:["日","一","二","三","四","五","六"],wl:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],xf:"%Y年%b%d日",Xf:"%H时%M分%S秒",cf:"%Y年%b%d日 %A %H时%M分%S秒"},ko:{ms:[" 1월"," 2월"," 3월"," 4월"," 5월"," 6월"," 7월"," 8월"," 9월","10월","11월","12월"],ml:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],ws:["일","월","화","수","목","금","토"],wl:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],xf:"%Y년 %B %d일",Xf:"%H시 %M분 %S초",cf:"%Y년 %B %d일 (%a) %p %I시 %M분 %S초"},ja:{ms:[" 1月"," 2月"," 3月"," 4月"," 5月"," 6月"," 7月"," 8月"," 9月","10月","11月","12月"],ml:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],ws:["日","月","火","水","木","金","土"],wl:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],xf:"%Y年%B%d日",Xf:"%H時%M分%S秒",cf:"%Y年%B%d日 %H時%M分%S秒"}}[r],i=[],o=!1,s=0;s<t.length;++s){var a=t[s];if(o){switch(a){case"a":a=n.ws[e.getDay()];break;case"A":a=n.wl[e.getDay()];break;case"b":a=n.ms[e.getMonth()];break;case"B":a=n.ml[e.getMonth()];break;case"c":a=k._format(e,n.cf,r);break;case"d":a=k._lpad(e.getDate(),"0",2);break;case"f":a=k._lpad(e.getMilliseconds(),"0",3)+"000";break;case"H":a=k._lpad(e.getHours(),"0",2);break;case"I":a=k._lpad((e.getHours()-1)%12+1,"0",2);break;case"j":a=k._lpad(k._yearday(e),"0",3);break;case"m":a=k._lpad(e.getMonth()+1,"0",2);break;case"M":a=k._lpad(e.getMinutes(),"0",2);break;case"p":a=e.getHours()<12?"AM":"PM";break;case"S":a=k._lpad(e.getSeconds(),"0",2);break;case"U":a=k._lpad(k._week(e,6),"0",2);break;case"w":a=e.getDay();break;case"W":a=k._lpad(k._week(e,0),"0",2);break;case"x":a=k._format(e,n.xf,r);break;case"X":a=k._format(e,n.Xf,r);break;case"y":a=(e.getFullYear()%100).toString();break;case"Y":a=e.getFullYear().toString();break;case"z":case"Z":a=""}i.push(a),o=!1}else"%"==a?o=!0:i.push(a)}return i.join("")},k._format_int=function(e,t,r){var n=t,i=" ",o=">",s="-",a=!1,u=0,l="d";if(/[bcdoxXn]$/.test(n)&&(l=n.substring(n.length-1),n=n.substring(0,n.length-1)),/\d+$/.test(n)){var _=/\d+$/.exec(n);n=n.replace(/\d+$/,""),/^0/.test(_)&&(o="=",i="0"),u=parseInt(_)}if(/#$/.test(n)&&(a=!0,n=n.substring(0,n.length-1)),/[+ -]$/.test(n)){if("c"==l)throw k.ValueError.create("sign not allowed for integer format type 'c'");s=n.substring(n.length-1),n=n.substring(0,n.length-1)}if(3<=n.length)throw k.ValueError.create("illegal integer format string "+k._repr(t));if(2==n.length){if(!/[<>=^]$/.test(n))throw k.ValueError.create("illegal integer format string "+k._repr(t));o=n[1],i=n[0]}else if(1==n.length){if(!/^[<>=^]$/.test(n))throw k.ValueError.create("illegal integer format string "+k._repr(t));o=n}var c,h=e<0;switch(h&&(e=-e),l){case"b":c=e.toString(2);break;case"c":if(h||65535<e)throw k.ValueError.create("value out of bounds for c format");c=String.fromCharCode(e);break;case"d":c=e.toString();break;case"o":c=e.toString(8);break;case"x":c=e.toString(16);break;case"X":c=e.toString(16).toUpperCase();break;case"n":c=e.toString()}if("="===o)(h||"-"!==s)&&--u,!a||"b"!==l&&"o"!==l&&"x"!==l&&"X"!==l||(u-=2),c.length<u&&(c=k._str_repeat(i,u-c.length)+c),!a||"b"!==l&&"o"!==l&&"x"!==l&&"X"!==l||(c="0"+l+c),h?c="-"+c:"-"!=s&&(c=s+c);else if(!a||"b"!=l&&"o"!=l&&"x"!=l&&"X"!=l||(c="0"+l+c),h?c="-"+c:"-"!=s&&(c=s+c),c.length<u)if("<"==o)c+=k._str_repeat(i,u-c.length);else if(">"==o)c=k._str_repeat(i,u-c.length)+c;else{var f=u-c.length,p=Math.floor(f/2),d=f-p;c=k._str_repeat(i,p)+c+k._str_repeat(i,d)}return c},k._format=function(e,t,r){if(null==r)r="en";else{var n={de:null,en:null,fr:null,es:null,it:null,da:null,sv:null,nl:null,pt:null,cs:null,sk:null,pl:null,hr:null,sr:null,ro:null,hu:null,tr:null,ru:null,zh:null,ko:null,ja:null};void 0===n[r=r.toLowerCase()]&&void 0===n[r=r.split(/_/)[0]]&&(r="en")}return k._isdate(e)?k._format_date(e,t,r):k._isint(e)?k._format_int(e,t,r):!0===e?k._format_int(1,t,r):!1===e?k._format_int(0,t,r):void 0},k._lpad=function(e,t,r){for("number"==typeof e&&(e=e.toString());e.length<r;)e=t+e;return e},k._rpad=function(e,t,r){for("number"==typeof e&&(e=e.toString());e.length<r;)e+=t;return e},k.Proto={__prototype__:null,__id__:0,_nextid:1,isa:function(e){return this===e||null!==this.__prototype__&&this.__prototype__.isa(e)},isprotoof:function(e){for(;;){if(null===e||"[object Object]"!==Object.prototype.toString.call(e)||void 0===e.__prototype__)return!1;if(e===this)return!0;e=e.__prototype__}},__eq__:function(e){return this===e},__ne__:function(e){return!this.__eq__(e)},__bool__:function(){return!0}},k.Signature=k._inherit(k.Proto,{create:function(){var e=k._clone(this);e.args=[],e.argNames={},e.remargs=null;for(var t=!1,r=e.remkwargs=null,n=0;n<arguments.length;++n){var i=arguments[n];t?(e.args.push({name:r,defaultValue:i}),t=!(e.argNames[r]=!0)):"="===i.substr(i.length-1)?(r=i.substr(0,i.length-1),t=!0):"**"===i.substr(0,2)?e.remkwargs=i.substr(2):"*"===i.substr(0,1)?e.remargs=i.substr(1):(e.args.push({name:i}),e.argNames[i]=!0)}return e},bindArray:function(e,t,r){for(var n=[],i=null!==e?e+"() ":"",o=0;o<this.args.length;++o){var s=this.args[o];if(o<t.length){if(r.hasOwnProperty(s.name))throw k.ArgumentError.create(i+"argument "+k._repr(s.name)+" (position "+o+") specified multiple times");n.push(t[o])}else if(r.hasOwnProperty(s.name))n.push(r[s.name]);else{if(!s.hasOwnProperty("defaultValue"))throw k.ArgumentError.create("required "+i+"argument "+k._repr(s.name)+" (position "+o+") missing");n.push(s.defaultValue)}}if(null===this.remargs){if(t.length>this.args.length){var a=null===e?"expected":e+"() expects";throw k.ArgumentError.create(a+" at most "+this.args.length+" positional argument"+(1!=this.args.length?"s":"")+", "+t.length+" given")}}else n.push(t.slice(this.args.length));if(null===this.remkwargs){for(var u in r)if(!this.argNames[u])throw null===e?k.ArgumentError.create("an argument named "+k._repr(u)+" isn't supported"):k.ArgumentError.create(e+"() doesn't support an argument named "+k._repr(u))}else{var l={};for(var u in r)this.argNames[u]||(l[u]=r[u]);n.push(l)}return n},bindObject:function(e,t,r){t=this.bindArray(e,t,r);var n,i={};for(n=0;n<this.args.length;++n)i[this.args[n].name]=t[n];return null!==this.remargs&&(i[this.remargs]=t[n++]),null!==this.remkwargs&&(i[this.remkwargs]=t[n++]),i},__repr__:function(){return"<Signature "+this.toString()+">"},__str__:function(){return this.toString()},toString:function(){for(var e=[],t=0;t<this.args.length;++t){var r=this.args[t];r.hasOwnProperty("defaultValue")?e.push(r.name+"="+k._repr(r.defaultValue)):e.push(r.name)}return null!==this.remargs&&e.push("*"+this.remargs),null!==this.remkwargs&&e.push("**"+this.remkwargs),"("+e.join(", ")+")"}}),k.expose=function(e,t,r){return void 0===r&&(r=t,t={}),t.name&&(r._ul4_name=t.name),k._islist(e)&&(e=k.Signature.create.apply(k.Signature,e)),r._ul4_signature=e,r._ul4_needsobject=t.needsobject||!1,r._ul4_needscontext=t.needscontext||!1,r},k.Context=k._inherit(k.Proto,{create:function(e){null==e&&(e={});var t=k._clone(this);return t.vars=e,t.indents=[],t._output=[],t},inheritvars:function(){var e=k._clone(this);return e.vars=k._simpleclone(this.vars),e},withindent:function(e){var t=k._clone(this);return null!==e&&(t.indents=this.indents.slice(),t.indents.push(e)),t},replaceoutput:function(){var e=k._clone(this);return e._output=[],e},clone:function(e){return k._clone(this)},output:function(e){this._output.push(e)},getoutput:function(){return this._output.join("")},get:function(e){return this.vars[e]},set:function(e,t){this.vars[e]=t}}),k.Exception=k._inherit(k.Proto,{__type__:"ul4.Exception",cause:null,__getattr__:function(e){switch(e){case"cause":return this.cause;default:return}}}),k.InternalException=k._inherit(k.Exception,{}),k.ReturnException=k._inherit(k.InternalException,{__type__:"ul4.ReturnException",create:function(e){var t=k._clone(this);return t.result=e,t}}),k.BreakException=k._inherit(k.InternalException,{__type__:"ul4.BreakException"}),k.ContinueException=k._inherit(k.InternalException,{__type__:"ul4.ContinueException"}),k.SyntaxError=k._inherit(k.Exception,{__type__:"ul4.SyntaxError"}),k.LValueRequiredError=k._inherit(k.SyntaxError,{__type__:"ul4.LValueRequiredError",toString:function(){return"lvalue required!"}}),k.TypeError=k._inherit(k.Exception,{__type__:"ul4.TypeError",create:function(e,t){var r=k._clone(this);return r.operation=e,r.message=t,r},toString:function(){return this.message}}),k.ValueError=k._inherit(k.Exception,{__type__:"ul4.ValueError",create:function(e){var t=k._clone(this);return t.message=e,t},toString:function(){return this.message}}),k.ArgumentError=k._inherit(k.Exception,{__type__:"ul4.ArgumentError",create:function(e){var t=k._clone(this);return t.message=e,t},toString:function(){return this.message}}),k.LocationError=k._inherit(k.Exception,{__type__:"ul4.LocationError",create:function(e,t){var r=k._clone(this);return r.location=e,r.cause=t,r},_templateprefix:function(e){var t=[];null!==e.parenttemplate?t.push("in local template "):t.push("in template ");for(var r=!0;null!=e;)r?r=!1:t.push(" in "),t.push(null!==e.name?k._repr(e.name):"(unnamed)"),e=e.parenttemplate;return t.join("")},_template:function(){return k.Tag.isprotoof(this.location)?this.location.template:this.location.tag.template},_outerpos:function(){if(k.Tag.isprotoof(this.location))return this.location.pos;var e=this.location.tag;return null===e?this.location.pos:e.pos},_innerpos:function(){return this.location.pos},toString:function(){for(var e=this._template(),t=this._templateprefix(e),r=this._outerpos(),n=this._innerpos(),i=e.source.substring(r.start,n.start),o=e.source.substring(n.start,n.stop),s=e.source.substring(n.stop,r.stop),a=(i=k._repr(i).slice(1,-1))+(o=k._repr(o).slice(1,-1))+(s=k._repr(s).slice(1,-1)),u=k._str_repeat(" ",i.length)+k._str_repeat("~",o.length),l=1,_=1,c=0;c<n.start;++c)"\n"===e.source[c]?(++l,_=1):++_;return pos="offset "+this.location.pos.start+":"+this.location.pos.stop+"; line "+l+"; col "+_,t+": "+pos+"\n"+a+"\n"+u},__getattr__:function(e){switch(e){case"cause":return this.cause;case"location":return this.location;case"template":return this._template;case"outerpos":return this._outerpos;case"innerpos":return this._innerpos;default:return}}}),k.AST=k._inherit(k.Proto,{create:function(e){var t=k._clone(this);return t.pos=e,t},__str__:function(){var e=[];return this._str(e),k._formatsource(e)},__repr__:function(){var e=[];return this._repr(e),k._formatsource(e)},_handle_eval:function(e){try{return this._eval(e)}catch(e){throw k.InternalException.isprotoof(e)||k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_handle_eval_set:function(e,t){try{return this._eval_set(e,t)}catch(e){throw k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_eval_set:function(e,t){throw k.LValueRequiredError},_handle_eval_modify:function(e,t,r){try{return this._eval_modify(e,t,r)}catch(e){throw k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_eval_modify:function(e,t,r){throw k.LValueRequiredError},_repr:function(e){},_str:function(e){},ul4ondump:function(e){for(var t=0;t<this._ul4onattrs.length;++t)e.dump(this[this._ul4onattrs[t]])},ul4onload:function(e){for(var t=0;t<this._ul4onattrs.length;++t)this[this._ul4onattrs[t]]=e.load()},__setitem__:function(e,t){throw k.TypeError.create("mutate","object is immutable")},_ul4onattrs:["pos"]}),k.TextAST=k._inherit(k.AST,{create:function(e,t){var r=k.AST.create.call(this,t);return r.template=e,r},_ul4onattrs:k.AST._ul4onattrs.concat(["template"]),_text:function(){return this.template.source.substring(this.pos.start,this.pos.stop)},_eval:function(e){e.output(this._text())},_str:function(e){e.push("text "),e.push(k._repr(this._text()))},_repr:function(e){e.push("<TextAST "),e.push(k._repr(this._text())),e.push(">")}}),k.IndentAST=k._inherit(k.TextAST,{create:function(e,t,r){var n=k.TextAST.create.call(this,e,t);return n._maketext(r),n},_maketext:function(e){void 0!==this.template?this.text=null===e?this.template.source.substring(this.pos.start,this.pos.stop):e:this.text=null},_text:function(){return null===this.text?this.template.source.substring(this.pos.start,this.pos.stop):this.text},_eval:function(e){for(var t=0;t<e.indents.length;++t)e.output(e.indents[t]);e.output(this._text())},ul4ondump:function(e){k.TextAST.ul4ondump.call(this,e),this.text===this.template.source.substring(this.pos.start,this.pos.stop)?e.dump(null):e.dump(this.text)},ul4onload:function(e){k.TextAST.ul4onload.call(this,e),this._maketext(e.load())},_str:function(e){e.push("indent "),e.push(k._repr(this._text()))},_repr:function(e){e.push("<IndentAST "),e.push(k._repr(this._text())),e.push(">")}}),k.LineEndAST=k._inherit(k.TextAST,{_str:function(e){e.push("lineend "),e.push(k._repr(this._text()))},_repr:function(e){e.push("<LineEndAST "),e.push(k._repr(this._text())),e.push(">")}}),k.Tag=k._inherit(k.AST,{create:function(e,t,r,n){var i=k.AST.create.call(this,r);return i.template=e,i.tag=t,i.codepos=n,i._maketext(),i},_maketext:function(){void 0!==this.template?(this.text=this.template.source.substring(this.pos.start,this.pos.stop),this.code=this.template.source.substring(this.codepos.start,this.codepos.stop)):(this.text=null,this.code=null)},ul4ondump:function(e){k.AST.ul4ondump.call(this,e),e.dump(this.template),e.dump(this.tag),e.dump(this.codepos)},ul4onload:function(e){k.TextAST.ul4onload.call(this,e),this.template=e.load(),this.tag=e.load(),this.codepos=e.load(),this._maketext()}}),k.CodeAST=k._inherit(k.AST,{create:function(e,t){var r=k.AST.create.call(this,t);return r.tag=e,r},_ul4onattrs:k.AST._ul4onattrs.concat(["tag"]),_str:function(e){e.push(this.tag.source.substring(this.pos.start,this.pos.stop).replace(/\r?\n/g," "))}}),k.ConstAST=k._inherit(k.CodeAST,{create:function(e,t,r){var n=k.CodeAST.create.call(this,e,t);return n.value=r,n},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["value"]),_repr:function(e){e.push("<ConstAST value="),e.push(k._repr(this.value)),e.push(">")},_eval:function(e){return this.value}}),k.ItemArgBase=k._inherit(k.CodeAST,{_handle_eval_list:function(e,t){try{return this._eval_list(e,t)}catch(e){throw k.InternalException.isprotoof(e)||k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_handle_eval_set:function(e,t){try{return this._eval_set(e,t)}catch(e){throw k.InternalException.isprotoof(e)||k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_handle_eval_dict:function(e,t){try{return this._eval_dict(e,t)}catch(e){throw k.InternalException.isprotoof(e)||k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}},_handle_eval_call:function(e,t,r){try{return this._eval_call(e,t,r)}catch(e){throw k.InternalException.isprotoof(e)||k.LocationError.isprotoof(e)||(e=k.LocationError.create(this,e)),e}}}),k.SeqItemAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.value=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["value"]),_repr:function(e){e.push("<SeqItemAST value="),e.push(k._repr(this.value)),e.push(">")},_eval_list:function(e,t){var r=this.value._handle_eval(e);t.push(r)},_eval_set:function(e,t){var r=this.value._handle_eval(e);t.add(r)}}),k.UnpackSeqItemAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.value=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["value"]),_repr:function(e){e.push("<UnpackSeqItemAST value="),e.push(k._repr(this.value)),e.push(">")},_eval_list:function(e,t){for(var r=this.value._handle_eval(e),n=k._iter(r);;){var i=n.next();if(i.done)break;t.push(i.value)}},_eval_set:function(e,t){for(var r=this.value._handle_eval(e),n=k._iter(r);;){var i=n.next();if(i.done)break;t.add(i.value)}}}),k.DictItemAST=k._inherit(k.ItemArgBase,{create:function(e,t,r,n){var i=k.ItemArgBase.create.call(this,e,t);return i.key=r,i.value=n,i},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["key","value"]),_repr:function(e){e.push("<DictItemAST key="),e.push(k._repr(this.key)),e.push(" value="),e.push(k._repr(this.value)),e.push(">")},_eval_dict:function(e,t){var r=this.key._handle_eval(e),n=this.value._handle_eval(e);w._setmap(t,r,n)}}),k.UnpackDictItemAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.item=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["item"]),_repr:function(e){e.push("<UnpackDictItemAST item="),e.push(k._repr(this.item)),e.push(">")},_eval_dict:function(e,r){var t=this.item._handle_eval(e);if(k._islist(t))for(var n=0;n<t.length;++n){if(!k._islist(t[n])||2!=t[n].length)throw k.ArgumentError.create("** requires a list of (key, value) pairs");var i=t[n][0],o=t[n][1];w._setmap(r,i,o)}else if(k._ismap(t))t.forEach(function(e,t){w._setmap(r,t,e)});else if(k._isobject(t))for(var i in t)w._setmap(r,i,t[i])}}),k.PosArgAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.value=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["value"]),_repr:function(e){e.push("<PosArgAST value="),this.value._repr(e),e.push(">")},_eval_call:function(e,t,r){var n=this.value._handle_eval(e);t.push(n)}}),k.KeywordArgAST=k._inherit(k.ItemArgBase,{create:function(e,t,r,n){var i=k.ItemArgBase.create.call(this,e,t);return i.name=r,i.value=n,i},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["name","value"]),_repr:function(e){e.push("<KeywordArgAST name="),e.push(k._repr(this.name)),e.push(" value="),this.value._repr(e),e.push(">")},_eval_call:function(e,t,r){if(r.hasOwnProperty(this.name))throw k.ArgumentError.create("duplicate keyword argument "+this.name);var n=this.value._handle_eval(e);r[this.name]=n}}),k.UnpackListArgAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.item=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["item"]),_repr:function(e){e.push("<UnpackListArgAST item="),this.item._repr(e),e.push(">")},_eval_call:function(e,t,r){var n=this.item._handle_eval(e);t.push.apply(t,n)}}),k.UnpackDictArgAST=k._inherit(k.ItemArgBase,{create:function(e,t,r){var n=k.ItemArgBase.create.call(this,e,t);return n.item=r,n},_ul4onattrs:k.ItemArgBase._ul4onattrs.concat(["item"]),_repr:function(e){e.push("<UnpackDictArgAST item="),this.item._repr(e),e.push(">")},_eval_call:function(e,t,r){var n=this.item._handle_eval(e);if(k._islist(n))for(var i=0;i<n.length;++i){if(!k._islist(n[i])||2!=n[i].length)throw k.ArgumentError.create("** requires a list of (key, value) pairs");var o=n[i][0],s=n[i][1];if(r.hasOwnProperty(o))throw k.ArgumentError.create("duplicate keyword argument "+o);r[o]=s}else if(k._ismap(n))n.forEach(function(e,t){if(r.hasOwnProperty(t))throw k.ArgumentError.create("duplicate keyword argument "+t);r[t]=e});else if(k._isobject(n))for(var o in n){if(r.hasOwnProperty(o))throw k.ArgumentError.create("duplicate keyword argument "+o);r[o]=n[o]}}}),k.ListAST=k._inherit(k.CodeAST,{create:function(e,t){var r=k.CodeAST.create.call(this,e,t);return r.items=[],r},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["items"]),_repr:function(e){e.push("<ListAST");for(var t=0;t<this.items.length;++t)e.push(" "),this.items[t]._repr(e);e.push(">")},_eval:function(e){for(var t=[],r=0;r<this.items.length;++r)this.items[r]._handle_eval_list(e,t);return t}}),k.ListCompAST=k._inherit(k.CodeAST,{create:function(e,t,r,n,i,o){var s=k.CodeAST.create.call(this,e,t);return s.item=r,s.varname=n,s.container=i,s.condition=o,s},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["item","varname","container","condition"]),_repr:function(e){e.push("<ListCompAST"),e.push(" item="),this.item._repr(e),e.push(" varname="),e.push(k._repr(this.varname)),e.push(" container="),this.container._repr(e),null!==condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")},_eval:function(e){for(var t=this.container._handle_eval(e),r=e.inheritvars(),n=[],i=k._iter(t);;){var o=i.next();if(o.done)break;for(var s=k._unpackvar(this.varname,o.value),a=0;a<s.length;++a)s[a][0]._handle_eval_set(r,s[a][1]);(null===this.condition||k._bool(this.condition._handle_eval(r)))&&n.push(this.item._handle_eval(r))}return n}}),k.DictAST=k._inherit(k.CodeAST,{create:function(e,t){var r=k.CodeAST.create.call(this,e,t);return r.items=[],r},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["items"]),_repr:function(e){e.push("<DictAST");for(var t=0;t<this.items.length;++t)e.push(" "),this.items[t][0]._repr(e),e.push("="),this.items[t][1]._repr(e);e.push(">")},_eval:function(e){for(var t=w._emptymap(),r=0;r<this.items.length;++r)this.items[r]._handle_eval_dict(e,t);return t}}),k.DictCompAST=k._inherit(k.CodeAST,{create:function(e,t,r,n,i,o,s){var a=k.CodeAST.create.call(this,e,t);return a.key=r,a.value=n,a.varname=i,a.container=o,a.condition=s,a},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["key","value","varname","container","condition"]),_repr:function(e){e.push("<DictCompAST"),e.push(" key="),this.key._repr(e),e.push(" value="),this.value._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")},_eval:function(e){for(var t=this.container._handle_eval(e),r=e.inheritvars(),n=w._emptymap(),i=k._iter(t);;){var o=i.next();if(o.done)break;for(var s=k._unpackvar(this.varname,o.value),a=0;a<s.length;++a)s[a][0]._handle_eval_set(r,s[a][1]);if(null===this.condition||k._bool(this.condition._handle_eval(r))){var u=this.key._handle_eval(r),l=this.value._handle_eval(r);w._setmap(n,u,l)}}return n}}),k.SetAST=k._inherit(k.CodeAST,{create:function(e,t){var r=k.CodeAST.create.call(this,e,t);return r.items=[],r},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["items"]),_repr:function(e){e.push("<SetAST");for(var t=0;t<this.items.length;++t)e.push(" "),this.items[t][0]._repr(e),e.push("="),this.items[t][1]._repr(e);e.push(">")},_eval:function(e){for(var t=w._haveset?new Set:k._Set.create(),r=0;r<this.items.length;++r)this.items[r]._handle_eval_set(e,t);return t}}),k.SetCompAST=k._inherit(k.CodeAST,{create:function(e,t,r,n,i,o){var s=k.CodeAST.create.call(this,e,t);return s.item=r,s.container=i,s.condition=o,s},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["item","varname","container","condition"]),_repr:function(e){e.push("<SetCompAST"),e.push(" item="),this.item._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")},_eval:function(e){for(var t=this.container._handle_eval(e),r=e.inheritvars(),n=w._haveset?new Set:k._Set.create(),i=k._iter(t);;){var o=i.next();if(o.done)break;for(var s=k._unpackvar(this.varname,o.value),a=0;a<s.length;++a)s[a][0]._handle_eval_set(r,s[a][1]);(null===this.condition||k._bool(this.condition._handle_eval(r)))&&n.add(this.item._handle_eval(r))}return n}}),k.GenExprAST=k._inherit(k.CodeAST,{create:function(e,t,r,n,i,o){var s=k.CodeAST.create.call(this,e,t);return s.item=r,s.varname=n,s.container=i,s.condition=o,s},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["item","varname","container","condition"]),_repr:function(e){e.push("<GenExprAST"),e.push(" item="),this.item._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==this.condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")},_eval:function(e){var t=this.container._handle_eval(e),n=k._iter(t),i=e.inheritvars(),o=this;return{next:function(){for(;;){var e=n.next();if(e.done)return e;for(var t=k._unpackvar(o.varname,e.value),r=0;r<t.length;++r)t[r][0]._handle_eval_set(i,t[r][1]);if(null===o.condition||k._bool(o.condition._handle_eval(i)))return{value:o.item._handle_eval(i),done:!1}}}}}}),k.VarAST=k._inherit(k.CodeAST,{create:function(e,t,r){var n=k.CodeAST.create.call(this,e,t);return n.name=r,n},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["name"]),_repr:function(e){e.push("<VarAST name="),e.push(k._repr(this.name)),e.push(">")},_eval:function(e){return this._get(e,this.name)},_eval_set:function(e,t){this._set(e,this.name,t)},_eval_modify:function(e,t,r){this._modify(e,t,this.name,r)},_get:function(e,t){var r=e.get(t);return void 0===r&&(r=k.functions[t]),r},_set:function(e,t,r){e.set(t,r)},_modify:function(e,t,r,n){var i=t._ido(e.get(r),n);e.set(r,i)}}),k.UnaryAST=k._inherit(k.CodeAST,{create:function(e,t,r){var n=k.CodeAST.create.call(this,e,t);return n.obj=r,n},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["obj"]),_repr:function(e){e.push("<"),e.push(this.typename),e.push(" obj="),this.obj._repr(e),e.push(">")},_eval:function(e){var t=this.obj._handle_eval(e);return this._do(t)}}),k.NegAST=k._inherit(k.UnaryAST,{_do:function(e){return null!==e&&"function"==typeof e.__neg__?e.__neg__():-e}}),k.BitNotAST=k._inherit(k.UnaryAST,{_do:function(e){return-e-1}}),k.NotAST=k._inherit(k.UnaryAST,{_do:function(e){return!k._bool(e)}}),k.IfAST=k._inherit(k.CodeAST,{create:function(e,t,r,n,i){var o=k.CodeAST.create.call(this,e,t);return o.objif=r,o.objcond=n,o.objelse=i,o},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["objif","objcond","objelse"]),_repr:function(e){e.push("<"),e.push(this.typename),e.push(1),e.push("objif="),this.objif._repr(e),e.push(0),e.push("objcond="),this.objcond._repr(e),e.push(0),e.push("objelse="),this.objelse._repr(e),e.push(-1),e.push(">")},_eval:function(e){var t=this.objcond._handle_eval(e);return k._bool(t)?this.objif._handle_eval(e):this.objelse._handle_eval(e)}}),k.ReturnAST=k._inherit(k.UnaryAST,{_eval:function(e){var t=this.obj._handle_eval(e);throw k.ReturnException.create(t)},_str:function(e){e.push("return "),this.obj._str(e)}}),k.PrintAST=k._inherit(k.UnaryAST,{_eval:function(e){var t=this.obj._handle_eval(e),r=k._str(t);e.output(r)},_str:function(e){e.push("print "),this.obj._str(e)}}),k.PrintXAST=k._inherit(k.UnaryAST,{_eval:function(e){var t=this.obj._handle_eval(e),r=k._xmlescape(t);e.output(r)},_str:function(e){e.push("printx "),this.obj._str(e)}}),k.BinaryAST=k._inherit(k.CodeAST,{create:function(e,t,r,n){var i=k.CodeAST.create.call(this,e,t);return i.obj1=r,i.obj2=n,i},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["obj1","obj2"]),_repr:function(e){e.push("<"),e.push(this.type),e.push(" obj1="),this.obj1._repr(e),e.push(" obj2="),this.obj2._repr(e),e.push(">")},_eval:function(e){var t=this.obj1._handle_eval(e),r=this.obj2._handle_eval(e);return this._do(t,r)}}),k.ItemAST=k._inherit(k.BinaryAST,{_do:function(e,t){return this._get(e,t)},_eval_set:function(e,t){var r=this.obj1._handle_eval(e),n=this.obj2._handle_eval(e);this._set(r,n,t)},_eval_modify:function(e,t,r){var n=this.obj1._handle_eval(e),i=this.obj2._handle_eval(e);this._modify(t,n,i,r)},_get:function(e,t){if("string"==typeof e||k._islist(e)){if("object"===A(t)&&"function"==typeof t.isa&&t.isa(k.slice)){var r=t.start,n=t.stop;return null==r&&(r=0),null==n&&(n=e.length),e.slice(r,n)}return t<0&&(t+=e.length),e[t]}if(e&&"function"==typeof e.__getitem__)return e.__getitem__(t);if(k._ismap(e))return e.get(t);if("[object Object]"===Object.prototype.toString.call(e))return e[t];throw k.TypeError.create("[]",k._type(e)+" object is not subscriptable")},_set:function(e,t,r){if(k._islist(e))if("object"===A(t)&&"function"==typeof t.isa&&t.isa(k.slice)){var n=t.start,i=t.stop;null===n?n=0:n<0&&(n+=e.length),n<0?n=0:n>e.length&&(n=e.length),null===i?i=e.length:i<0&&(i+=e.length),i<0?i=0:i>e.length&&(i=e.length),i<n&&(i=n),e.splice(n,i-n);for(var o=k._iter(r);;){var s=o.next();if(s.done)break;e.splice(n++,0,s.value)}}else t<0&&(t+=e.length),e[t]=r;else if(e&&"function"==typeof e.__setitem__)e.__setitem__(t,r);else if(k._ismap(e))e.set(t,r);else{if("[object Object]"!==Object.prototype.toString.call(e))throw k.NotSubscriptableError.create(e);e[t]=r}},_modify:function(e,t,r,n){this._set(t,r,e._ido(this._get(t,r),n))}}),k.IsAST=k._inherit(k.BinaryAST,{_do:function(e,t){return e===t}}),k.IsNotAST=k._inherit(k.BinaryAST,{_do:function(e,t){return e!==t}}),k.EQAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._eq(e,t)}}),k.NEAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._ne(e,t)}}),k.LTAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._lt(e,t)}}),k.LEAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._le(e,t)}}),k.GTAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._gt(e,t)}}),k.GEAST=k._inherit(k.BinaryAST,{_do:function(e,t){return k._ge(e,t)}}),k.ContainsAST=k._inherit(k.BinaryAST,{_do:function(e,t){if("string"==typeof e&&"string"==typeof t)return-1!==t.indexOf(e);if(k._islist(t))return-1!==t.indexOf(e);if(t&&"function"==typeof t.__contains__)return t.__contains__(e);if(k._ismap(t)||k._isset(t))return t.has(e);if(k._isobject(t)){for(var r in t)if(r===e)return!0;return!1}if(k._iscolor(t))return t._r===e||t._g===e||t._b===e||t._a===e;throw k.TypeError.create("in",k._type(t)+" object is not iterable")}}),k.NotContainsAST=k._inherit(k.BinaryAST,{_do:function(e,t){return!k.ContainsAST._do(e,t)}}),k.AddAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(e&&"function"==typeof e.__add__)return e.__add__(t);if(t&&"function"==typeof t.__radd__)return t.__radd__(e);if(null===e||null===t)throw k.TypeError.create("+",k._type(this.obj1)+" + "+k._type(this.obj2)+" is not supported");if(k._islist(e)&&k._islist(t)){var r=[];return k._append(r,e),k._append(r,t),r}return e+t},_ido:function(e,t){return k._islist(e)&&k._islist(t)?(k._append(e,t),e):this._do(e,t)}}),k.SubAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(e&&"function"==typeof e.__sub__)return e.__sub__(t);if(t&&"function"==typeof t.__rsub__)return t.__rsub__(e);if(k._isdate(e)&&k._isdate(t))return this._date_sub(e,t);if(null===e||null===t)throw k.TypeError.create("-",k._type(this.obj1)+" - "+k._type(this.obj2)+" is not supported");return e-t},_date_sub:function(e,t){var r=e<t;if(r){var n=e;e=t,t=n}for(var i=e.getFullYear(),o=k._yearday(e),s=t.getFullYear(),a=k._yearday(t),u=0;s<i;)u+=k._yearday(k._date(s,12,31)),++s;u+=o-a;var l=e.getHours(),_=e.getMinutes(),c=e.getSeconds(),h=t.getHours(),f=t.getMinutes(),p=c-t.getSeconds()+60*(_-f+60*(l-h)),d=e.getMilliseconds()-t.getMilliseconds();return r&&(u=-u,p=-p,d=-d),k.TimeDelta.create(u,p,1e3*d)},_ido:function(e,t){return this._do(e,t)}}),k.MulAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(e&&"function"==typeof e.__mul__)return e.__mul__(t);if(t&&"function"==typeof t.__rmul__)return t.__rmul__(e);if(null===e||null===t)throw k.TypeError.create("*",k._type(e)+" * "+k._type(t)+" not supported");if(k._isint(e)||k._isbool(e)){if("string"==typeof t){if(e<0)throw k.ValueError.create("repetition counter must be positive");return k._str_repeat(t,e)}if(k._islist(t)){if(e<0)throw k.ValueError.create("repetition counter must be positive");return k._list_repeat(t,e)}}else if(k._isint(t)||k._isbool(t)){if("string"==typeof e){if(t<0)throw k.ValueError.create("repetition counter must be positive");return k._str_repeat(e,t)}if(k._islist(e)){if(t<0)throw k.ValueError.create("repetition counter must be positive");return k._list_repeat(e,t)}}return e*t},_ido:function(e,t){if(k._islist(e)&&k._isint(t)){if(0<t)for(var r=0,n=e.length*t;e.length<n;)e.push(e[r++]);else e.splice(0,e.length);return e}return this._do(e,t)}}),k.FloorDivAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(e&&"function"==typeof e.__floordiv__)return e.__floordiv__(t);if(t&&"function"==typeof t.__rfloordiv__)return t.__rfloordiv__(e);if(null===e||null===t)throw k.TypeError.create("//",k._type(e)+" // "+k._type(t)+" not supported");return Math.floor(e/t)},_ido:function(e,t){return this._do(e,t)}}),k.TrueDivAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(e&&"function"==typeof e.__truediv__)return e.__truediv__(t);if(t&&"function"==typeof t.__rtruediv__)return t.__rtruediv__(e);if(null===e||null===t)throw k.TypeError.create("/",k._type(e)+" / "+k._type(t)+" not supported");return e/t},_ido:function(e,t){return this._do(e,t)}}),k.ModAST=k._inherit(k.BinaryAST,{_do:function(e,t){var r=Math.floor(e/t),n=e-r*t;return 0!==n&&(t<0&&0<n||0<t&&n<0)&&(n+=t,--r),e-r*t},_ido:function(e,t){return this._do(e,t)}}),k.ShiftLeftAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(!1===t?t=0:!0===t&&(t=1),t<0)return k.ShiftRightAST._do(e,-t);for(!1===e?e=0:!0===e&&(e=1);t--;)e*=2;return e},_ido:function(e,t){return this._do(e,t)}}),k.ShiftRightAST=k._inherit(k.BinaryAST,{_do:function(e,t){if(!1===t?t=0:!0===t&&(t=1),t<0)return k.ShiftLeftAST._do(e,-t);for(!1===e?e=0:!0===e&&(e=1);t--;)e/=2;return Math.floor(e)},_ido:function(e,t){return this._do(e,t)}}),k.BitAndAST=k._inherit(k.BinaryAST,{_do:function(e,t){return!1===t?t=0:!0===t&&(t=1),e&t},_ido:function(e,t){return this._do(e,t)}}),k.BitXOrAST=k._inherit(k.BinaryAST,{_do:function(e,t){return!1===t?t=0:!0===t&&(t=1),e^t},_ido:function(e,t){return this._do(e,t)}}),k.BitOrAST=k._inherit(k.BinaryAST,{_do:function(e,t){return!1===t?t=0:!0===t&&(t=1),e|t},_ido:function(e,t){return this._do(e,t)}}),k.AndAST=k._inherit(k.BinaryAST,{_eval:function(e){var t=this.obj1._handle_eval(e);return k._bool(t)?this.obj2._handle_eval(e):t}}),k.OrAST=k._inherit(k.BinaryAST,{_eval:function(e){var t=this.obj1._handle_eval(e);return k._bool(t)?t:this.obj2._handle_eval(e)}}),k.AttrAST=k._inherit(k.CodeAST,{create:function(e,t,r,n){var i=k.CodeAST.create.call(this,e,t);return i.obj=r,i.attrname=n,i},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["obj","attrname"]),_repr:function(e){e.push("<AttrAST"),e.push(" obj="),this.obj._repr(e),e.push(" attrname="),e.push(k._repr(this.attrname)),e.push(">")},_eval:function(e){var t=this.obj._handle_eval(e);return this._get(t,this.attrname)},_eval_set:function(e,t){var r=this.obj._handle_eval(e);this._set(r,this.attrname,t)},_eval_modify:function(e,t,r){var n=this.obj._handle_eval(e);this._modify(t,n,this.attrname,r)},_get:function(n,e){if("string"==typeof n)switch(e){case"count":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._count(n,e,t,r)});case"find":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._find(n,e,t,r)});case"rfind":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._rfind(n,e,t,r)});case"replace":return k.expose(["old","new","count=",null],function(e,t,r){return k._replace(n,e,t,r)});case"strip":return k.expose(["chars=",null],function(e){return k._strip(n,e)});case"lstrip":return k.expose(["chars=",null],function(e){return k._lstrip(n,e)});case"rstrip":return k.expose(["chars=",null],function(e){return k._rstrip(n,e)});case"split":return k.expose(["sep=",null,"count=",null],function(e,t){return k._split(n,e,t)});case"rsplit":return k.expose(["sep=",null,"count=",null],function(e,t){return k._rsplit(n,e,t)});case"splitlines":return k.expose(["keepends=",!1],function(e){return k._splitlines(n,e)});case"lower":return k.expose([],function(){return n.toLowerCase()});case"upper":return k.expose([],function(){return n.toUpperCase()});case"capitalize":return k.expose([],function(){return k._capitalize(n)});case"join":return k.expose(["iterable"],function(e){return k._join(n,e)});case"startswith":return k.expose(["prefix"],function(e){return k._startswith(n,e)});case"endswith":return k.expose(["suffix"],function(e){return k._endswith(n,e)});default:return}else if(k._islist(n))switch(e){case"append":return k.expose(["*items"],function(e){return k._append(n,e)});case"insert":return k.expose(["pos","*items"],function(e,t){return k._insert(n,e,t)});case"pop":return k.expose(["pos=",-1],function(e){return k._pop(n,e)});case"count":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._count(n,e,t,r)});case"find":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._find(n,e,t,r)});case"rfind":return k.expose(["sub","start=",null,"end=",null],function(e,t,r){return k._rfind(n,e,t,r)});default:return}else if(k._isdate(n))switch(e){case"weekday":return k.expose([],function(){return k._weekday(n)});case"week":return k.expose(["firstweekday=",null],function(e){return k._week(n,e)});case"day":return k.expose([],function(){return n.getDate()});case"month":return k.expose([],function(){return n.getMonth()+1});case"year":return k.expose([],function(){return n.getFullYear()});case"hour":return k.expose([],function(){return n.getHours()});case"minute":return k.expose([],function(){return n.getMinutes()});case"second":return k.expose([],function(){return n.getSeconds()});case"microsecond":return k.expose([],function(){return 1e3*n.getMilliseconds()});case"mimeformat":return k.expose([],function(){return k._mimeformat(n)});case"isoformat":return k.expose([],function(){return k._isoformat(n)});case"yearday":return k.expose([],function(){return k._yearday(n)});default:return}else if(k._ismap(n))switch(e){case"get":return k.expose(["key","default=",null],function(e,t){return k._get(n,e,t)});case"items":return k.expose([],function(){return k._items(n)});case"values":return k.expose([],function(){return k._values(n)});case"update":return k.expose(["*other","**kwargs"],function(e,t){return k._update(n,e,t)});case"clear":return k.expose([],function(){return k._clear(n)});default:return n.get(e)}else if(k._isset(n))switch(e){case"add":return k.expose(["*items"],function(e){for(var t=0;t<e.length;++t)n.add(e[t])});case"clear":return k.expose([],function(){return k._clear(n)});default:return}else if("[object Object]"===Object.prototype.toString.call(n))switch(e){case"get":return k.expose(["key","default=",null],function(e,t){return k._get(n,e,t)});case"items":return k.expose([],function(){return k._items(n)});case"values":return k.expose([],function(){return k._values(n)});case"update":return k.expose(["*other","**kwargs"],function(e,t){return k._update(n,e,t)});case"clear":return k.expose([],function(){return k._clear(n)});default:var t;if("function"!=typeof(t=n&&"function"==typeof n.__getattr__?n.__getattr__(e):n[e]))return t;var r=function(){return t.apply(n,arguments)};return r._ul4_name=t._ul4_name||t.name,r._ul4_signature=t._ul4_signature,r._ul4_needsobject=t._ul4_needsobject,r._ul4_needscontext=t._ul4_needscontext,r}throw k.TypeError.create("get",k._type(n)+" object has no readable attributes")},_set:function(e,t,r){if("object"===A(e)&&"function"==typeof e.__setattr__)e.__setattr__(t,r);else if(k._ismap(e))e.set(t,r);else{if(!k._isobject(e))throw k.TypeError.create("set",k._type(e)+" object has no writable attributes");e[t]=r}},_modify:function(e,t,r,n){var i=this._get(t,r),o=e._ido(i,n);this._set(t,r,o)}}),k.CallAST=k._inherit(k.CodeAST,{create:function(e,t,r,n){var i=k.CodeAST.create.call(this,e,t);return i.obj=r,i.args=n,i},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["obj","args"]),_repr:function(e){e.push("<CallAST"),e.push(" obj="),this.obj._repr(e);for(var t=0;t<this.args.length;++t){var r=this.args[t];e.push(" "),r._repr(e)}e.push(">")},_makeargs:function(e){for(var t=[],r={},n=0;n<this.args.length;++n)this.args[n]._handle_eval_call(e,t,r);return{args:t,kwargs:r}},_handle_eval:function(e){try{return this._eval(e)}catch(e){throw e=k.LocationError.create(this,e)}},_eval:function(e){var t=this.obj._handle_eval(e),r=this._makeargs(e);return k._call(e,t,r.args,r.kwargs)}}),k.RenderAST=k._inherit(k.CallAST,{create:function(e,t,r,n){var i=k.CallAST.create.call(this,e,t,r,n);return i.indent=null,i},_ul4onattrs:k.CallAST._ul4onattrs.concat(["indent"]),_repr:function(e){e.push("<RenderAST"),e.push(" indent="),e.push(k._repr(this.indent)),e.push(" obj="),this.obj._repr(e),e.push(0);for(var t=0;t<this.args.length;++t){var r=this.args[t][0],n=this.args[t][1];e.push(" "),null===r||("*"===r?e.push("*"):"**"===r?e.push("**"):e.push(r+"=")),n._repr(e),e.push(0)}e.push(-1),e.push(">")},_str:function(e){e.push("render "),e.push(this.tag.source.substring(this.pos.start,this.pos.stop).replace(/\r?\n/g," ")),null!==this.indent&&(e.push(" with indent "),e.push(k._repr(this.indent._text())))},_handle_eval:function(e){var t=e.withindent(null!==this.indent?this.indent._text():null),r=this.obj._handle_eval(t),n=this._makeargs(t);try{return k._callrender(t,r,n.args,n.kwargs)}catch(e){throw e=k.LocationError.create(this,e)}}}),k.slice=k._inherit(k.Proto,{create:function(e,t){var r=k._clone(this);return r.start=e,r.stop=t,r},__repr__:function(){return"slice("+k._repr(this.start)+", "+k._repr(this.stop)+")"}}),k.SliceAST=k._inherit(k.CodeAST,{create:function(e,t,r,n){var i=k.CodeAST.create.call(this,e,t);return i.index1=r,i.index2=n,i},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["index1","index2"]),_repr:function(e){e.push("<SliceAST"),null!==this.index1&&(e.push(" index1="),this.index1._repr(e)),null!==this.index2&&(e.push(" index2="),this.index2._repr(e)),e.push(">")},_eval:function(e){var t=null!==this.index1?this.index1._handle_eval(e):null,r=null!==this.index2?this.index2._handle_eval(e):null;return k.slice.create(t,r)}}),k.SetVarAST=k._inherit(k.CodeAST,{create:function(e,t,r,n){var i=k.CodeAST.create.call(this,e,t);return i.lvalue=r,i.value=n,i},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["lvalue","value"]),_repr:function(e){e.push("<"),e.push(this.typename),e.push(" lvalue="),e.push(k._repr(this.lvalue)),e.push(" value="),this.value._repr(e),e.push(">")},_eval:function(e){for(var t=this.value._handle_eval(e),r=k._unpackvar(this.lvalue,t),n=0;n<r.length;++n){var i=r[n];i[0]._handle_eval_set(e,i[1])}}}),k.ModifyVarAST=k._inherit(k.SetVarAST,{_eval:function(e){for(var t=this.value._handle_eval(e),r=k._unpackvar(this.lvalue,t),n=0;n<r.length;++n){var i=r[n];i[0]._handle_eval_modify(e,this._operator,i[1])}}}),k.AddVarAST=k._inherit(k.ModifyVarAST,{_operator:k.AddAST}),k.SubVarAST=k._inherit(k.ModifyVarAST,{_operator:k.SubAST}),k.MulVarAST=k._inherit(k.ModifyVarAST,{_operator:k.MulAST}),k.TrueDivVarAST=k._inherit(k.ModifyVarAST,{_operator:k.TrueDivAST}),k.FloorDivVarAST=k._inherit(k.ModifyVarAST,{_operator:k.FloorDivAST}),k.ModVarAST=k._inherit(k.ModifyVarAST,{_operator:k.ModAST}),k.ShiftLeftVarAST=k._inherit(k.ModifyVarAST,{_operator:k.ShiftLeftAST}),k.ShiftRightVarAST=k._inherit(k.ModifyVarAST,{_operator:k.ShiftRightAST}),k.BitAndVarAST=k._inherit(k.ModifyVarAST,{_operator:k.BitAndAST}),k.BitXOrVarAST=k._inherit(k.ModifyVarAST,{_operator:k.BitXOrAST}),k.BitOrVarAST=k._inherit(k.ModifyVarAST,{_operator:k.BitOrAST}),k.BlockAST=k._inherit(k.CodeAST,{create:function(e,t){var r=k.CodeAST.create.call(this,e,t);return r.endtag=null,r.content=[],r},_ul4onattrs:k.CodeAST._ul4onattrs.concat(["endtag","content"]),_eval:function(e){for(var t=0;t<this.content.length;++t)this.content[t]._handle_eval(e)},_str:function(e){if(this.content.length)for(var t=0;t<this.content.length;++t)this.content[t]._str(e),e.push(0);else e.push("pass"),e.push(0)}}),k.ForBlockAST=k._inherit(k.BlockAST,{create:function(e,t,r,n){var i=k.BlockAST.create.call(this,e,t);return i.varname=r,i.container=n,i},_ul4onattrs:k.BlockAST._ul4onattrs.concat(["varname","container"]),_repr:function(e){e.push("<ForBlockAST"),e.push(" varname="),e.push(k._repr(this.varname)),e.push(" container="),this.container._repr(e),e.push(">")},_str_varname:function(e,t){if(k._islist(t)){e.push("(");for(var r=0;r<t.length;++r)r&&e.push(", "),this._str_varname(e,t[r]);1==t.length&&e.push(","),e.push(")")}else t._str(e)},_eval:function(e){for(var t=this.container._handle_eval(e),r=k._iter(t);;){var n=r.next();if(n.done)break;for(var i=k._unpackvar(this.varname,n.value),o=0;o<i.length;++o)i[o][0]._handle_eval_set(e,i[o][1]);try{k.BlockAST._eval.call(this,e)}catch(e){if(e===k.BreakException)break;if(e!==k.ContinueException)throw e}}},_str:function(e){e.push("for "),this._str_varname(e,this.varname),e.push(" in "),this.container._str(e),e.push(":"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)}}),k.WhileBlockAST=k._inherit(k.BlockAST,x({create:function(e,t,r){var n=k.BlockAST.create.call(this,e,t);return n.condition=r,n},_ul4onattrs:k.BlockAST._ul4onattrs.concat(["condition"]),_repr:function(e){e.push("<WhileAST"),e.push(" condition="),this.condition._repr(e),e.push(">")},_str:function(e){e.push("while "),this.container._repr(e),e.push(":"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)},_eval:function(e){for(;;){var t=this.condition._handle_eval(e);if(!k._bool(t))break;try{k.BlockAST._eval.call(this,e)}catch(e){if(e===k.BreakException)break;if(e!==k.ContinueException)throw e}}}},"_str",function(e){e.push("while "),k.AST._str.call(this,e),e.push(":"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)})),k.BreakAST=k._inherit(k.CodeAST,{_eval:function(e){throw k.BreakException},_str:function(e){e.push("break"),e.push(0)},_repr:function(e){e.push("<BreakAST>")}}),k.ContinueAST=k._inherit(k.CodeAST,{_eval:function(e){throw k.ContinueException},_str:function(e){e.push("continue"),e.push(0)},_repr:function(e){e.push("<ContinueAST>")}}),k.CondBlockAST=k._inherit(k.BlockAST,{_eval:function(e){for(var t=0;t<this.content.length;++t){var r=this.content[t];if(r._execute(e)){r._handle_eval(e);break}}}}),k.ConditionalBlockAST=k._inherit(k.BlockAST,{create:function(e,t,r){var n=k.BlockAST.create.call(this,e,t);return n.condition=r,n},_ul4onattrs:k.BlockAST._ul4onattrs.concat(["condition"]),_repr:function(e){e.push("<"),e.push(this.typename),e.push(" condition="),this.condition._repr(e),e.push(">")},_str:function(e){e.push(this._strname),e.push(" "),this.condition._str(e),e.push(":"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)},_execute:function(e){var t=this.condition._handle_eval(e);return k._bool(t)}}),k.IfBlockAST=k._inherit(k.ConditionalBlockAST,{_strname:"if"}),k.ElIfBlockAST=k._inherit(k.ConditionalBlockAST,{_strname:"else if"}),k.ElseBlockAST=k._inherit(k.BlockAST,x({_repr:function(e){e.push("<ElseAST"),e.push(">")},_str:function(e){e.push("else:"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)},_execute:function(e){return!0}},"_str",function(e){e.push("else:"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)})),k.Template=k._inherit(k.BlockAST,{create:function(e,t,r,n,i,o,s,a){var u=k.BlockAST.create.call(this,e,t);return u.source=r,u.name=n,u.whitespace=i,u.startdelim=o,u.enddelim=s,u.docpos=null,u.signature=a,u._jsfunction=null,u._asts=null,u._ul4_callsignature=a,u._ul4_rendersignature=a,u.parenttemplate=null,u},ul4ondump:function(e){var t;if(e.dump(k.version),e.dump(this.name),e.dump(this.source),e.dump(this.whitespace),e.dump(this.startdelim),e.dump(this.enddelim),e.dump(this.docpos),e.dump(this.parenttemplate),null===this.signature||k.SignatureAST.isprotoof(this.signature))t=this.signature;else{t=[];for(var r=0;r<this.signature.args.length;++r){var n=this.signature.args[r];void 0===n.defaultValue?t.push(n.name):t.push(n.name+"=",n.defaultValue)}null!==this.signature.remargs&&t.push("*"+this.signature.remargs),null!==this.signature.remkwargs&&t.push("**"+this.signature.remkwargs)}e.dump(t),k.BlockAST.ul4ondump.call(this,e)},ul4onload:function(e){var t,r=e.load();if(null===r)throw k.ValueError.create("UL4ON doesn't support templates in 'source' format in Javascript implementation");if(r!==k.version)throw k.ValueError.create("invalid version, expected "+k.version+", got "+r);this.name=e.load(),this.source=e.load(),this.whitespace=e.load(),this.startdelim=e.load(),this.enddelim=e.load(),this.docpos=e.load(),this.parenttemplate=e.load(),t=e.load(),k._islist(t)&&(t=k.Signature.create.apply(k.Signature,t)),this.signature=t,this._ul4_callsignature=t,this._ul4_rendersignature=t,k.BlockAST.ul4onload.call(this,e)},loads:function(e){return w.loads(e)},_eval:function(e){var t=null;null!==this.signature&&(t=this.signature._handle_eval(e));var r=k.TemplateClosure.create(this,t,e.vars);e.set(this.name,r)},_repr:function(e){e.push("<Template"),null!==this.name&&(e.push(" name="),e.push(k._repr(this.name))),e.push(" whitespace="),e.push(k._repr(this.whitespace)),"<?"!==this.startdelim&&(e.push(" startdelim="),e.push(k._repr(this.startdelim))),"?>"!==this.enddelim&&(e.push(" enddelim="),e.push(k._repr(this.enddelim))),e.push(">")},_str:function(e){e.push("def "),e.push(this.name?this.name:"unnamed"),e.push(":"),e.push(1),k.BlockAST._str.call(this,e),e.push(-1)},_ul4_callneedsobject:!0,_ul4_callneedscontext:!0,_ul4_renderneedsobject:!0,_ul4_renderneedscontext:!0,_renderbound:function(e,t){var r=e.clone();r.vars=t;try{k.BlockAST._eval.call(this,r)}catch(e){if(!k.ReturnException.isprotoof(e))throw e}},__render__:function(e,t){this._renderbound(e,t)},render:function(e,t){this._renderbound(e,t)},_rendersbound:function(e,t){var r=e.replaceoutput();return this._renderbound(r,t),r.getoutput()},renders:function(e){e=e||{};var t=k.Context.create();return null!==this.signature&&(e=this.signature.bindObject(this.name,[],e)),this._rendersbound(t,e)},doc:function(){return null!=this.docpos?this.source.substring(this.docpos.start,this.docpos.stop):null},__getattr__:function(e){var r=this;switch(e){case"tag":return this.tag;case"endtag":return this.endtag;case"content":return this.content;case"source":return this.source;case"name":return this.name;case"whitespace":return this.whitespace;case"startdelim":return this.startdelim;case"enddelim":return this.enddelim;case"doc":return this.doc();case"signature":return this.signature;case"parenttemplate":return this.parenttemplate;case"render":return k.expose(this.signature,{needscontext:!0,needsobject:!0},function(e,t){r._renderbound(e,t)});case"renders":return k.expose(this.signature,{needscontext:!0,needsobject:!0},function(e,t){return r._rendersbound(e,t)});default:return}},_callbound:function(e,t){var r=e.clone();r.vars=t;try{k.BlockAST._eval.call(this,r)}catch(e){if(k.ReturnException.isprotoof(e))return e.result;throw e}return null},call:function(e){e=e||{};var t=k.Context.create();return null!==this.signature&&(e=this.signature.bindObject(this.name,[],e)),this._callbound(t,e)},__call__:function(e,t){return this._callbound(e,t)},__type__:"ul4.Template"}),k.SignatureAST=k._inherit(k.CodeAST,{create:function(e,t){var r=k.CodeAST.create.call(this,e,t);return r.params=[],r},ul4ondump:function(e){k.CodeAST.ul4ondump.call(this,e);for(var t=[],r=0;r<this.params.length;++r){var n=this.params[r];null===n[1]?t.push(n[0]):t.push(n)}e.dump(t)},ul4onload:function(e){k.AST.ul4onload.call(this,e);var t=e.load();this.params=[];for(var r=0;r<t.length;++r){var n=t[r];"string"==typeof n?this.params.push([n,null]):this.params.push(n)}},_eval:function(e){for(var t=[],r=0;r<this.params.length;++r){var n=this.params[r];null===n[1]?t.push(n[0]):(t.push(n[0]+"="),t.push(n[1]._handle_eval(e)))}return k.Signature.create.apply(k.Signature,t)},_repr:function(e){e.push("<"),e.push(this.typename),e.push(" params="),this.params._repr(e),e.push(">")}}),k.TemplateClosure=k._inherit(k.Proto,{create:function(e,t,r){var n=k._clone(this);return n.template=e,n.signature=t,n.vars=r,n._ul4_callsignature=t,n._ul4_rendersignature=t,n.name=e.name,n.tag=e.tag,n.endtag=e.endtag,n.source=e.source,n.startdelim=e.startdelim,n.enddelim=e.enddelim,n.docpos=e.docpos,n.content=e.content,n},_ul4_callneedsobject:!0,_ul4_callneedscontext:!0,_ul4_renderneedsobject:!0,_ul4_renderneedscontext:!0,__render__:function(e,t){this.template._renderbound(e,k._simpleinherit(this.vars,t))},render:function(e,t){this.template._renderbound(e,k._simpleinherit(this.vars,t))},__call__:function(e,t){return this.template._callbound(e,k._simpleinherit(this.vars,t))},_renderbound:function(e,t){this.template._renderbound(e,k._simpleinherit(this.vars,t))},_rendersbound:function(e,t){return this.template._rendersbound(e,k._simpleinherit(this.vars,t))},__getattr__:function(e){var r=this;switch(e){case"render":return k.expose(this.signature,{needscontext:!0,needsobject:!0},function(e,t){r._renderbound(e,t)});case"renders":return k.expose(this.signature,{needscontext:!0,needsobject:!0},function(e,t){return r._rendersbound(e,t)});case"signature":return this.signature;default:return this.template.__getattr__(e)}},__type__:"ul4.TemplateClosure"}),k._rgb=function(e,t,r,n){return this.Color.create(255*e,255*t,255*r,255*n)},k._xmlescape=function(e){return e=(e=(e=(e=(e=(e=k._str(e)).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&#39;")).replace(/"/g,"&quot;")},k._csv=function(e){return null===e?"":("string"!=typeof e&&(e=k._repr(e)),-1===e.indexOf(",")&&-1===e.indexOf('"')&&-1===e.indexOf("\n")||(e='"'+e.replace(/"/g,'""')+'"'),e)},k._chr=function(e){if("number"!=typeof e)throw k.TypeError.create("chr()","chr() requires an int");return String.fromCharCode(e)},k._ord=function(e){if("string"!=typeof e||1!=e.length)throw k.TypeError.create("ord()","ord() requires a string of length 1");return e.charCodeAt(0)},k._hex=function(e){if("number"!=typeof e)throw k.TypeError.create("hex()","hex() requires an int");return e<0?"-0x"+e.toString(16).substr(1):"0x"+e.toString(16)},k._oct=function(e){if("number"!=typeof e)throw k.TypeError.create("oct()","oct() requires an int");return e<0?"-0o"+e.toString(8).substr(1):"0o"+e.toString(8)},k._bin=function(e){if("number"!=typeof e)throw k.TypeError.create("bin()","bin() requires an int");return e<0?"-0b"+e.toString(2).substr(1):"0b"+e.toString(2)},k._min=function(e){if(0==e.length)throw k.ArgumentError.create("min() requires at least 1 argument, 0 given");1==e.length&&(e=e[0]);for(var t,r=k._iter(e),n=!0;;){var i=r.next();if(i.done){if(n)throw k.ValueError.create("min() argument is an empty sequence!");return t}(n||i.value<t)&&(t=i.value),n=!1}},k._max=function(e){if(0==e.length)throw k.ArgumentError.create("max() requires at least 1 argument, 0 given");1==e.length&&(e=e[0]);for(var t,r=k._iter(e),n=!0;;){var i=r.next();if(i.done){if(n)throw k.ValueError.create("max() argument is an empty sequence!");return t}(n||i.value>t)&&(t=i.value),n=!1}},k._sum=function(e,t){void 0===t&&(t=0);for(var r=k._iter(e);;){var n=r.next();if(n.done)break;t+=n.value}return t},k._first=function(e,t){void 0===t&&(t=null);var r=k._iter(e).next();return r.done?t:r.value},k._last=function(e,t){void 0===t&&(t=null);for(var r=t,n=k._iter(e);;){var i=n.next();if(i.done)break;r=i.value}return r},k._sorted=function(e,t,r,n){var i;if(null===r)return i=n?function(e,t){return-k._cmp("<=>",e,t)}:function(e,t){return k._cmp("<=>",e,t)},(_=k._list(t)).sort(i),_;for(var o=[],s=0,a=k._iter(t);;++s){var u=a.next();if(u.done)break;var l=k._call(e,r,[u.value],{});o.push([l,s,u.value])}i=function(e,t){var r=k._cmp("<=>",e[0],t[0]);return r||(r=k._cmp(e[1],t[1])),n?-r:r},o.sort(i);var _=[];for(s=0;s<o.length;++s)_.push(o[s][2]);return _},k._range=function(e){var t,r,n,i;if(e.length<1)throw k.ArgumentError.create("required range() argument missing");if(3<e.length)throw k.ArgumentError.create("range() expects at most 3 positional arguments, "+e.length+" given");if(1==e.length?(r=e[t=0],n=1):2==e.length?(t=e[0],r=e[1],n=1):3==e.length&&(t=e[0],r=e[1],n=e[2]),0===n)throw k.ValueError.create("range() requires a step argument != 0");heigher=0<n?(i=t,r):(i=r,t);var o=i<heigher?Math.floor((heigher-i-1)/Math.abs(n))+1:0;return{index:0,next:function(){return this.index>=o?{done:!0}:{value:t+this.index++*n,done:!1}}}},k._slice=function(e){var t,r,n,i;if(e.length<2)throw k.ArgumentError.create("required slice() argument missing");if(4<e.length)throw k.ArgumentError.create("slice() expects at most 4 positional arguments, "+e.length+" given");if(2==e.length?(t=e[0],r=0,n=e[1],i=1):3==e.length?(t=e[0],r=null!==e[1]?e[1]:0,n=e[2],i=1):4==e.length&&(t=e[0],r=null!==e[1]?e[1]:0,n=e[2],i=null!==e[3]?e[3]:1),r<0)throw k.ValueError.create("slice() requires a start argument >= 0");if(n<0)throw k.ValueError.create("slice() requires a stop argument >= 0");if(i<=0)throw k.ValueError.create("slice() requires a step argument > 0");var o=r,s=0,a=k._iter(t);return{next:function(){for(var e;s<o;){if((e=a.next()).done)return e;++s}return null!==n&&n<=s?{done:!0}:((e=a.next()).done||(++s,o+=i,null!==n&&n<o&&(o=n)),e)}}},k._urlquote=function(e){return encodeURIComponent(e)},k._urlunquote=function(e){return decodeURIComponent(e)},k._reversed=function(e){return"string"==typeof e||k._islist(e)||(e=k._list(e)),{index:e.length-1,next:function(){return 0<=this.index?{value:e[this.index--],done:!1}:{done:!0}}}},k._random=function(){return Math.random()},k._randrange=function(e){var t,r,n;if(e.length<1)throw k.ArgumentError.create("required randrange() argument missing");if(3<e.length)throw k.ArgumentError.create("randrange() expects at most 3 positional arguments, "+e.length+" given");1==e.length?(r=e[t=0],n=1):2==e.length?(t=e[0],r=e[1],n=1):3==e.length&&(t=e[0],r=e[1],n=e[2]);var i,o=r-t,s=Math.random();if(0<n)i=Math.floor((o+n-1)/n);else{if(!(n<0))throw k.ValueError.create("randrange() requires a step argument != 0");i=Math.floor((o+n+1)/n)}return t+n*Math.floor(s*i)},k._randchoice=function(e){var t=k._iscolor(e);if("string"!=typeof e&&!k._islist(e)&&!t)throw k.TypeError.create("randchoice() requires a string or list");return t&&(e=k._list(e)),e[Math.floor(Math.random()*e.length)]},k._round=function(e,t){if(void 0===t&&(t=0),t){var r=Math.pow(10,t);return Math.round(e*r)/r}return Math.round(e)},k._md5=function(e){return md5(e)},k._enumerate=function(e,t){return void 0===t&&(t=0),{iter:k._iter(e),index:t,next:function(){var e=this.iter.next();return e.done?e:{value:[this.index++,e.value],done:!1}}}},k._isfirst=function(e){var r=k._iter(e),n=!0;return{next:function(){var e=r.next(),t=e.done?e:{value:[n,e.value],done:!1};return n=!1,t}}},k._islast=function(e){var r=k._iter(e),n=r.next();return{next:function(){if(n.done)return n;var e=r.next(),t={value:[e.done,n.value],done:!1};return n=e,t}}},k._isfirstlast=function(e){var r=k._iter(e),n=!0,i=r.next();return{next:function(){if(i.done)return i;var e=r.next(),t={value:[n,e.done,i.value],done:!1};return i=e,n=!1,t}}},k._enumfl=function(e,t){var r=k._iter(e),n=t,i=!0,o=r.next();return{next:function(){if(o.done)return o;var e=r.next(),t={value:[n++,i,e.done,o.value],done:!1};return o=e,i=!1,t}}},k._zip=function(e){if(e.length){for(var n=[],t=0;t<e.length;++t)n.push(k._iter(e[t]));return{next:function(){for(var e=[],t=0;t<n.length;++t){var r=n[t].next();if(r.done)return r;e.push(r.value)}return{value:e,done:!1}}}}return{next:function(){return{done:!0}}}},k._abs=function(e){return null!==e&&"function"==typeof e.__abs__?e.__abs__():Math.abs(e)},k._date=function(e,t,r,n,i,o,s){return void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),new Date(e,t-1,r,n,i,o,s/1e3)},k._timedelta=function(e,t,r){return this.TimeDelta.create(e,t,r)},k._monthdelta=function(e){return this.MonthDelta.create(e)},k._hls=function(e,t,r,n){var i,o,s=function(e,t,r){return(r%=1)<1/6?e+(t-e)*r*6:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e};return void 0===n&&(n=1),0===r?k._rgb(t,t,t,n):(i=2*t-(o=t<=.5?t*(1+r):t+r-t*r),k._rgb(s(i,o,e+1/3),s(i,o,e),s(i,o,e-1/3),n))},k._hsv=function(e,t,r,n){if(0===t)return k._rgb(r,r,r,n);var i=Math.floor(6*e),o=6*e-i,s=r*(1-t),a=r*(1-t*o),u=r*(1-t*(1-o));switch(i%6){case 0:return k._rgb(r,u,s,n);case 1:return k._rgb(a,r,s,n);case 2:return k._rgb(s,r,u,n);case 3:return k._rgb(s,a,r,n);case 4:return k._rgb(u,s,r,n);case 5:return k._rgb(r,s,a,n)}},k._get=function(e,t,r){if(k._ismap(e))return e.has(t)?e.get(t):r;if(k._isobject(e)){var n=e[t];return void 0===n?r:n}throw k.TypeError.create("get()","get() requires a dict")},k.now=function(){return new Date},k.utcnow=function(){var e=new Date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},k.functions={repr:k.expose(["obj"],{name:"repr"},k._repr),ascii:k.expose(["obj"],{name:"ascii"},k._ascii),str:k.expose(["obj=",""],{name:"str"},k._str),int:k.expose(["obj=",0,"base=",null],{name:"int"},k._int),float:k.expose(["obj=",0],{name:"float"},k._float),list:k.expose(["iterable=",[]],{name:"list"},k._list),set:k.expose(["iterable=",[]],{name:"set"},k._set),bool:k.expose(["obj=",!1],{name:"bool"},k._bool),len:k.expose(["sequence"],{name:"len"},k._len),type:k.expose(["obj"],{name:"type"},k._type),format:k.expose(["obj","fmt","lang=",null],{name:"format"},k._format),any:k.expose(["iterable"],{name:"any"},k._any),all:k.expose(["iterable"],{name:"all"},k._all),zip:k.expose(["*iterables"],{name:"zip"},k._zip),isundefined:k.expose(["obj"],{name:"isundefined"},k._isundefined),isdefined:k.expose(["obj"],{name:"isdefined"},k._isdefined),isnone:k.expose(["obj"],{name:"isnone"},k._isnone),isbool:k.expose(["obj"],{name:"isbool"},k._isbool),isint:k.expose(["obj"],{name:"isint"},k._isint),isfloat:k.expose(["obj"],{name:"isfloat"},k._isfloat),isstr:k.expose(["obj"],{name:"isstr"},k._isstr),isdate:k.expose(["obj"],{name:"isdate"},k._isdate),iscolor:k.expose(["obj"],{name:"iscolor"},k._iscolor),istimedelta:k.expose(["obj"],{name:"istimedelta"},k._istimedelta),ismonthdelta:k.expose(["obj"],{name:"ismonthdelta"},k._ismonthdelta),istemplate:k.expose(["obj"],{name:"istemplate"},k._istemplate),isfunction:k.expose(["obj"],{name:"isfunction"},k._isfunction),islist:k.expose(["obj"],{name:"islist"},k._islist),isset:k.expose(["obj"],{name:"isset"},w._haveset?k._isset:k._isul4set),isdict:k.expose(["obj"],{name:"isdict"},k._isdict),isexception:k.expose(["obj"],{name:"isexception"},k._isexception),asjson:k.expose(["obj"],{name:"asjson"},k._asjson),fromjson:k.expose(["string"],{name:"fromjson"},k._fromjson),asul4on:k.expose(["obj"],{name:"asul4on"},k._asul4on),fromul4on:k.expose(["string"],{name:"fromul4on"},k._fromul4on),now:k.expose([],k.now),utcnow:k.expose([],k.utcnow),enumerate:k.expose(["iterable","start=",0],{name:"enumerate"},k._enumerate),isfirst:k.expose(["iterable"],{name:"isfirst"},k._isfirst),islast:k.expose(["iterable"],{name:"islast"},k._islast),isfirstlast:k.expose(["iterable"],{name:"isfirstlast"},k._isfirstlast),enumfl:k.expose(["iterable","start=",0],{name:"enumfl"},k._enumfl),abs:k.expose(["number"],{name:"abs"},k._abs),date:k.expose(["year","month","day","hour=",0,"minute=",0,"second=",0,"microsecond=",0],{name:"date"},k._date),timedelta:k.expose(["days=",0,"seconds=",0,"microseconds=",0],{name:"timedelta"},k._timedelta),monthdelta:k.expose(["months=",0],{name:"monthdelta"},k._monthdelta),rgb:k.expose(["r","g","b","a=",1],{name:"rgb"},k._rgb),hls:k.expose(["h","l","s","a=",1],{name:"hls"},k._hls),hsv:k.expose(["h","s","v","a=",1],{name:"hsv"},k._hsv),xmlescape:k.expose(["obj"],{name:"xmlescape"},k._xmlescape),csv:k.expose(["obj"],{name:"csv"},k._csv),chr:k.expose(["i"],{name:"chr"},k._chr),ord:k.expose(["c"],{name:"ord"},k._ord),hex:k.expose(["number"],{name:"hex"},k._hex),oct:k.expose(["number"],{name:"oct"},k._oct),bin:k.expose(["number"],{name:"bin"},k._bin),min:k.expose(["*obj"],{name:"min"},k._min),max:k.expose(["*obj"],{name:"max"},k._max),sum:k.expose(["iterable","start=",0],{name:"sum"},k._sum),first:k.expose(["iterable","default=",null],{name:"first"},k._first),last:k.expose(["iterable","default=",null],{name:"last"},k._last),sorted:k.expose(["iterable","key=",null,"reverse=",!1],{name:"sorted",needscontext:!0},k._sorted),range:k.expose(["*args"],{name:"range"},k._range),slice:k.expose(["*args"],{name:"slice"},k._slice),urlquote:k.expose(["string"],{name:"urlquote"},k._urlquote),urlunquote:k.expose(["string"],{name:"urlunquote"},k._urlunquote),reversed:k.expose(["sequence"],{name:"reversed"},k._reversed),random:k.expose([],{name:"random"},k._random),randrange:k.expose(["*args"],{name:"randrange"},k._randrange),randchoice:k.expose(["sequence"],{name:"randchoice"},k._randchoice),round:k.expose(["x","digit=",0],{name:"round"},k._round),md5:k.expose(["string"],{name:"md5"},k._md5)},k._replace=function(e,t,r,n){null===n&&(n=e.length);for(var i=[];e.length;){var o=e.indexOf(t);if(-1===o||!n--){i.push(e);break}i.push(e.substr(0,o)),i.push(r),e=e.substr(o+t.length)}return i.join("")},k._strip=function(e,t){if(null===t)t=" \r\n\t";else if("string"!=typeof t)throw k.TypeError.create("strip()","strip() requires two strings");for(;e&&0<=t.indexOf(e[0]);)e=e.substr(1);for(;e&&0<=t.indexOf(e[e.length-1]);)e=e.substr(0,e.length-1);return e},k._lstrip=function(e,t){if(null===t)t=" \r\n\t";else if("string"!=typeof t)throw k.TypeError.create("lstrip()","lstrip() requires two strings");for(;e&&0<=t.indexOf(e[0]);)e=e.substr(1);return e},k._rstrip=function(e,t){if(null===t)t=" \r\n\t";else if("string"!=typeof t)throw k.TypeError.create("rstrip()","rstrip() requires two strings");for(;e&&0<=t.indexOf(e[e.length-1]);)e=e.substr(0,e.length-1);return e},k._split=function(e,t,r){if(null!==t&&"string"!=typeof t)throw k.TypeError.create("split()","split() requires a string");if(null===r){var n=e.split(null!==t?t:/[ \n\r\t]+/);return null===t&&(n.length&&!n[0].length&&n.splice(0,1),n.length&&!n[n.length-1].length&&n.splice(-1)),n}if(null!==t){for(n=[];e.length;){var i=e.indexOf(t);if(-1===i||!r--){n.push(e);break}n.push(e.substr(0,i)),e=e.substr(i+t.length)}return n}for(n=[];e.length;){var o;e=k._lstrip(e,null),(o=r--?e.split(/[ \n\r\t]+/,1)[0]:e).length&&n.push(o),e=e.substr(o.length)}return n},k._rsplit=function(e,t,r){if(null!==t&&"string"!=typeof t)throw k.TypeError.create("rsplit()","rsplit() requires a string as second argument");if(null===r){var n=e.split(null!==t?t:/[ \n\r\t]+/);return null===t&&(n.length&&!n[0].length&&n.splice(0,1),n.length&&!n[n.length-1].length&&n.splice(-1)),n}if(null!==t){for(n=[];e.length;){var i=e.lastIndexOf(t);if(-1===i||!r--){n.unshift(e);break}n.unshift(e.substr(i+t.length)),e=e.substr(0,i)}return n}for(n=[];e.length;){var o;e=k._rstrip(e,null,null),(o=r--?(o=e.split(/[ \n\r\t]+/))[o.length-1]:e).length&&n.unshift(o),e=e.substr(0,e.length-o.length)}return n},k._splitlines=function(e,t){for(var r,n=[],i=e.length,o=0,s=0;;){if(i<=o)return s!=o&&n.push(e.substring(s)),n;var a=(void 0,"\n"===(r=e[o])||"\v"==r||"\f"==r||""==r||""==r||""==r||""==r||"\u2028"==r||"\u2029"==r?1:"\r"===r?o==i-1?1:"\n"===e[o+1]?2:1:0);if(a){var u=o+(t?a:0);n.push(e.substring(s,u)),s=o+=a}else++o}},k._count=function(e,t,r,n){if(r<0&&(r+=e.length),null===r&&(r=0),n<0&&(n+=e.length),null===n&&(n=e.length),k._isstr(e)&&!t.length){if(n<0||r>e.length||n<r)return 0;var i=n-r+1;return i>e.length+1&&(i=e.length+1),i}r=k._bound(r,e.length),n=k._bound(n,e.length);var o=0;if(k._islist(e)){for(var s=r;s<n;++s)k._eq(e[s],t)&&++o;return o}for(var a=r;-1!=(a=e.indexOf(t,a))&&!(a+t.length>n);)++o,a+=t.length;return o},k._find=function(e,t,r,n){r<0&&(r+=e.length),null===r&&(r=0),n<0&&(n+=e.length),null===n&&(n=e.length),r=k._bound(r,e.length),n=k._bound(n,e.length),0===r&&n===e.length||(e="string"==typeof e?e.substring(r,n):e.slice(r,n));var i=e.indexOf(t);return-1!==i&&(i+=r),i},k._rfind=function(e,t,r,n){r<0&&(r+=e.length),null===r&&(r=0),n<0&&(n+=e.length),null===n&&(n=e.length),r=k._bound(r,e.length),n=k._bound(n,e.length),0===r&&n===e.length||(e="string"==typeof e?e.substring(r,n):e.slice(r,n));var i=e.lastIndexOf(t);return-1!==i&&(i+=r),i},k._capitalize=function(e){if("string"!=typeof e)throw k.TypeError.create("capitalize()","capitalize() requires a string");return e.length&&(e=e[0].toUpperCase()+e.slice(1).toLowerCase()),e},k._items=function(e){if(k._ismap(e)){var r=[];return e.forEach(function(e,t){r.push([t,e])}),r}if(k._isobject(e)){r=[];for(var t in e)r.push([t,e[t]]);return r}throw k.TypeError.create("items()","items() requires a dict")},k._values=function(e){if(k._ismap(e)){var r=[];return e.forEach(function(e,t){r.push(e)}),r}if(k._isobject(e)){r=[];for(var t in e)r.push(e[t]);return r}throw k.TypeError.create("values()","values() requires a dict")},k._join=function(e,t){for(var r=[],n=k._iter(t);;){var i=n.next();if(i.done)break;r.push(i.value)}return r.join(e)},k._startswith=function(e,t){if("string"!=typeof t)throw k.TypeError.create("startswith()","startswith() argument must be string");return e.substr(0,t.length)===t},k._endswith=function(e,t){if("string"!=typeof t)throw k.TypeError.create("endswith()","endswith() argument must be string");return e.substr(e.length-t.length)===t},k._isoformat=function(e){if(!k._isdate(e))throw k.TypeError.create("isoformat()","isoformat() requires a date");var t=e.getFullYear()+"-"+k._lpad((e.getMonth()+1).toString(),"0",2)+"-"+k._lpad(e.getDate().toString(),"0",2),r=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),o=e.getMilliseconds();return(r||n||i||o)&&(t+="T"+k._lpad(r.toString(),"0",2)+":"+k._lpad(n.toString(),"0",2)+":"+k._lpad(i.toString(),"0",2),o&&(t+="."+k._lpad(o.toString(),"0",3)+"000")),t},k._mimeformat=function(e){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][k._weekday(e)]+", "+k._lpad(e.getDate(),"0",2)+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()+" "+k._lpad(e.getHours(),"0",2)+":"+k._lpad(e.getMinutes(),"0",2)+":"+k._lpad(e.getSeconds(),"0",2)+" GMT"},k._weekday=function(e){var t=e.getDay();return t?t-1:6},k._week=function(e,t){null===t?t=0:t%=7;var r=k._yearday(e)+6,n=new Date(e.getFullYear(),0,1).getDay();for(--n<0&&(n=6);n!=t;)--r,7==++n&&(n=0);return Math.floor(r/7)},k._isleap=function(e){return 1===new Date(e.getFullYear(),1,29).getMonth()},k._yearday=function(e){var t=k._isleap(e)?1:0,r=e.getDate();switch(e.getMonth()){case 0:return r;case 1:return 31+r;case 2:return 59+t+r;case 3:return 59+t+31+r;case 4:return 59+t+31+30+r;case 5:return 59+t+31+30+31+r;case 6:return 59+t+31+30+31+30+r;case 7:return 59+t+31+30+31+30+31+r;case 8:return 59+t+31+30+31+30+31+31+r;case 9:return 59+t+31+30+31+30+31+31+30+r;case 10:return 59+t+31+30+31+30+31+31+30+31+r;case 11:return 59+t+31+30+31+30+31+31+30+31+30+r}},k._append=function(e,t){for(var r=0;r<t.length;++r)e.push(t[r]);return null},k._insert=function(e,t,r){t<0&&(t+=e.length);for(var n=0;n<r.length;++n)e.splice(t++,0,r[n]);return null},k._pop=function(e,t){t<0&&(t+=e.length);var r=e[t];return e.splice(t,1),r},k._update=function(r,e,t){if(!k._isdict(r))throw k.TypeError.create("update()","update() requires a dict");for(var n=0;n<e.length;++n){var i=e[n];if(k._ismap(i))i.forEach(function(e,t){w._setmap(r,t,e)});else if(k._isobject(i))for(var o in i)w._setmap(r,o,i[o]);else{if(!k._islist(i))throw k.TypeError.create("update()","update() requires a dict or a list of (key, value) pairs");for(var s=0;s<i.length;++s){if(!k._islist(i[s])||2!=i[s].length)throw k.TypeError.create("update()","update() requires a dict or a list of (key, value) pairs");w._setmap(r,i[s][0],i[s][1])}}}for(var o in t)w._setmap(r,o,t[o]);return null},k._clear=function(e){if(k._ismap(e))e.clear();else if(k._isset(e))e.clear();else{if(!k._isobject(e))throw k.TypeError.create("clear()","clear() requires a dict or set");for(var t in e)delete e[t]}return null},k.Color=k._inherit(k.Proto,{__type__:"ul4.Color",create:function(e,t,r,n){var i=k._clone(this);return i._r=void 0!==e?e:0,i._g=void 0!==t?t:0,i._b=void 0!==r?r:0,i._a=void 0!==n?n:255,i},__repr__:function(){var e=k._lpad(this._r.toString(16),"0",2),t=k._lpad(this._g.toString(16),"0",2),r=k._lpad(this._b.toString(16),"0",2),n=k._lpad(this._a.toString(16),"0",2);return 255!==this._a?e[0]===e[1]&&t[0]===t[1]&&r[0]===r[1]&&n[0]===n[1]?"#"+e[0]+t[0]+r[0]+n[0]:"#"+e+t+r+n:e[0]===e[1]&&t[0]===t[1]&&r[0]===r[1]?"#"+e[0]+t[0]+r[0]:"#"+e+t+r},__str__:function(){if(255!==this._a)return"rgba("+this._r+", "+this._g+", "+this._b+", "+this._a/255+")";var e=k._lpad(this._r.toString(16),"0",2),t=k._lpad(this._g.toString(16),"0",2),r=k._lpad(this._b.toString(16),"0",2);k._lpad(this._a.toString(16),"0",2);return e[0]===e[1]&&t[0]===t[1]&&r[0]===r[1]?"#"+e[0]+t[0]+r[0]:"#"+e+t+r},__iter__:function(){return{obj:this,index:0,next:function(){return 0==this.index?(++this.index,{value:this.obj._r,done:!1}):1==this.index?(++this.index,{value:this.obj._g,done:!1}):2==this.index?(++this.index,{value:this.obj._b,done:!1}):3==this.index?(++this.index,{value:this.obj._a,done:!1}):{done:!0}}}},__getattr__:function(e){var t=this;switch(e){case"r":return k.expose([],function(){return t._r});case"g":return k.expose([],function(){return t._g});case"b":return k.expose([],function(){return t._b});case"a":return k.expose([],function(){return t._a});case"lum":return k.expose([],function(){return t.lum()});case"hls":return k.expose([],function(){return t.hls()});case"hlsa":return k.expose([],function(){return t.hlsa()});case"hsv":return k.expose([],function(){return t.hsv()});case"hsva":return k.expose([],function(){return t.hsva()});case"witha":return k.expose(["a"],function(e){return t.witha(e)});case"withlum":return k.expose(["lum"],function(e){return t.withlum(e)});case"abslum":return k.expose(["lum"],function(e){return t.abslum(e)});case"rellum":return k.expose(["lum"],function(e){return t.rellum(e)});default:return}},__getitem__:function(e){switch(e<0&&(e+=4),e){case 0:return this._r;case 1:return this._g;case 2:return this._b;case 3:return this._a;default:return}},__eq__:function(e){return!!k._iscolor(e)&&(this._r==e._r&&this._g==e._g&&this._b==e._b&&this._a==e._a)},r:k.expose([],function(){return this._r}),g:k.expose([],function(){return this._g}),b:k.expose([],function(){return this._b}),a:k.expose([],function(){return this._a}),lum:k.expose([],function(){return this.hls()[1]}),hls:k.expose([],function(){var e,t,r,n,i=this._r/255,o=this._g/255,s=this._b/255,a=Math.max(i,o,s),u=Math.min(i,o,s);return e=(u+a)/2,u==a?[0,e,0]:(t=(a-i)/(a-u),r=(a-o)/(a-u),n=(a-s)/(a-u),[(i==a?n-r:o==a?2+t-n:4+r-t)/6%1,e,e<=.5?(a-u)/(a+u):(a-u)/(2-a-u)])}),hlsa:k.expose([],function(){return this.hls().concat(this._a/255)}),hsv:k.expose([],function(){var e=this._r/255,t=this._g/255,r=this._b/255,n=Math.max(e,t,r),i=Math.min(e,t,r);if(i==n)return[0,0,n];var o=(n-e)/(n-i),s=(n-t)/(n-i),a=(n-r)/(n-i);return[(e==n?a-s:t==n?2+o-a:4+s-o)/6%1,(n-i)/n,n]}),hsva:k.expose([],function(){return this.hsv().concat(this._a/255)}),witha:k.expose(["a"],function(e){if("number"!=typeof e)throw k.TypeError.create("witha()","witha() requires a number");return k.Color.create(this._r,this._g,this._b,e)}),withlum:k.expose(["lum"],function(e){if("number"!=typeof e)throw k.TypeError.create("witha()","witha() requires a number");var t=this.hlsa();return k._hls(t[0],e,t[2],t[3])})}),k.TimeDelta=k._inherit(k.Proto,{__type__:"ul4.TimeDelta",create:function(e,t,r){var n=k._clone(this);void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0);var i=Math.floor(1e6*(86400*e+t)+r);r=k.ModAST._do(i,1e6);var o=Math.floor(i/1e6);return t=k.ModAST._do(o,86400),e=Math.floor(o/86400),t<0&&(t+=86400,--e),n._microseconds=r,n._seconds=t,n._days=e,n},__repr__:function(){return this._microseconds?"timedelta("+this._days+", "+this._seconds+", "+this._microseconds+")":this._seconds?"timedelta("+this._days+", "+this._seconds+")":this._days?"timedelta("+this._days+")":"timedelta()"},__str__:function(){var e=[];this._days&&(e.push(this._days+" day"),-1!==this._days&&1!==this._days&&e.push("s"),e.push(", "));var t=this._seconds%60,r=Math.floor(this._seconds/60),n=Math.floor(r/60);return r%=60,e.push(""+n),e.push(":"),e.push(k._lpad(r.toString(),"0",2)),e.push(":"),e.push(k._lpad(t.toString(),"0",2)),this._microseconds&&(e.push("."),e.push(k._lpad(this._microseconds.toString(),"0",6))),e.join("")},__bool__:function(){return 0!==this._days||0!==this._seconds||0!==this._microseconds},__abs__:function(){return this._days<0?k.TimeDelta.create(-this._days,-this._seconds,-this._microseconds):this},__eq__:function(e){return!!k._istimedelta(e)&&(this._days===e._days&&this._seconds===e._seconds&&this._microseconds===e._microseconds)},__lt__:function(e){if(k._istimedelta(e))return this._days!=e._days?this._days<e._days:this._seconds!=e._seconds?this._seconds<e._seconds:this._microseconds<e._microseconds;k._unorderable("<",this,e)},__le__:function(e){if(k._istimedelta(e))return this._days!=e._days?this._days<e._days:this._seconds!=e._seconds?this._seconds<e._seconds:this._microseconds<=e._microseconds;k._unorderable("<=",this,e)},__gt__:function(e){if(k._istimedelta(e))return this._days!=e._days?this._days>e._days:this._seconds!=e._seconds?this._seconds>e._seconds:this._microseconds>e._microseconds;k._unorderable(">",this,e)},__ge__:function(e){if(k._istimedelta(e))return this._days!=e._days?this._days>e._days:this._seconds!=e._seconds?this._seconds>e._seconds:this._microseconds>=e._microseconds;k._unorderable(">=",this,e)},__neg__:function(){return k.TimeDelta.create(-this._days,-this._seconds,-this._microseconds)},_add:function(e,t,r,n){var i=e.getFullYear(),o=e.getMonth(),s=e.getDate()+t,a=e.getHours(),u=e.getMinutes(),l=e.getSeconds()+r,_=e.getMilliseconds()+n/1e3;return new Date(i,o,s,a,u,l,_)},__add__:function(e){if(k._istimedelta(e))return k.TimeDelta.create(this._days+e._days,this._seconds+e._seconds,this._microseconds+e._microseconds);if(k._isdate(e))return this._add(e,this._days,this._seconds,this._microseconds);throw k.TypeError.create("+",k._type(this)+" + "+k._type(e)+" not supported")},__radd__:function(e){if(k._isdate(e))return this._add(e,this._days,this._seconds,this._microseconds);throw k.TypeError.create("+",k._type(this)+" + "+k._type(e)+" not supported")},__sub__:function(e){if(k._istimedelta(e))return k.TimeDelta.create(this._days-e._days,this._seconds-e._seconds,this._microseconds-e._microseconds);throw k.TypeError.create("-",k._type(this)+" - "+k._type(e)+" not supported")},__rsub__:function(e){if(k._isdate(e))return this._add(e,-this._days,-this._seconds,-this._microseconds);throw k.TypeError.create("-",k._type(this)+" - "+k._type(e)+" not supported")},__mul__:function(e){if("number"==typeof e)return k.TimeDelta.create(this._days*e,this._seconds*e,this._microseconds*e);throw k.TypeError.create("*",k._type(this)+" * "+k._type(e)+" not supported")},__rmul__:function(e){if("number"==typeof e)return k.TimeDelta.create(this._days*e,this._seconds*e,this._microseconds*e);throw k.TypeError.create("*",k._type(this)+" * "+k._type(e)+" not supported")},__truediv__:function(e){if("number"==typeof e)return k.TimeDelta.create(this._days/e,this._seconds/e,this._microseconds/e);if(k._istimedelta(e)){var t=this._days,r=e._days,n=this._seconds||e._seconds,i=this._microseconds||e._microseconds;return(n||i)&&(t=86400*t+this._seconds,r=86400*r+e._seconds,i&&(t=1e6*t+this._microseconds,r=1e6*r+e._microseconds)),t/r}throw k.TypeError.create("/",k._type(this)+" / "+k._type(e)+" not supported")},__getattr__:function(e){var t=this;switch(e){case"days":return k.expose([],function(){return t._days});case"seconds":return k.expose([],function(){return t._seconds});case"microseconds":return k.expose([],function(){return t._microseconds});default:return}},days:function(){return this._days},seconds:function(){return this._seconds},microseconds:function(){return this._microseconds}}),k.MonthDelta=k._inherit(k.Proto,{__type__:"ul4.MonthDelta",create:function(e){var t=k._clone(this);return t._months=void 0!==e?e:0,t},__repr__:function(){return this._months?"monthdelta("+this._months+")":"monthdelta()"},__str__:function(){return this._months?-1!==this._months&&1!==this._months?this._months+" months":this._months+" month":"0 months"},__bool__:function(){return 0!==this._months},__abs__:function(){return this._months<0?k.MonthDelta.create(-this._months):this},__eq__:function(e){return!!k._ismonthdelta(e)&&this._months===e._months},__lt__:function(e){if(k._ismonthdelta(e))return this._months<e._months;k._unorderable("<",this,e)},__le__:function(e){if(k._ismonthdelta(e))return this._months<=e._months;k._unorderable("<=",this,e)},__gt__:function(e){if(k._ismonthdelta(e))return this._months>e._months;k._unorderable(">",this,e)},__ge__:function(e){if(k._ismonthdelta(e))return this._months>=e._months;k._unorderable(">=",this,e)},__neg__:function(){return k.MonthDelta.create(-this._months)},_add:function(e,t){for(var r=e.getFullYear(),n=e.getMonth()+t,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds();;){var l=new Date(r,n,1,o,s,a,u).getMonth(),_=new Date(r,n,i,o,s,a,u);if(_.getMonth()===l)return _;--i}},__add__:function(e){if(k._ismonthdelta(e))return k.MonthDelta.create(this._months+e._months);if(k._isdate(e))return this._add(e,this._months);throw k._type(this)+" + "+k._type(e)+" not supported"},__radd__:function(e){if(k._isdate(e))return this._add(e,this._months);throw k._type(this)+" + "+k._type(e)+" not supported"},__sub__:function(e){if(k._ismonthdelta(e))return k.MonthDelta.create(this._months-e._months);throw k._type(this)+" - "+k._type(e)+" not supported"},__rsub__:function(e){if(k._isdate(e))return this._add(e,-this._months);throw k._type(this)+" - "+k._type(e)+" not supported"},__mul__:function(e){if("number"==typeof e)return k.MonthDelta.create(this._months*Math.floor(e));throw k._type(this)+" * "+k._type(e)+" not supported"},__rmul__:function(e){if("number"==typeof e)return k.MonthDelta.create(this._months*Math.floor(e));throw k._type(this)+" * "+k._type(e)+" not supported"},__floordiv__:function(e){if("number"==typeof e)return k.MonthDelta.create(Math.floor(this._months/e));if(k._ismonthdelta(e))return Math.floor(this._months/e._months);throw k._type(this)+" // "+k._type(e)+" not supported"},__truediv__:function(e){if(k._ismonthdelta(e))return this._months/e._months;throw k._type(this)+" / "+k._type(e)+" not supported"},__getattr__:function(e){var t=this;switch(e){case"months":return k.expose([],function(){return t._months});default:return}},months:function(){return this._months}}),k._Set=k._inherit(k.Proto,{__type__:"ul4._Set",create:function(){var e=k._clone(this);return e.items={},e.add.apply(e,arguments),e},add:function(){for(var e=0;e<arguments.length;++e)this.items[arguments[e]]=!0},__getattr__:function(e){var t=this;switch(e){case"add":return k.expose(["*items"],function(e){t.add.apply(t,e)});default:return}},__contains__:function(e){return this.items[e]||!1},__bool__:function(){for(var e in this.items)if(this.items.hasOwnProperty(e))return!0;return!1},__repr__:function(){var e=[];e.push("{");var t=0;for(var r in this.items)this.items.hasOwnProperty(r)&&(t++&&e.push(", "),e.push(k._repr(r)));return t||e.push("/"),e.push("}"),e.join("")},__eq__:function(e){if(k._isset(e)){var t=0;for(var r in this.items){if(!e.has(r))return!1;++t}return e.size==t}if(k._isul4set(e)){t=0;for(var r in this.items){if(!e[r])return!1;++t}for(var r in e.items)--t;return 0==t}return!1},__le__:function(e){if(k._isset(e)){for(var t in this.items)if(!e.has(t))return!1;return!0}if(k._isul4set(e)){for(var t in this.items)if(!e.items[t])return!1;return!0}k._unorderable("<",this,e)},__ge__:function(e){if(k._isset(e)){var t=!0;return e.forEach(function(e){this.items[e]||(t=!1)}),t}if(k._isul4set(e)){for(var r in e.items)if(!this.items[r])return!1;return!0}k._unorderable("<=",this,e)}});for(var j=["TextAST","IndentAST","LineEndAST","Tag","ConstAST","SeqItemAST","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","PosArgAST","KeywordArgAST","UnpackListArgAST","UnpackDictArgAST","ListAST","ListCompAST","DictAST","DictCompAST","SetAST","SetCompAST","GenExprAST","VarAST","NotAST","NegAST","BitNotAST","IfAST","ReturnAST","PrintAST","PrintXAST","ItemAST","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","NotContainsAST","ContainsAST","AddAST","SubAST","MulAST","FloorDivAST","TrueDivAST","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","SliceAST","AttrAST","CallAST","RenderAST","SetVarAST","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","WhileBlockAST","BreakAST","ContinueAST","CondBlockAST","IfBlockAST","ElIfBlockAST","ElseBlockAST","SignatureAST","Template"],C=0;C<j.length;++C){var E=j[C],M=E;"AST"===M.substr(M.length-3)&&(M=M.substr(0,M.length-3)),M=M.toLowerCase();var B=k[E];B.typename=E,B.type=M,w.register("de.livinglogic.ul4."+M,B)}var L={};L.Base=k._inherit(k.Proto,{create:function(){return k._clone(this)},ul4ondump:function(e){for(var t=0;t<this._ul4onattrs.length;++t)e.dump(this._dumpUL4ONAttr(this._ul4onattrs[t]))},_dumpUL4ONAttr:function(e){return this[e]},ul4onload:function(e){for(var t=0,r=e.loadcontent();;++t){var n=r.next();if(n.done)break;t<this._ul4onattrs.length&&this._loadUL4ONAttr(this._ul4onattrs[t],n.value)}for(;t<this._ul4onattrs.length;++t)this._setDefaultUL4ONAttr(this._ul4onattrs[t])},_loadUL4ONAttr:function(e,t){this[e]=t},_setDefaultUL4ONAttr:function(e){this[e]=null}}),L.Globals=k._inherit(L.Base,{_ul4onattrs:["version","platform","user","maxdbactions","maxtemplateruntime","flashmessages"],__repr__:function(){return"<la.Globals version="+k._repr(this.version)+">"},geodist:function(e,t){var r=function(e){return(e=Math.sin(e))*e},n=function(e){return(e=Math.cos(e))*e},i=Math.PI/180,o=1/298.257223563,s=e.lat*i,a=e.long*i,u=t.lat*i,l=(s+u)/2,_=(s-u)/2,c=(a-t.long*i)/2,h=r(_)*n(c)+n(l)*r(c),f=n(_)*n(c)+r(l)*r(c),p=Math.atan(Math.sqrt(h/f)),d=2*p*6378.137,m=Math.sqrt(h*f)/p,g=(3*m+1)/(2*h);return d*(1+o*((3*m-1)/(2*f))*r(l)*n(_)-o*g*n(l)*r(_))}}),L.FlashMessage=k._inherit(L.Base,{_ul4onattrs:["timestamp","type","title","message"],__repr__:function(){return"<la.FlashMessage type="+k._repr(this.type)+" title="+k._repr(this.title)+">"}}),L.App=k._inherit(L.Base,{_ul4onattrs:["id","globals","name","description","language","startlink","iconlarge","iconsmall","owner","controls","records","recordcount","installation","categories","params","views","datamanagement_identifier"],insert:function(e){return this.globals.Login._insert(this,e)},__repr__:function(){return"<la.App id="+k._repr(this.id)+" name="+k._repr(this.name)+">"}}),L.View=k._inherit(L.Base,{_ul4onattrs:["id","name","app","order","width","height","start","end"],__repr__:function(){return"<la.View id="+k._repr(this.id)+" name="+k._repr(this.name)+">"}}),L.DataSource=k._inherit(L.Base,{_ul4onattrs:["id","identifier","app","apps"],__repr__:function(){return"<la.DataSource id="+k._repr(this.id)+" identifier="+k._repr(this.identifier)+">"}}),L.Record=k._inherit(L.Base,{_ul4onattrs:["id","app","createdat","createdby","updatedat","updatedby","updatecount","values","attachments","children"],delete:function(){return this.app.globals.Login._delete(this)},update:function(e){return this.app.globals.Login._update(this,e)},__repr__:function(){return"<la.Record id="+k._repr(this.id)+">"},search:function(e){for(var t in e){var r=e[t];if(k._bool(r)&&!this.fields.get(t).search(r))return!1}return!0},_dumpUL4ONAttr:function(e){return"values"===e?this._sparsevalues:this[e]},_loadUL4ONAttr:function(e,t){"values"===e?(this._sparsevalues=t,this._values=null,this._fields=null):this[e]=t}}),Object.defineProperty(L.Record,"values",{get:function(){if(null===this._values){this._values=w._havemap?new Map:{};var n=this;this.app.controls.forEach(function(e,t){var r=n._sparsevalues.get(e.identifier);void 0===r&&(r=null),n._values.set(t,r)})}return this._values}}),Object.defineProperty(L.Record,"fields",{get:function(){if(null===this._fields){this._fields=w._havemap?new Map:{};var n=this;this.values.forEach(function(e,t){var r=L.Field.create(n.app.controls.get(t),n.app,e);n._fields.set(t,r)})}return this._fields}}),L.Control=k._inherit(L.Base,{type:null,subtype:null,_ul4onattrs:["id","identifier","field","app","label","priority","order","default","ininsertprocedure","inupdateprocedure"],__repr__:function(){return"<la."+this.__type__+" id="+k._repr(this.id)+" identifier="+k._repr(this.identifier)+">"},asjson:function(e){return e},_logsearch:function(e,t){},search:function(e,t){return!1}}),L.BoolControl=k._inherit(L.Control,{type:"bool",__type__:"BoolControl",search:function(e,t){return this._logsearch(e,t),"equals"===t.operator&&t.value===e}}),L.IntControl=k._inherit(L.Control,{type:"int",__type__:"IntControl",search:function(e,t){return this._logsearch(e,t),"equals"===t.operator&&t.value===e}}),L.NumberControl=k._inherit(L.Control,{type:"number",__type__:"NumberControl",search:function(e,t){return this._logsearch(e,t),"equals"===t.operator?t.value===e:"range"===t.operator&&(null!==e&&((null===t.minvalue||t.minvalue<=e)&&(null===t.maxvalue||e<t.maxvalue)))}}),L.StringControl=k._inherit(L.Control,{type:"string",asjson:function(e){return e},search:function(e,t){return this._logsearch(e,t),"equals"===t.operator?t.value===e:"contains"===t.operator?null===t.value||null===e?t.value===e:0<=e.toLowerCase().indexOf(t.value.toLowerCase()):void 0}}),L.TextControl=k._inherit(L.StringControl,{subtype:"text",__type__:"TextControl"}),L.EmailControl=k._inherit(L.StringControl,{subtype:"email",__type__:"EmailControl"}),L.URLControl=k._inherit(L.StringControl,{subtype:"url",__type__:"URLControl"}),L.TelControl=k._inherit(L.StringControl,{subtype:"tel"}),L.PasswordControl=k._inherit(L.StringControl,{subtype:"password"}),L.TextAreaControl=k._inherit(L.StringControl,{subtype:"textarea",__type__:"TextAreaControl"}),L.DateControl=k._inherit(L.Control,{type:"date",subtype:"date",__type__:"DateControl",asjson:function(e){return e instanceof Date&&(e="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())),e},formatstring:function(e){return"de"===(e=e||this.app.language)?"%d.%m.%Y":"%m/%d/%Y"},search:function(e,t){this._logsearch(e,t);var r=t.value;return"[object Date]"==Object.prototype.toString.call(r)&&(r=k._format(r,this.formatstring(),this.app.language)),null!==e&&(e=k._format(e,this.formatstring(),this.app.language)),"equals"===t.operator?r===e:"contains"===t.operator&&(null===r||null===e?r===e:0<=e.toLowerCase().indexOf(r.toLowerCase()))}}),L.DatetimeMinuteControl=k._inherit(L.DateControl,{subtype:"datetimeminute",__type__:"DatetimeMinuteControl",formatstring:function(e){return"de"===(e=e||this.app.language)?"%d.%m.%Y %H:%M":"%m/%d/%Y %H:%M"}}),L.DatetimeSecondControl=k._inherit(L.DateControl,{subtype:"datetimesecond",__type__:"DatetimeMinuteSecond",formatstring:function(e){return"de"===(e=e||this.app.language)?"%d.%m.%Y %H:%M:%S":"%m/%d/%Y %H:%M:%S"}}),L.LookupControl=k._inherit(L.Control,{type:"lookup",_ul4onattrs:L.Control._ul4onattrs.concat(["lookupdata"]),search:function(e,t){return null===this.lookupapp?"equals"===t.operator&&(null===e?null===t.value:e.key===t.value):null===e||null===t.value?e===t.value:e.search(t)}}),L.LookupSelectControl=k._inherit(L.LookupControl,{subtype:"select",__type__:"LookupSelectControl"}),L.LookupRadioControl=k._inherit(L.LookupControl,{subtype:"radio",__type__:"LookupRadioControl"}),L.LookupChoiceControl=k._inherit(L.LookupControl,{subtype:"choice",__type__:"LookupChoiceControl"}),L.AppLookupControl=k._inherit(L.Control,{type:"applookup",_ul4onattrs:L.Control._ul4onattrs.concat(["lookupapp","lookupcontrols"]),search:function(e,t){return null===e||null===t.value?e===t.value:e.search(t)}}),L.AppLookupSelectControl=k._inherit(L.AppLookupControl,{subtype:"select",__type__:"AppLookupSelectControl"}),L.AppLookupRadioControl=k._inherit(L.AppLookupControl,{subtype:"radio",__type__:"AppLookupRadioControl"}),L.AppLookupChoiceControl=k._inherit(L.AppLookupControl,{subtype:"choice",__type__:"AppLookupChoiceControl"}),L.MultipleLookupControl=k._inherit(L.LookupControl,{type:"multiplelookup",search:function(e,t){if("equals"!==t.operator)return!1;if(null===this.lookupapp){for(var r=0;r<e.length;++r)if(e[r].key===t.value)return!0;return!1}if(null===t.value)return 0===e.length;for(r=0;r<e.length;++r)if(e[r].search(t.value))return!0;return!1}}),L.MultipleLookupSelectControl=k._inherit(L.MultipleLookupControl,{subtype:"select",__type__:"MultipleLookupSelectControl"}),L.MultipleLookupCheckboxControl=k._inherit(L.MultipleLookupControl,{subtype:"checkbox",__type__:"MultipleLookupCheckboxControl"}),L.MultipleAppLookupControl=k._inherit(L.AppLookupControl,{type:"multipleapplookup",search:function(e,t){if("equals"!==t.operator)return!1;if(null===t.value)return 0===e.length;for(var r=0;r<e.length;++r)if(e[r].search(t.value))return!0;return!1}}),L.MultipleAppLookupSelectControl=k._inherit(L.MultipleAppLookupControl,{subtype:"select",__type__:"MultipleAppLookupSelectControl"}),L.MultipleAppLookupCheckboxControl=k._inherit(L.MultipleAppLookupControl,{subtype:"checkbox",__type__:"MultipleAppLookupCheckboxControl"}),L.GeoControl=k._inherit(L.Control,{type:"geo",asjson:function(e){return L.Geo.isprotoof(e)&&(e="".concat(e.lat,", ").concat(e.long,", ").concat(e.info)),e},__type__:"GeoControl"}),L.FileControl=k._inherit(L.Control,{type:"file",__type__:"FileControl"}),L.ButtonControl=k._inherit(L.Control,{type:"button",__type__:"ButtonControl"}),L.Field=k._inherit(L.Base,{create:function(e,t,r){var n=L.Base.create.call(this);return n.control=e,n.record=t,n.value=r,n},search:function(e){return this.control.search(this.value,e)},__repr__:function(){return"<la.Field>"}}),L.LookupItem=k._inherit(L.Base,{_ul4onattrs:["key","label"],__repr__:function(){return"<la.LookupItem key="+k._repr(this.key)+" label="+k._repr(this.label)+">"}}),L.User=k._inherit(L.Base,{_ul4onattrs:["_id","id","gender","firstname","surname","initials","email","language","avatarsmall","avatarlarge","keyviews"],__repr__:function(){return"<la.User id="+k._repr(this.id)+" firstname="+k._repr(this.firstname)+" lastname="+k._repr(this.lastname)+" email="+k._repr(this.email)+">"}}),L.File=k._inherit(L.Base,{_ul4onattrs:["id","url","filename","mimetype","width","height"],__repr__:function(){return"<la.File id="+k._repr(this.id)+" url="+k._repr(this.url)+" filename="+k._repr(this.filename)+">"}}),L.Geo=k._inherit(L.Base,{_ul4onattrs:["lat","long","info"],__repr__:function(){return"<la.Geo lat="+k._repr(this.lat)+" long="+k._repr(this.long)+" info="+k._repr(this.info)+">"}}),L.Attachment=k._inherit(L.Base,{_ul4onattrs:["id","record","label","active"],__repr__:function(){return"<la."+this.__type__+" id="+k._repr(this.id)+" label="+k._repr(this.label)+">"}}),L.NoteAttachment=k._inherit(L.Attachment,{type:"noteattachment",__type__:"NoteAttachment",_ul4onattrs:L.Attachment._ul4onattrs.concat(["value"])}),L.URLAttachment=k._inherit(L.Attachment,{type:"urlattachment",__type__:"URLAttachment",_ul4onattrs:L.Attachment._ul4onattrs.concat(["value"])}),L.FileAttachment=k._inherit(L.Attachment,{type:"fileattachment",__type__:"FileAttachment",_ul4onattrs:L.Attachment._ul4onattrs.concat(["value"])}),L.ImageAttachment=k._inherit(L.Attachment,{type:"imageattachment",__type__:"ImageAttachment",_ul4onattrs:L.Attachment._ul4onattrs.concat(["original","thumb","small","medium","large"])}),L.JSONAttachment=k._inherit(L.Attachment,{type:"jsonattachment",__type__:"JSONAttachment",_ul4onattrs:L.Attachment._ul4onattrs.concat(["value"]),_dumpUL4ONAttr:function(e){return"value"===e?k._asjson(this.value):this[e]},_loadUL4ONAttr:function(e,t){"value"===e?this.value=k._fromjson(t):this[e]=t}}),L.Installation=k._inherit(L.Base,{_ul4onattrs:["id","name"],__repr__:function(){return"<la.Installation id="+k._repr(this.id)+" name="+k._repr(this.name)+">"}}),L.Category=k._inherit(L.Base,{_ul4onattrs:["id","identifier","name","order","parent","children","apps"],__repr__:function(){for(var e=[],t=this;null!==t;)e.splice(0,0,t.identifier),t=t.parent;return"<la.Category id="+k._repr(this.id)+" identifierpath="+k._repr(e.join("/"))+NaN+k._repr(this.name)+">"}}),L.KeyView=k._inherit(L.Base,{_ul4onattrs:["id","identifier","name","key","user"],__repr__:function(){return"<la.KeyView id="+k._repr(this.id)+" identifier="+k._repr(this.identifier)+">"}}),L.AppParameter=k._inherit(L.Base,{_ul4onattrs:["id","app","identifier","description","value"],__repr__:function(){return"<la.AppParameter id="+k._repr(this.id)+" identifier="+k._repr(this.identifier)+">"}});for(var D=["Globals","App","View","DataSource","Record","BoolControl","IntControl","NumberControl","TextControl","EmailControl","URLControl","TelControl","PasswordControl","TextAreaControl","DateControl","DatetimeMinuteControl","DatetimeSecondControl","LookupControl","LookupSelectControl","LookupRadioControl","LookupChoiceControl","AppLookupControl","AppLookupSelectControl","AppLookupRadioControl","AppLookupChoiceControl","MultipleLookupControl","MultipleLookupSelectControl","MultipleLookupCheckboxControl","MultipleAppLookupControl","MultipleAppLookupSelectControl","MultipleAppLookupCheckboxControl","GeoControl","FileControl","ButtonControl","Field","LookupItem","User","File","Geo","NoteAttachment","URLAttachment","FileAttachment","ImageAttachment","JSONAttachment","Installation","Category","KeyView","AppParameter"],q=0;q<D.length;++q){var O=D[q],I=L[O];w.register("de.livingapps.appdd."+O.toLowerCase(),I)}var V="object"===("undefined"==typeof module?"undefined":A(module))&&module.exports,N=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._password=r||"",this._userName=t||"",this._options={url:e.url||"https://my.living-apps.de",loginRequired:void 0===e.loginRequired||e.loginRequired},this._options.url=this._options.url.lastIndexOf("/")===this._options.url.length-1?this._options.url:"".concat(this._options.url,"/"),this.hostName=this._options.url.split("//")[1].substr(0,this._options.url.split("//")[1].length-1),this._options.loginRequired&&!this._userName)throw new Error("[LivingSDK] You want to login without a username");this.session=this.login()}var e,t,r;return e=n,(t=[{key:"login",value:function(){if(!this._options.loginRequired)return Promise.resolve(void 0);var e="https://".concat(this.hostName,"/gateway/login");return y.post(e,{username:this._userName,password:this._password},{httpsAgent:V?new S.Agent({ecdhCurve:"auto"}):void 0,headers:{"Content-Type":"application/json"}}).then(function(e){return e.data.auth_token})}},{key:"get",value:function(t,r){var n=this;return this.session.then(function(e){return y.get("https://".concat(n.hostName,"/gateway/apps/").concat(t).concat(void 0!==r?"?template="+r:""),{httpsAgent:V?new S.Agent({ecdhCurve:"auto"}):void 0,headers:{"X-La-Auth-Token":void 0!==e?e:"",Accept:"application/la-ul4on"}}).then(function(e){var t;return(t=w.loads(e.data)).get("globals").Login=n,t})})}},{key:"_insert",value:function(i,o){var s=this;return this.session.then(function(e){var t={};for(var r in o){if(!i.controls.has(r))throw new Error("insert() got an unexpected keyword argument ".concat(r));t[r]=i.controls.get(r).asjson(o[r])}var n={};return n.id=i.id,n.data=[{fields:t}],y.post("https://".concat(s.hostName,"/gateway/v1/appdd/").concat(i.id,".json"),{appdd:n},{httpsAgent:V?new S.Agent({ecdhCurve:"auto"}):void 0,headers:{"X-La-Auth-Token":void 0!==e?e:""}}).then(function(e){return{HTTPstatusCode:e.status,recordid:e.data.id,Record:L.Record.create({id:e.data.id,createdat:new Date(Date.now()),updatedat:null,updatedby:null,updatecount:0})}})})}},{key:"_update",value:function(o,s){var a=this;return this.session.then(function(e){var t={},r=o.app;for(var n in s){if(!r.controls.has(n))throw new Error("update() got an unexpected keyword argument ".concat(n));t[n]=s[n]}var i={};return i.id=r.id,i.data=[{id:o.id,fields:t}],console.log("https://".concat(a.hostName,"/gateway/v1/appdd/").concat(r.id,".json")),y.post("https://".concat(a.hostName,"/gateway/v1/appdd/").concat(r.id,".json"),{appdd:i},{httpsAgent:V?new S.Agent({ecdhCurve:"auto"}):void 0,headers:{"X-La-Auth-Token":void 0!==e?e:"","Content-Type":"application/json"}}).then(function(e){var t=e.data;for(var r in s)o.fields.get(r).value=s[r];return{HTTPstatusCode:e.status,recordid:t.id,Record:o}})})}},{key:"_delete",value:function(t){var r=this,n=t.app;return this.session.then(function(e){return y.delete("https://".concat(r.hostName,"/gateway/v1/appdd/").concat(n.id,"/").concat(t.id,".json"),{httpsAgent:V?new S.Agent({ecdhCurve:"auto"}):void 0,headers:{"X-La-Auth-Token":void 0!==e?e:""}})})}}])&&T(e.prototype,t),r&&T(e,r),n}();e.LivingSDK=N,e.default=N,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=livingsdk.js.map
